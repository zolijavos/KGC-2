<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -20 880 1420" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="0" y="-20" width="880" height="1420" fill="#ffffff"/>
<rect x="40" y="20" width="800" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="440" y="59" font-size="24" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Support Modul - Webhook Esemény Feldolgozás</text>
<ellipse cx="440" cy="160" rx="60" ry="40" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" opacity="1"/>
<text x="440" y="165" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Start</text>
<rect x="300" y="240" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="264" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ai-chatbot fogad webhook-ot</text>
<text x="440" y="280.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Chatwoot-tól (POST /webhook)</text>
<path d="M 440 200 L 440 240" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<rect x="300" y="340" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="366" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Parse JSON payload</text>
<text x="440" y="385.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(event, conversation, message)</text>
<path d="M 440 300 L 440 340" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<polygon points="440,440 540,500 440,560 340,500" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="491" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Event type</text>
<text x="440" y="510.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">message_created?</text>
<path d="M 440 400 L 440 440" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<ellipse cx="200" cy="500" rx="60" ry="40" stroke="#d32f2f" fill="#ffebee" stroke-width="2" opacity="1"/>
<text x="200" y="491" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<text x="200" y="510.2" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(Ignore</text>
<text x="200" y="529.4" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">event)</text>
<path d="M 340 500 L 260 500" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="290" y="501" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Nem</text>
<rect x="300" y="600" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="619" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Extract adatok:</text>
<text x="440" y="635.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">conversation_id, message,</text>
<text x="440" y="652.6" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">sender, channel</text>
<path d="M 440 560 L 440 600" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green)" opacity="1"/>
<text x="465" y="586" font-size="16" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">Igen</text>
<polygon points="440,700 540,760 440,820 340,760" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="751" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Message type</text>
<text x="440" y="770.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">incoming?</text>
<path d="M 440 660 L 440 700" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<ellipse cx="680" cy="760" rx="60" ry="40" stroke="#d32f2f" fill="#ffebee" stroke-width="2" opacity="1"/>
<text x="680" y="749" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<text x="680" y="765.8" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(Skip</text>
<text x="680" y="782.6" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">outgoing)</text>
<path d="M 540 760 L 620 760" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="580" y="757" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Outgoing</text>
<polygon points="440,860 540,930 440,1000 340,930" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="916" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Channel?</text>
<text x="440" y="935.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(widget/email/</text>
<text x="440" y="954.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">discord)</text>
<path d="M 440 820 L 440 860" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green)" opacity="1"/>
<text x="475" y="842" font-size="12" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">Incoming</text>
<rect x="120" y="1060" width="180" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="210" y="1086" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Route: Widget</text>
<text x="210" y="1105.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Handler</text>
<path d="M 340 930 L 280 980 L 240 1030" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="270" y="967" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Widget</text>
<rect x="350" y="1060" width="180" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1086" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Route: Email</text>
<text x="440" y="1105.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Handler</text>
<path d="M 440 1000 L 440 1060" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="470" y="1027" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Email</text>
<rect x="580" y="1060" width="180" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="670" y="1086" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Route: Discord</text>
<text x="670" y="1105.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Handler</text>
<path d="M 540 930 L 600 980 L 640 1030" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="610" y="967" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Discord</text>
<rect x="300" y="1180" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1206" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Forward request to</text>
<text x="440" y="1225.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">context-manager (5004)</text>
<path d="M 210 1120 L 210 1150 L 320 1150 L 320 1180" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<path d="M 440 1120 L 440 1180" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<path d="M 670 1120 L 670 1150 L 560 1150 L 560 1180" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<ellipse cx="440" cy="1320" rx="60" ry="40" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" opacity="1"/>
<text x="440" y="1325" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<path d="M 440 1240 L 440 1280" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
</svg>