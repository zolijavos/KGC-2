<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Modul Diagramok - Kok√≥ AI (Portable)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
        .diagram-container {
            min-height: 600px;
            overflow: auto;
        }
        .svg-wrapper {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            width: 100%;
        }
        .svg-wrapper svg {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div x-data="diagramApp()" x-cloak class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Support Modul - Kok√≥ AI Chatbot Rendszer</h1>
            <p class="text-gray-600">5 interakt√≠v diagram: Rendszer architekt√∫ra, adatfolyam √©s folyamatok</p>
            <p class="text-sm text-gray-500 mt-2">
                <strong>Technol√≥gi√°k:</strong> Chatwoot + Python Microservices + Google Gemini 2.0 Flash + Redis + PostgreSQL
            </p>
        </div>

        <!-- Navigation -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Diagramok</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                <template x-for="diagram in diagrams" :key="diagram.id">
                    <button
                        @click="currentDiagram = diagram.id"
                        :class="currentDiagram === diagram.id ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
                        class="px-4 py-3 rounded-lg text-left transition-colors duration-200"
                    >
                        <div class="font-semibold" x-text="diagram.name"></div>
                        <div class="text-xs opacity-75 mt-1" x-text="diagram.description"></div>
                    </button>
                </template>
            </div>
        </div>

        <!-- Current Diagram Display -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <template x-for="diagram in diagrams" :key="diagram.id">
                <div x-show="currentDiagram === diagram.id" class="diagram-container">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4" x-text="diagram.name"></h3>
                    <p class="text-gray-600 mb-6" x-text="diagram.fullDescription"></p>
                    <div class="svg-wrapper" x-html="diagram.svg"></div>
                </div>
            </template>
        </div>

        <!-- Footer -->
        <div class="mt-6 text-center text-sm text-gray-500">
            <p>Gener√°lva: 2025-12-28 | BMAD Method v6 | Claude Sonnet 4.5</p>
            <p class="mt-1">√ñsszes diagram SVG form√°tumban be√°gyazva - Nincs k√ºls≈ë f√ºgg≈ës√©g</p>
        </div>
    </div>

    <script>
        function diagramApp() {
            return {
                currentDiagram: 'architecture',
                diagrams: [
                    {
                        id: 'architecture',
                        name: 'üèóÔ∏è System Architecture',
                        description: '5-r√©teg≈± rendszer architekt√∫ra',
                        fullDescription: 'A Kok√≥ AI Support modul teljes rendszer architekt√∫r√°ja 5 r√©tegben: Frontend (Chatwoot Widget, Email, Discord) ‚Üí Chatwoot Core ‚Üí AI Middleware (Python mikroszerv√≠zek) ‚Üí Data Layer ‚Üí External Services (Gemini, Calendar, Whisper)',
                        svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -20 1480 1160" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="0" y="-20" width="1480" height="1160" fill="#ffffff"/>
<rect x="40" y="20" width="1400" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="950" y="70" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Support Modul Rendszer Architekt√∫ra (Kok√≥ AI)</text>
<text x="60" y="138" font-size="18" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">FRONTEND LAYER</text>
<rect x="140" y="180" width="200" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="305" y="234" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Chatwoot Widget</text>
<text x="305" y="250.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Weboldal)</text>
<rect x="400" y="180" width="200" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="550" y="234" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Email Inbound</text>
<rect x="660" y="180" width="200" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="815" y="234" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Discord Server</text>
<path d="M 240 260 L 240 320" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<path d="M 500 260 L 500 320" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<path d="M 760 260 L 760 320" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="60" y="318" font-size="18" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">CHATWOOT CORE (Rails)</text>
<rect x="140" y="360" width="720" height="100" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="800" y="424" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Chatwoot Core (Port: 3000)</text>
<text x="800" y="440.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Inbox kezel√©s  ‚Ä¢ Conversation routing  ‚Ä¢ Webhook dispatcher</text>
<text x="800" y="457.6" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Contact management  ‚Ä¢ Message storage  ‚Ä¢ Agent assignment</text>
<path d="M 500 460 L 500 500" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="480" y="482" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Webhook (message_created)</text>
<text x="60" y="538" font-size="18" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">AI MIDDLEWARE LAYER (Python)</text>
<rect x="80" y="580" width="180" height="120" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="245" y="652" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ai-chatbot</text>
<text x="245" y="666.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Port: 5001</text>
<text x="245" y="680.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="245" y="695.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Webhook fogad√°s</text>
<text x="245" y="709.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Routing</text>
<text x="245" y="724" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Email notify</text>
<rect x="300" y="580" width="180" height="120" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="465" y="652" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">context-manager</text>
<text x="465" y="666.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Port: 5004</text>
<text x="465" y="680.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="465" y="695.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Cache Mgmt</text>
<text x="465" y="709.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ KB Loader</text>
<text x="465" y="724" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Memory</text>
<rect x="520" y="580" width="180" height="120" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="685" y="652" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">gemini-proxy</text>
<text x="685" y="666.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Port: 5000</text>
<text x="685" y="680.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="685" y="695.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Gemini API</text>
<text x="685" y="709.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Rate limit</text>
<text x="685" y="724" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Fallback</text>
<rect x="740" y="580" width="180" height="120" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="905" y="652" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">calendar-service</text>
<text x="905" y="666.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Port: 5002</text>
<text x="905" y="680.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="905" y="695.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Google Cal</text>
<text x="905" y="709.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Booking</text>
<text x="905" y="724" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Slots</text>
<rect x="960" y="580" width="180" height="120" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="1125" y="652" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">discord-bridge</text>
<text x="1125" y="666.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Port: 8080</text>
<text x="1125" y="680.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="1125" y="695.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Discord Bot</text>
<text x="1125" y="709.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Ticket system</text>
<text x="1125" y="724" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Sync</text>
<rect x="1180" y="580" width="160" height="120" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="8" opacity="1"/>
<text x="1320" y="652" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Redis</text>
<text x="1320" y="666.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Port: 6379</text>
<text x="1320" y="680.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="1320" y="695.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Sessions</text>
<text x="1320" y="709.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Stats</text>
<text x="1320" y="724" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Memory</text>
<path d="M 260 640 L 300 640" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<path d="M 480 640 L 1180 640" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green)" opacity="1"/>
<text x="60" y="758" font-size="18" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">DATA LAYER</text>
<rect x="140" y="800" width="220" height="100" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="8" opacity="1"/>
<text x="340" y="862" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">PostgreSQL</text>
<text x="340" y="876.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Port: 5432</text>
<text x="340" y="890.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="340" y="905.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Chatwoot DB</text>
<text x="340" y="919.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Users</text>
<text x="340" y="934" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Messages</text>
<rect x="420" y="800" width="280" height="100" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="8" opacity="1"/>
<text x="680" y="862" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Knowledge Base</text>
<text x="680" y="876.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">/knowledge-bases/</text>
<text x="680" y="890.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="680" y="905.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ _global/</text>
<text x="680" y="919.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ project-specific/</text>
<rect x="760" y="800" width="260" height="100" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="8" opacity="1"/>
<text x="1000" y="862" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Memory Store</text>
<text x="1000" y="876.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">/memory/</text>
<text x="1000" y="890.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="1000" y="905.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Preferences</text>
<text x="1000" y="919.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ History</text>
<text x="1000" y="934" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Decisions</text>
<path d="M 390 700 L 390 800" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green)" opacity="1"/>
<text x="60" y="978" font-size="18" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">EXTERNAL SERVICES</text>
<rect x="140" y="1020" width="240" height="80" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="8" opacity="1"/>
<text x="350" y="1072" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Google Gemini 2.0 Flash</text>
<text x="350" y="1086.4" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(AI v√°laszgener√°l√°s)</text>
<rect x="440" y="1020" width="240" height="80" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="8" opacity="1"/>
<text x="650" y="1072" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Google Calendar API</text>
<text x="650" y="1086.4" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(Id≈ëpontfoglal√°s)</text>
<rect x="740" y="1020" width="240" height="80" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="8" opacity="1"/>
<text x="950" y="1072" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">OpenAI Whisper API</text>
<text x="950" y="1086.4" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(Hang√ºzenet ‚Üí sz√∂veg)</text>
<path d="M 610 700 L 610 1020 L 260 1020" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange)" opacity="1"/>
<path d="M 830 700 L 830 1020 L 560 1020" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange)" opacity="1"/>
<path d="M 170 700 L 170 1020 L 860 1020" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange)" opacity="1"/>
</svg>`
                    },
                    {
                        id: 'dataflow',
                        name: 'üìä Data Flow Diagram',
                        description: 'DFD Level 1 - adatfolyamok',
                        fullDescription: 'Data Flow Diagram (DFD Level 1): 2 k√ºls≈ë entit√°s (Felhaszn√°l√≥, Gemini API), 4 folyamat (Webhook Handling, Context Management, AI Response Generation, Memory Management), 4 adatt√°r (PostgreSQL, Redis, Knowledge Base, Memory Store)',
                        svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -20 1280 700" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah-2" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue-2" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green-2" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange-2" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="0" y="-20" width="1280" height="700" fill="#ffffff"/>
<rect x="40" y="20" width="1200" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="840" y="70" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Support Modul - Data Flow Diagram (DFD)</text>
<text x="60" y="136" font-size="16" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">External Entities</text>
<rect x="100" y="180" width="160" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="240" y="234" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">E1: Felhaszn√°l√≥</text>
<text x="240" y="250.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(√úgyf√©l)</text>
<rect x="900" y="180" width="160" height="80" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="8" opacity="1"/>
<text x="1040" y="234" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">E2: Google</text>
<text x="1040" y="250.8" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Gemini API</text>
<text x="60" y="316" font-size="16" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">Processes</text>
<ellipse cx="190" cy="410" rx="90" ry="50" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="260" y="422" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P1: Webhook</text>
<text x="260" y="436.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Handling</text>
<ellipse cx="430" cy="410" rx="90" ry="50" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="500" y="422" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P2: Context</text>
<text x="500" y="436.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Management</text>
<ellipse cx="670" cy="410" rx="90" ry="50" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="740" y="422" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P3: AI Response</text>
<text x="740" y="436.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Generation</text>
<ellipse cx="910" cy="410" rx="90" ry="50" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="980" y="422" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P4: Memory</text>
<text x="980" y="436.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Management</text>
<text x="60" y="536" font-size="16" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">Data Stores</text>
<rect x="100" y="580" width="220" height="60" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="300" y="622" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">D1: PostgreSQL DB</text>
<rect x="360" y="580" width="200" height="60" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="540" y="622" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">D2: Redis Cache</text>
<rect x="600" y="580" width="200" height="60" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="790" y="622" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">D3: Knowledge Base</text>
<rect x="840" y="580" width="200" height="60" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="1020" y="622" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">D4: Memory Store</text>
<path d="M 180 260 L 180 360" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-2)" opacity="1"/>
<text x="200" y="310" font-size="10" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">√úzenet</text>
<path d="M 280 410 L 340 410" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-2)" opacity="1"/>
<text x="285" y="430" font-size="10" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">Request</text>
<path d="M 520 410 L 580 410" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-2)" opacity="1"/>
<text x="525" y="430" font-size="10" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">Context</text>
<path d="M 670 360 L 670 260" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange-2)" opacity="1"/>
<path d="M 690 260 L 690 360" stroke="#f57c00" fill="none" stroke-width="2" opacity="1"/>
<text x="700" y="305" font-size="10" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">API Call / Response</text>
<path d="M 760 410 L 820 410" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-2)" opacity="1"/>
<text x="765" y="430" font-size="10" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">Data</text>
<path d="M 190 460 L 190 580" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-2)" opacity="1"/>
<path d="M 430 460 L 430 580" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-2)" opacity="1"/>
<path d="M 670 460 L 670 580" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-2)" opacity="1"/>
<path d="M 910 460 L 910 580" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-2)" opacity="1"/>
</svg>`
                    },
                    {
                        id: 'flow-conversation',
                        name: 'üí¨ Flow: New Conversation',
                        description: '√öj besz√©lget√©s kezel√©si folyamat',
                        fullDescription: 'Teljes √ºzenet feldolgoz√°si folyamat a felhaszn√°l√≥i √ºzenet fogad√°s√°t√≥l a v√°lasz visszak√ºld√©s√©ig: email bounce ellen≈ërz√©s ‚Üí context bet√∂lt√©s ‚Üí Redis cache (hit/miss) ‚Üí Gemini API h√≠v√°s ‚Üí v√°lasz feldolgoz√°s ‚Üí Chatwoot API v√°lasz',
                        svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -20 880 1700" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah-3" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue-3" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green-3" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange-3" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="0" y="-20" width="880" height="1700" fill="#ffffff"/>
<rect x="40" y="20" width="800" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="440" y="59" font-size="24" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Support Modul - √öj Besz√©lget√©s Kezel√©si Folyamat</text>
<ellipse cx="440" cy="160" rx="60" ry="40" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" opacity="1"/>
<text x="440" y="165" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Start</text>
<rect x="320" y="240" width="240" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="266" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Felhaszn√°l√≥ k√ºld √ºzenetet</text>
<text x="440" y="285.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Widget/Email/Discord)</text>
<path d="M 440 200 L 440 240" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<rect x="300" y="340" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="359" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Chatwoot fogadja √ºzenetet</text>
<text x="440" y="375.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">√©s l√©trehoz besz√©lget√©st</text>
<text x="440" y="392.6" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(message_created event)</text>
<path d="M 440 300 L 440 340" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<rect x="300" y="440" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="466" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ai-chatbot (5001)</text>
<text x="440" y="485.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">fogadja webhook-ot</text>
<path d="M 440 400 L 440 440" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<polygon points="440,540 520,600 440,660 360,600" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="589" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Email bounce</text>
<text x="440" y="605.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">vagysender</text>
<text x="440" y="622.6" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">mailer-daemon?</text>
<path d="M 440 500 L 440 540" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<ellipse cx="200" cy="600" rx="60" ry="40" stroke="#d32f2f" fill="#ffebee" stroke-width="2" opacity="1"/>
<text x="200" y="591" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<text x="200" y="610.2" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(Skip</text>
<text x="200" y="629.4" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">processing)</text>
<path d="M 360 600 L 260 600" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah-3)" opacity="1"/>
<text x="300" y="601" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Igen</text>
<rect x="300" y="700" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="726" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">context-manager (5004)</text>
<text x="440" y="745.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">fogadja request-et</text>
<path d="M 440 660 L 440 700" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-3)" opacity="1"/>
<text x="465" y="686" font-size="16" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">Nem</text>
<rect x="300" y="800" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="826" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Bet√∂lti Knowledge Base-t</text>
<text x="440" y="845.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">√©s √ºgyf√©l mem√≥ri√°t</text>
<path d="M 440 760 L 440 800" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<polygon points="440,900 520,960 440,1020 360,960" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="951" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Redis cache</text>
<text x="440" y="970.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">hit?</text>
<path d="M 440 860 L 440 900" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<rect x="640" y="920" width="200" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="740" y="946" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">L√©trehoz √∫j</text>
<text x="740" y="965.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Gemini cache-t</text>
<text x="740" y="984.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(TTL: 1 √≥ra)</text>
<path d="M 520 960 L 640 960" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange-3)" opacity="1"/>
<text x="580" y="961" font-size="16" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">Miss</text>
<rect x="300" y="1060" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1086" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">gemini-proxy (5000)</text>
<text x="440" y="1105.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">k√ºldi request-et</text>
<path d="M 440 1020 L 440 1060" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-3)" opacity="1"/>
<text x="465" y="1046" font-size="16" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">Hit</text>
<path d="M 740 1000 L 740 1030 L 580 1030 L 580 1070" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<rect x="300" y="1160" width="280" height="60" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1184" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Google Gemini 2.0 Flash API</text>
<text x="440" y="1200.8" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">feldolgozza √©s v√°laszol</text>
<path d="M 440 1120 L 440 1160" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange-3)" opacity="1"/>
<rect x="300" y="1260" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1286" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ai-chatbot feldolgozza</text>
<text x="440" y="1305.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">AI v√°laszt</text>
<path d="M 440 1220 L 440 1260" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<rect x="300" y="1360" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1384" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ai-chatbot k√ºldi v√°laszt</text>
<text x="440" y="1400.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Chatwoot API-n kereszt√ºl</text>
<path d="M 440 1320 L 440 1360" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<rect x="300" y="1460" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1486" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Chatwoot kisz√°ll√≠tja v√°laszt</text>
<text x="440" y="1505.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">felhaszn√°l√≥nak</text>
<path d="M 440 1420 L 440 1460" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
<ellipse cx="440" cy="1600" rx="60" ry="40" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" opacity="1"/>
<text x="440" y="1605" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<path d="M 440 1520 L 440 1560" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-3)" opacity="1"/>
</svg>`
                    },
                    {
                        id: 'flow-webhook',
                        name: 'üîÑ Flow: Webhook Processing',
                        description: 'Webhook esem√©ny feldolgoz√°s',
                        fullDescription: 'Webhook esem√©ny feldolgoz√°si folyamat: ai-chatbot fogad webhook-ot ‚Üí parse JSON ‚Üí event type ellen≈ërz√©s (message_created?) ‚Üí extract adatok ‚Üí message direction (incoming/outgoing) ‚Üí channel routing (Widget/Email/Discord) ‚Üí context-manager-nek tov√°bb√≠t√°s',
                        svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -20 880 1420" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah-4" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue-4" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green-4" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange-4" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="0" y="-20" width="880" height="1420" fill="#ffffff"/>
<rect x="40" y="20" width="800" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="440" y="59" font-size="24" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Support Modul - Webhook Esem√©ny Feldolgoz√°s</text>
<ellipse cx="440" cy="160" rx="60" ry="40" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" opacity="1"/>
<text x="440" y="165" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Start</text>
<rect x="300" y="240" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="264" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ai-chatbot fogad webhook-ot</text>
<text x="440" y="280.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Chatwoot-t√≥l (POST /webhook)</text>
<path d="M 440 200 L 440 240" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<rect x="300" y="340" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="366" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Parse JSON payload</text>
<text x="440" y="385.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(event, conversation, message)</text>
<path d="M 440 300 L 440 340" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<polygon points="440,440 540,500 440,560 340,500" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="491" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Event type</text>
<text x="440" y="510.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">message_created?</text>
<path d="M 440 400 L 440 440" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<ellipse cx="200" cy="500" rx="60" ry="40" stroke="#d32f2f" fill="#ffebee" stroke-width="2" opacity="1"/>
<text x="200" y="491" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<text x="200" y="510.2" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(Ignore</text>
<text x="200" y="529.4" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">event)</text>
<path d="M 340 500 L 260 500" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah-4)" opacity="1"/>
<text x="290" y="501" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Nem</text>
<rect x="300" y="600" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="619" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Extract adatok:</text>
<text x="440" y="635.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">conversation_id, message,</text>
<text x="440" y="652.6" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">sender, channel</text>
<path d="M 440 560 L 440 600" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-4)" opacity="1"/>
<text x="465" y="586" font-size="16" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">Igen</text>
<polygon points="440,700 540,760 440,820 340,760" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="751" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Message type</text>
<text x="440" y="770.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">incoming?</text>
<path d="M 440 660 L 440 700" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<ellipse cx="680" cy="760" rx="60" ry="40" stroke="#d32f2f" fill="#ffebee" stroke-width="2" opacity="1"/>
<text x="680" y="749" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<text x="680" y="765.8" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(Skip</text>
<text x="680" y="782.6" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">outgoing)</text>
<path d="M 540 760 L 620 760" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah-4)" opacity="1"/>
<text x="580" y="757" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Outgoing</text>
<polygon points="440,860 540,930 440,1000 340,930" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="916" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Channel?</text>
<text x="440" y="935.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(widget/email/</text>
<text x="440" y="954.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">discord)</text>
<path d="M 440 820 L 440 860" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-4)" opacity="1"/>
<text x="475" y="842" font-size="12" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">Incoming</text>
<rect x="120" y="1060" width="180" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="210" y="1086" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Route: Widget</text>
<text x="210" y="1105.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Handler</text>
<path d="M 340 930 L 280 980 L 240 1030" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<text x="270" y="967" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Widget</text>
<rect x="350" y="1060" width="180" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1086" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Route: Email</text>
<text x="440" y="1105.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Handler</text>
<path d="M 440 1000 L 440 1060" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<text x="470" y="1027" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Email</text>
<rect x="580" y="1060" width="180" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="670" y="1086" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Route: Discord</text>
<text x="670" y="1105.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Handler</text>
<path d="M 540 930 L 600 980 L 640 1030" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<text x="610" y="967" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Discord</text>
<rect x="300" y="1180" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1206" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Forward request to</text>
<text x="440" y="1225.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">context-manager (5004)</text>
<path d="M 210 1120 L 210 1150 L 320 1150 L 320 1180" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<path d="M 440 1120 L 440 1180" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<path d="M 670 1120 L 670 1150 L 560 1150 L 560 1180" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
<ellipse cx="440" cy="1320" rx="60" ry="40" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" opacity="1"/>
<text x="440" y="1325" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<path d="M 440 1240 L 440 1280" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-4)" opacity="1"/>
</svg>`
                    },
                    {
                        id: 'flow-ai',
                        name: 'ü§ñ Flow: AI Generation',
                        description: 'AI v√°laszgener√°l√°s Gemini-vel',
                        fullDescription: 'R√©szletes AI feldolgoz√°si pipeline: context-manager fogad request ‚Üí bet√∂lti Knowledge Base-t ‚Üí bet√∂lti √ºgyf√©l mem√≥ri√°t ‚Üí Redis cache ellen≈ërz√©s ‚Üí Gemini cache l√©trehoz√°s (75% k√∂lts√©gmegtakar√≠t√°s) ‚Üí prompt √∂ssze√°ll√≠t√°s ‚Üí Gemini 2.0 Flash API h√≠v√°s ‚Üí parse & validate ‚Üí mem√≥ria friss√≠t√©s (GDPR) ‚Üí visszak√ºld ai-chatbot-nak',
                        svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -20 880 1580" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah-5" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue-5" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green-5" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange-5" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="0" y="-20" width="880" height="1580" fill="#ffffff"/>
<rect x="40" y="20" width="800" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="440" y="59" font-size="24" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Support Modul - AI V√°laszgener√°l√°s Gemini-vel</text>
<ellipse cx="440" cy="160" rx="60" ry="40" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" opacity="1"/>
<text x="440" y="165" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Start</text>
<rect x="300" y="240" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="264" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">context-manager fogadja</text>
<text x="440" y="280.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">request-et ai-chatbot-t√≥l</text>
<path d="M 440 200 L 440 240" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<rect x="300" y="340" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="364" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Bet√∂lti Knowledge Base-t</text>
<text x="440" y="380.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(/knowledge-bases/*.md)</text>
<path d="M 440 300 L 440 340" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<rect x="300" y="440" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="458" font-size="13" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Bet√∂lti √ºgyf√©l mem√≥ri√°t</text>
<text x="440" y="473.6" font-size="13" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(/memory/{customer_id}.json)</text>
<text x="440" y="489.2" font-size="13" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">preferences, history</text>
<path d="M 440 400 L 440 440" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<polygon points="440,540 540,600 440,660 340,600" stroke="#f57c00" fill="#fff3e0" stroke-width="2" opacity="1"/>
<text x="440" y="591" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Redis cache</text>
<text x="440" y="610.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">tal√°lat?</text>
<path d="M 440 500 L 440 540" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<rect x="620" y="560" width="220" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="730" y="578" font-size="13" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">L√©trehoz √∫j Gemini</text>
<text x="730" y="593.6" font-size="13" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">cache-t KB-b≈ël</text>
<text x="730" y="609.2" font-size="13" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(TTL: 1 √≥ra)</text>
<text x="730" y="624.8" font-size="13" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">75% k√∂lts√©gmegtakar√≠t√°s</text>
<path d="M 540 600 L 620 600" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange-5)" opacity="1"/>
<text x="580" y="601" font-size="16" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">Miss</text>
<rect x="300" y="700" width="280" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="717" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">√ñssze√°ll√≠tja prompt-ot:</text>
<text x="440" y="731.4" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">- KB context (cached)</text>
<text x="440" y="745.8" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">- √úgyf√©l mem√≥ria</text>
<text x="440" y="760.2" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">- User √ºzenet</text>
<text x="440" y="774.6" font-size="12" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">- System instructions</text>
<path d="M 440 660 L 440 700" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green-5)" opacity="1"/>
<text x="465" y="686" font-size="16" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">Hit</text>
<path d="M 730 640 L 730 670 L 580 670 L 580 710" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<rect x="300" y="820" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="844" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">gemini-proxy (5000)</text>
<text x="440" y="860.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">feldolgozza request-et</text>
<path d="M 440 780 L 440 820" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<rect x="300" y="920" width="280" height="80" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="937" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Google Gemini 2.0 Flash</text>
<text x="440" y="951.4" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">API h√≠v√°s</text>
<text x="440" y="965.8" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">(context caching enabled)</text>
<text x="440" y="980.2" font-size="12" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Multi-language t√°mogat√°s</text>
<path d="M 440 880 L 440 920" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange-5)" opacity="1"/>
<rect x="300" y="1040" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1066" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">gemini-proxy fogadja</text>
<text x="440" y="1085.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">AI v√°laszt</text>
<path d="M 440 1000 L 440 1040" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<rect x="300" y="1140" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1166" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Parse √©s validate</text>
<text x="440" y="1185.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">response (JSON)</text>
<path d="M 440 1100 L 440 1140" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<rect x="300" y="1240" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1264" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Menti mem√≥ri√°ba √∫j inf√≥kat</text>
<text x="440" y="1280.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(GDPR compliant)</text>
<path d="M 440 1200 L 440 1240" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<rect x="300" y="1340" width="280" height="60" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="440" y="1366" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Visszak√ºldi AI v√°laszt</text>
<text x="440" y="1385.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ai-chatbot-nak</text>
<path d="M 440 1300 L 440 1340" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
<ellipse cx="440" cy="1480" rx="60" ry="40" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" opacity="1"/>
<text x="440" y="1485" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">End</text>
<path d="M 440 1400 L 440 1440" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue-5)" opacity="1"/>
</svg>`
                    }
                ],
                init() {
                    console.log('Support Diagram App Initialized');
                    console.log('Total diagrams:', this.diagrams.length);
                }
            }
        }
    </script>
</body>
</html>
