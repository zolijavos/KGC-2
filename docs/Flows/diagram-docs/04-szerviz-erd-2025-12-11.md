# 4. Szerviz Modul - ERD (EntitÃ¡s-Kapcsolat Diagram)

## Diagram AlapinformÃ¡ciÃ³k

| TulajdonsÃ¡g | Ã‰rtÃ©k |
|-------------|-------|
| **FÃ¡jlnÃ©v** | `4-szerviz-erd-2025-12-11.excalidraw` |
| **TÃ­pus** | ERD (Entity-Relationship Diagram) |
| **Modul** | Szerviz |
| **VerziÃ³** | v3.0 (Multi-tenant + Fit-Gap frissÃ­tÃ©s) |
| **DÃ¡tum** | 2025-12-11 |
| **KategÃ³ria** | 4. rÃ©sz - Szerviz Modul |
| **ForrÃ¡s ADR-ek** | ADR-013 (bevizsgÃ¡lÃ¡si dÃ­j) |

---

## RÃ©szletes LeÃ­rÃ¡s

Ez az ERD diagram a **szerviz modul adatmodelljÃ©t** mutatja be. A v3.0 verziÃ³ tartalmazza:
- ğŸ†• **FelvÃ©teli tÃ­pus** (intake_type: warranty/repair/quote)
- ğŸ†• **TartozÃ©k checklist** (SZERVIZ_TARTOZÃ‰K)
- ğŸ†• **Dokumentum csatolmÃ¡nyok** (MUNKALAP_CSATOLMÃNY)
- ğŸ†• **BelsÅ‘ megjegyzÃ©sek** (internal_notes)
- ğŸ†• **BevizsgÃ¡lÃ¡si dÃ­j kezelÃ©s** (ADR-013)

---

## EntitÃ¡sok RÃ©szletes LeÃ­rÃ¡sa

### 1. MUNKALAP EntitÃ¡s (KÃ¶zponti entitÃ¡s) ğŸ†• BÅVÃTETT

A szerviz folyamat kÃ¶zponti entitÃ¡sa.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           MUNKALAP                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  munkalap_szam (VARCHAR)         â”‚  â† Egyedi azonosÃ­tÃ³ (ML-YYYY-NNNNN)
â”‚     tenant_id (UUID) ğŸ¢             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FK  ugyfÃ©l_id (INT)                 â”‚  â†’ PARTNER
â”‚ FK  felvevo_id (INT)                â”‚  â†’ FELHASZNALO
â”‚     gep_azonosito (VARCHAR)         â”‚  â† GÃ©p belsÅ‘ azonosÃ­tÃ³
â”‚     geptipus (VARCHAR)              â”‚  â† GyÃ¡rtÃ³ + modell
â”‚     sorozatszam (VARCHAR)           â”‚  â† GÃ©p sorozatszÃ¡ma
â”‚     felvetel_datum (DATETIME)       â”‚  â† FelvÃ©tel idÅ‘pontja
â”‚     problema_leiras (TEXT)          â”‚  â† ÃœgyfÃ©l Ã¡ltal leÃ­rt hiba
â”‚     statusz (ENUM)                  â”‚  â† Munkalap stÃ¡tusza
â”‚     vonalkod (VARCHAR)              â”‚  â† GenerÃ¡lt vonalkÃ³d
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ†• intake_type (ENUM)               â”‚  â† warranty/repair/quote
â”‚ ğŸ†• bevizsgalasi_dij (DECIMAL)       â”‚  â† BevizsgÃ¡lÃ¡si dÃ­j
â”‚ ğŸ†• bevizsg_dij_indoklas (TEXT)      â”‚  â† IndoklÃ¡s ha garanciÃ¡lisnÃ¡l >0
â”‚ ğŸ†• internal_notes (TEXT)            â”‚  â† BelsÅ‘ megjegyzÃ©sek
â”‚ ğŸ†• internal_notes_visible (BOOLEAN) â”‚  â† Bolti kollÃ©gÃ¡k lÃ¡tjÃ¡k-e
â”‚ ğŸ†• garancialis (BOOLEAN)            â”‚  â† GaranciÃ¡lis-e
â”‚ FK garancia_claim_id (INT)          â”‚  â†’ GARANCIA_CLAIM [nullable]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ†• FelvÃ©teli tÃ­pusok (intake_type) - Fit-Gap:**
| TÃ­pus | KÃ³d | LeÃ­rÃ¡s |
|-------|-----|--------|
| **GaranciÃ¡lis** | `warranty` | GaranciÃ¡lis javÃ­tÃ¡s (bevizsg. dÃ­j default 0 Ft) |
| **JavÃ­tÃ¡s** | `repair` | NormÃ¡l javÃ­tÃ¡s (bevizsg. dÃ­j felszÃ¡mÃ­thatÃ³) |
| **ÃrajÃ¡nlat** | `quote` | Csak Ã¡rajÃ¡nlat kÃ©szÃ­tÃ©s (pl. MÃV-nak) |

**ğŸ†• BevizsgÃ¡lÃ¡si dÃ­j kezelÃ©s (ADR-013):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BEVIZSGÃLÃSI DÃJ SZABÃLYOK (ADR-013)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  Ha intake_type = 'warranty':                              â”‚
â”‚  â”œâ”€ bevizsgalasi_dij DEFAULT = 0 Ft                        â”‚
â”‚  â”œâ”€ âš ï¸ FigyelmeztetÃ©s jelenik meg                          â”‚
â”‚  â””â”€ Ha mÃ©gis >0: bevizsg_dij_indoklas KÃ–TELEZÅ!            â”‚
â”‚                                                            â”‚
â”‚  Ha intake_type = 'repair' vagy 'quote':                   â”‚
â”‚  â””â”€ bevizsgalasi_dij szabadon megadhatÃ³                    â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**StÃ¡tusz Ã©rtÃ©kek:**
| KÃ³d | JelentÃ©s | LeÃ­rÃ¡s |
|-----|----------|--------|
| `felveve` | FelvÃ©ve | GÃ©p beÃ©rkezett |
| `arajanalt` | ÃrajÃ¡nlat | ÃrajÃ¡nlat kÃ©szÃ¼lt |
| `javitas_alatt` | JavÃ­tÃ¡s alatt | Munka folyamatban |
| `szamlazhatÃ³` | SzÃ¡mlÃ¡zhatÃ³ | JavÃ­tÃ¡s kÃ©sz, vÃ¡rja szÃ¡mlÃ¡zÃ¡st |
| ğŸ†• `varakozik` | VÃ¡rakozik | AlkatrÃ©szre/jÃ³vÃ¡hagyÃ¡sra vÃ¡r |
| ğŸ†• `kiadva` | Kiadva | GÃ©p visszaadva Ã¼gyfÃ©lnek |

---

### 2. SZERVIZ_TARTOZÃ‰K EntitÃ¡s ğŸ†• ÃšJ

Beadott gÃ©p tartozÃ©kainak checklist-je.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        SZERVIZ_TARTOZÃ‰K ğŸ†•          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  tartozek_id (INT)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FK  munkalap_id (VARCHAR)           â”‚  â†’ MUNKALAP
â”‚     tartozek_tipus (VARCHAR)        â”‚  â† markolat/lÃ¡nc/lÃ¡ncvezetÅ‘/stb.
â”‚     beadva (BOOLEAN)                â”‚  â† BeadÃ¡skor bepipÃ¡lva-e
â”‚     allapot (VARCHAR)               â”‚  â† Ãllapot megjegyzÃ©s
â”‚     megjegyzes (VARCHAR)            â”‚  â† EgyÃ©b megjegyzÃ©s
â”‚     kiadva (BOOLEAN)                â”‚  â† KiadÃ¡skor visszaadva-e
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**TartozÃ©k tÃ­pusok (dropdown lista):**
| TÃ­pus | LeÃ­rÃ¡s |
|-------|--------|
| `markolat` | Markolat/fogantyÃº |
| `lanc` | LÃ¡nc (lÃ¡ncfÅ±rÃ©szhez) |
| `lancvezeto` | LÃ¡ncvezetÅ‘ |
| `burkolat` | Burkolat elemek |
| `akku` | AkkumulÃ¡tor |
| `tolto` | TÃ¶ltÅ‘ |
| `taska` | HordtÃ¡ska/koffer |
| `egyeb` | EgyÃ©b (megjegyzÃ©sbe Ã­rva) |

---

### 3. MUNKALAP_CSATOLMÃNY EntitÃ¡s ğŸ†• ÃšJ

Dokumentumok, fotÃ³k csatolÃ¡sa munkalaphoz.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MUNKALAP_CSATOLMÃNY ğŸ†•         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  csatolmany_id (INT)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FK  munkalap_id (VARCHAR)           â”‚  â†’ MUNKALAP
â”‚     tipus (ENUM)                    â”‚  â† garancialevel/szamla/foto/egyeb
â”‚     fajl_url (VARCHAR)              â”‚  â† FÃ¡jl elÃ©rÃ©si Ãºtja
â”‚     fajl_nev (VARCHAR)              â”‚  â† Eredeti fÃ¡jlnÃ©v
â”‚     feltoltve (DATETIME)            â”‚  â† FeltÃ¶ltÃ©s idÅ‘pontja
â”‚ FK  feltoltotte_user_id (INT)       â”‚  â†’ FELHASZNÃLÃ“
â”‚     megjegyzes (VARCHAR)            â”‚  â† CsatolmÃ¡ny leÃ­rÃ¡sa
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CsatolmÃ¡ny tÃ­pusok:**
| TÃ­pus | KÃ³d | Mikor szÃ¼ksÃ©ges |
|-------|-----|-----------------|
| **GarancialevÃ©l** | `garancialevel` | GaranciÃ¡lis javÃ­tÃ¡snÃ¡l |
| **VÃ¡sÃ¡rlÃ¡si szÃ¡mla** | `szamla` | GaranciÃ¡lis javÃ­tÃ¡snÃ¡l |
| **FotÃ³** | `foto` | ÃtvÃ©telkor, kÃ¡r dokumentÃ¡lÃ¡s |
| **EgyÃ©b** | `egyeb` | BÃ¡rmi mÃ¡s dokumentum |

---

### 4. MUNKALAP_TETEL EntitÃ¡s

Egy munkalaphoz tartozÃ³ tÃ©telek (alkatrÃ©szek, munkadÃ­j).

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        MUNKALAP_TETEL               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  tetel_id (INT)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FK  munkalap_id (VARCHAR)           â”‚  â†’ MUNKALAP
â”‚ FK  cikkszam (VARCHAR)              â”‚  â†’ CIKK
â”‚     mennyiseg (INT)                 â”‚  â† FelhasznÃ¡lt mennyisÃ©g
â”‚     egysegar (DECIMAL)              â”‚  â† EgysÃ©gÃ¡r
â”‚     megjegyzes (TEXT)               â”‚  â† MegjegyzÃ©s a tÃ©telhez
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ†• garancialis_tettel (BOOLEAN)     â”‚  â† GaranciÃ¡lis claim rÃ©sze-e
â”‚ ğŸ†• norma_kod (VARCHAR)              â”‚  â† Makita norma kÃ³d ha van
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5. ARAJANALT EntitÃ¡s

ÃrajÃ¡nlatok nyilvÃ¡ntartÃ¡sa.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ARAJANALT                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  arajanalt_szam (VARCHAR)        â”‚  â† ÃrajÃ¡nlat azonosÃ­tÃ³
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FK  munkalap_id (VARCHAR)           â”‚  â†’ MUNKALAP
â”‚ FK  vevo_id (INT)                   â”‚  â†’ PARTNER (cÃ­mzett)
â”‚     hivatkozasi_szam (VARCHAR)      â”‚  â† KÃ¼lsÅ‘ hivatkozÃ¡s
â”‚     osszeg (DECIMAL)                â”‚  â† VÃ©gÃ¶sszeg
â”‚     statusz (ENUM)                  â”‚  â† ÃrajÃ¡nlat stÃ¡tusz
â”‚     oradij (DECIMAL)                â”‚  â† MunkadÃ­j/Ã³ra
â”‚     ervenyesseg (DATE)              â”‚  â† Meddig Ã©rvÃ©nyes
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 6. GaranciÃ¡lis EntitÃ¡sok (MeglÃ©vÅ‘k - 08-garancialis-javitas)

```
GARANCIA_SZERZÅDÃ‰S          GARANCIA_CLAIM              NORMA_TÃ‰TEL
â”œâ”€ garancia_id (PK)         â”œâ”€ claim_id (PK)            â”œâ”€ norma_id (PK)
â”œâ”€ gyarto_id (FK)           â”œâ”€ munkalap_id (FK)         â”œâ”€ garancia_id (FK)
â”œâ”€ gyarto_nev               â”œâ”€ garancia_id (FK)         â”œâ”€ hibakod
â”œâ”€ garancia_honap           â”œâ”€ bejelentes_datum         â”œâ”€ hiba_nev
â”œâ”€ szerv_tipus              â”œâ”€ hiba_leiras              â”œâ”€ norma_perc
â”œâ”€ norma_tabla_url          â”œâ”€ statusz                  â”œâ”€ anyag_tartalmazott
â”œâ”€ elszamolas_mod           â”œâ”€ norma_perc               â””â”€ megjegyzes
â””â”€ aktiv                    â”œâ”€ dijazas_osszeg
                            â””â”€ fizetve
```

---

## Kapcsolatok (Relationships)

### Kapcsolati Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PARTNER    â”‚â”€â”€â”€â”€1:Nâ”€â”€â”‚    MUNKALAP     â”‚â”€â”€â”€â”€1:Nâ”€â”€â”‚ MUNKALAP_   â”‚
â”‚             â”‚         â”‚                 â”‚         â”‚   TETEL     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                         â”‚                         â”‚
       â”‚                         â”‚ 1:N                     â”‚ N:1
       â”‚                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                    â”‚
       â”‚                    â”‚         â”‚                    â”‚
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”     â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
       â”‚            â”‚ ARAJANALT â”‚     â”‚            â”‚   CIKK    â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                              â”‚
       â”‚                              â”‚ 1:N
       â”‚                              â”‚
       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚                   â”‚
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚            â”‚ SZERVIZ_      â”‚   â”‚ MUNKALAP_      â”‚
       â”‚            â”‚ TARTOZÃ‰K ğŸ†•   â”‚   â”‚ CSATOLMÃNY ğŸ†•  â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚BELSO_UGYFÃ‰L â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MUNKALAP â”€â”€â”€â”€â”€1:1â”€â”€â”€â”€â”€ GARANCIA_CLAIM (ha garancialis=true)
                              â”‚
                              â”‚ N:1
                              â–¼
                       GARANCIA_SZERZÅDÃ‰S
                              â”‚
                              â”‚ 1:N
                              â–¼
                         NORMA_TÃ‰TEL
```

---

## Munkalap FelvÃ©tel UI (Fit-Gap alapjÃ¡n)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MUNKALAP FELVÃ‰TEL                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ†• FELVÃ‰TELI TÃPUS:                                                        â”‚
â”‚  (â€¢) JavÃ­tÃ¡s        ( ) GaranciÃ¡lis        ( ) ÃrajÃ¡nlat                    â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  ÃœGYFÃ‰L ADATOK:                                                             â”‚
â”‚  Partner: [KovÃ¡cs JÃ¡nos â–¼]         Telefon: [+36 30 123 4567]              â”‚
â”‚                                                                             â”‚
â”‚  GÃ‰P ADATOK:                                                                â”‚
â”‚  GyÃ¡rtÃ³: [Stihl â–¼]    TÃ­pus: [MS 180]    SorozatszÃ¡m: [__________]          â”‚
â”‚                                                                             â”‚
â”‚  HIBA LEÃRÃS:                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Nem indul, fÃ¼stÃ¶l, rossz hang                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  ğŸ†• TARTOZÃ‰K CHECKLIST:                                                     â”‚
â”‚  â˜‘ Markolat                    Ãllapot: [JÃ³ â–¼]      Megj: [___________]    â”‚
â”‚  â˜‘ LÃ¡nc                        Ãllapot: [Kopott â–¼]  Megj: [csere kell]     â”‚
â”‚  â˜‘ LÃ¡ncvezetÅ‘                  Ãllapot: [JÃ³ â–¼]      Megj: [___________]    â”‚
â”‚  â˜ Burkolat                    Ãllapot: [      â–¼]   Megj: [___________]    â”‚
â”‚  â˜ Akku                        Ãllapot: [      â–¼]   Megj: [___________]    â”‚
â”‚  [+ EgyÃ©b tartozÃ©k]                                                         â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  ğŸ†• CSATOLMÃNYOK:                                                           â”‚
â”‚  [ğŸ“· FotÃ³ feltÃ¶ltÃ©s]  [ğŸ“„ GarancialevÃ©l]  [ğŸ§¾ SzÃ¡mla]  [ğŸ“ EgyÃ©b]           â”‚
â”‚                                                                             â”‚
â”‚  FeltÃ¶ltÃ¶tt: garancialevel_kovacs.pdf, foto_1.jpg, foto_2.jpg               â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  ğŸ†• BEVIZSGÃLÃSI DÃJ (ADR-013):                                             â”‚
â”‚  [Ha GaranciÃ¡lis tÃ­pus:]                                                    â”‚
â”‚  BevizsgÃ¡lÃ¡si dÃ­j: [ 0 ] Ft                                                 â”‚
â”‚  âš ï¸ GaranciÃ¡lis gÃ©pnÃ©l Ã¡ltalÃ¡ban 0 Ft a bevizsgÃ¡lÃ¡si dÃ­j                   â”‚
â”‚                                                                             â”‚
â”‚  [ ] MÃ©gis felszÃ¡mÃ­tom (indoklÃ¡s kÃ¶telezÅ‘)                                  â”‚
â”‚      IndoklÃ¡s: [________________________________]                           â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  ğŸ†• BELSÅ MEGJEGYZÃ‰S (csak kollÃ©gÃ¡knak):                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Rossz Ã¼zemanyagot tÃ¶ltÃ¶tt az Ã¼gyfÃ©l!                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  [ ] Bolti kollÃ©gÃ¡k is lÃ¡ssÃ¡k                                               â”‚
â”‚                                                                             â”‚
â”‚                              [MENTÃ‰S] [MÃ‰GSE]                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## AdatbÃ¡zis Indexek

```sql
-- Munkalap keresÃ©s
CREATE INDEX idx_munkalap_statusz ON MUNKALAP(statusz);
CREATE INDEX idx_munkalap_datum ON MUNKALAP(felvetel_datum);
CREATE INDEX idx_munkalap_ugyfÃ©l ON MUNKALAP(ugyfÃ©l_id);
CREATE INDEX idx_munkalap_intake_type ON MUNKALAP(intake_type);

-- Szerviz tartozÃ©k keresÃ©s
CREATE INDEX idx_szerviz_tartozek_munkalap ON SZERVIZ_TARTOZEK(munkalap_id);

-- CsatolmÃ¡ny keresÃ©s
CREATE INDEX idx_csatolmany_munkalap ON MUNKALAP_CSATOLMANY(munkalap_id);
CREATE INDEX idx_csatolmany_tipus ON MUNKALAP_CSATOLMANY(tipus);

-- TÃ©tel keresÃ©s
CREATE INDEX idx_tetel_munkalap ON MUNKALAP_TETEL(munkalap_id);
CREATE INDEX idx_tetel_cikk ON MUNKALAP_TETEL(cikkszam);

-- ÃrajÃ¡nlat keresÃ©s
CREATE INDEX idx_arajanalt_munkalap ON ARAJANALT(munkalap_id);
CREATE INDEX idx_arajanalt_statusz ON ARAJANALT(statusz);
```

---

## JelmagyarÃ¡zat

| JelÃ¶lÃ©s | JelentÃ©s |
|---------|----------|
| ğŸ¢ | Multi-tenant mezÅ‘ |
| ğŸ†• | Ãšj mezÅ‘/entitÃ¡s (Fit-Gap) |
| PK | Primary Key |
| FK | Foreign Key |
| ENUM | FelsorolÃ¡s tÃ­pus |
| 1:N | Egy-a-tÃ¶bbhÃ¶z kapcsolat |
| N:1 | TÃ¶bb-az-egyhez kapcsolat |

---

## VÃ¡ltozÃ¡snaplÃ³

| VerziÃ³ | DÃ¡tum | VÃ¡ltozÃ¡s |
|--------|-------|----------|
| v1.0 | 2024-11 | Eredeti verziÃ³ |
| v2.0 | 2024-12 | Multi-tenant, garanciÃ¡lis entitÃ¡sok |
| v3.0 | 2025-12-11 | intake_type, tartozÃ©k checklist, csatolmÃ¡nyok, belsÅ‘ megjegyzÃ©sek, ADR-013 bevizsgÃ¡lÃ¡si dÃ­j |

---

## KapcsolÃ³dÃ³ Dokumentumok

| Dokumentum | LeÃ­rÃ¡s |
|------------|--------|
| [04-szerviz-folyamat.md](04-szerviz-folyamat.md) | Szerviz folyamatÃ¡bra |
| [04-szerviz-munkalap.md](04-szerviz-munkalap.md) | Munkalap Ã©letciklus |
| [08-garancialis-javitas-2025-12-11.md](08-garancialis-javitas-2025-12-11.md) | GaranciÃ¡lis javÃ­tÃ¡s (frissÃ­tett) |
| [ADR-013-fit-gap-dontesek.md](../../architecture/ADR-013-fit-gap-dontesek.md) | BevizsgÃ¡lÃ¡si dÃ­j dÃ¶ntÃ©s |
