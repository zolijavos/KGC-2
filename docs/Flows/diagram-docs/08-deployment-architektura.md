# KGC ERP - Deployment ArchitektÃºra

## Diagram InformÃ¡ciÃ³k

| TulajdonsÃ¡g | Ã‰rtÃ©k |
|-------------|-------|
| **FÃ¡jlnÃ©v** | 8-deployment-architektura.excalidraw |
| **TÃ­pus** | ArchitektÃºra diagram |
| **KategÃ³ria** | 8. Ãšj KÃ¶vetelmÃ©nyek |
| **Modul** | InfrastruktÃºra |
| **VerziÃ³** | KGC ERP v2 |
| **ADR** | ADR-002 BÅ‘vÃ­tÃ©s |
| **ForrÃ¡s** | TalÃ¡lkozÃ³: "FelhÅ‘, de hibrid megoldÃ¡ssal... mi van, ha nincs internet?" |

---

## ÃttekintÃ©s

A deployment architektÃºra hÃ¡rom fÅ‘ opciÃ³t vizsgÃ¡l:
1. **Cloud Only** - TisztÃ¡n felhÅ‘ alapÃº
2. **Hibrid** - FelhÅ‘ + offline PWA (AJÃNLOTT)
3. **On-Premise** - SajÃ¡t szerveren futtatva

---

## Deployment OpciÃ³k Ã–sszehasonlÃ­tÃ¡sa

| Szempont | â˜ï¸ Cloud Only | ğŸ”„ Hibrid | ğŸ¢ On-Premise |
|----------|--------------|----------|---------------|
| **Internet fÃ¼ggÅ‘sÃ©g** | âŒ Teljes | âœ… RÃ©szleges | âœ… Nincs |
| **KarbantartÃ¡s** | âœ… Automatikus | âœ… Automatikus | âŒ ManuÃ¡lis |
| **KÃ¶ltsÃ©g modell** | Havi SaaS | Havi SaaS | Egyszeri + Ã©ves |
| **SkÃ¡lÃ¡zhatÃ³sÃ¡g** | âœ… KorlÃ¡tlan | âœ… KorlÃ¡tlan | âŒ Hardver fÃ¼ggÅ‘ |
| **Adat lokÃ¡ciÃ³** | FelhÅ‘ben | FelhÅ‘ + lokÃ¡lis | Helyi |
| **FrissÃ­tÃ©sek** | âœ… Automatikus | âœ… Automatikus | âŒ ManuÃ¡lis |
| **KomplexitÃ¡s** | Alacsony | KÃ¶zepes | Magas |

---

## 1. Cloud Only (TisztÃ¡n FelhÅ‘)

### ArchitektÃºra

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FELHASZNÃLÃ“                              â”‚
â”‚                      (BÃ¶ngÃ©szÅ‘ / Mobil)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ HTTPS
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    CLOUDFLARE CDN   â”‚
                    â”‚   (DDoS vÃ©delem)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   LOAD BALANCER     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                â–¼                â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  App Pod 1  â”‚  â”‚  App Pod 2  â”‚  â”‚  App Pod N  â”‚
      â”‚  (Node.js)  â”‚  â”‚  (Node.js)  â”‚  â”‚  (Node.js)  â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â”‚                â”‚                â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼               â–¼               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ PostgreSQL  â”‚  â”‚    Redis    â”‚  â”‚     S3      â”‚
      â”‚  (RDS/RLS)  â”‚  â”‚   (Cache)   â”‚  â”‚  (FÃ¡jlok)   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ElÅ‘nyÃ¶k

- âœ… Nincs szerverkarbantartÃ¡s
- âœ… Automatikus backup
- âœ… Automatikus skÃ¡lÃ¡zÃ¡s
- âœ… 99.9% SLA garancia
- âœ… GlobÃ¡lis elÃ©rhetÅ‘sÃ©g

### HÃ¡trÃ¡nyok

- âŒ **Internet kiesÃ©s = leÃ¡llÃ¡s**
- âŒ Havi kÃ¶ltsÃ©g (nem egyszeri)
- âŒ Adat harmadik fÃ©lnÃ©l

---

## 2. Hibrid MegoldÃ¡s (AJÃNLOTT)

### ArchitektÃºra

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FELHASZNÃLÃ“ ESZKÃ–Z                              â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                           PWA ALKALMAZÃS                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚  React Frontend â”‚    â”‚ Service Worker  â”‚    â”‚   IndexedDB     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚â—€â”€â”€â–¶â”‚  (Offline mgmt) â”‚â—€â”€â”€â–¶â”‚  (LokÃ¡lis DB)   â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                      â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                      â”‚
               â”‚ ONLINE               â”‚ BACKGROUND SYNC
               â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FELHÅ INFRASTRUKTÃšRA                            â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    REST API     â”‚    â”‚   PostgreSQL    â”‚    â”‚   WebSocket     â”‚         â”‚
â”‚  â”‚    (Backend)    â”‚â—€â”€â”€â–¶â”‚    (FÅ‘ DB)      â”‚â—€â”€â”€â–¶â”‚  (Real-time)    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Offline MÅ±kÃ¶dÃ©s RÃ©szletei

#### Mit lehet offline csinÃ¡lni?

| FunkciÃ³ | Offline | MegjegyzÃ©s |
|---------|---------|------------|
| BÃ©rlÃ©s indÃ­tÃ¡s | âœ… | Queue-ba kerÃ¼l |
| BÃ©rlÃ©s visszavÃ©tel | âœ… | Queue-ba kerÃ¼l |
| KÃ©szlet lekÃ©rdezÃ©s | âœ… | Cache-elt adat |
| ÃœgyfÃ©l keresÃ©s | âœ… | Cache-elt adat |
| BevÃ©telezÃ©s | âœ… | Queue-ba kerÃ¼l |
| PÃ©nztÃ¡r mÅ±veletek | âœ… | LokÃ¡lisan tÃ¡rolva |
| Szerviz munkalap | âœ… | Queue-ba kerÃ¼l |
| Ãšj Ã¼gyfÃ©l felvÃ©tel | âœ… | Queue-ba kerÃ¼l |

#### Mit NEM lehet offline?

| FunkciÃ³ | MiÃ©rt nem? |
|---------|------------|
| E-szÃ¡mla fogadÃ¡s | Email szerver kell |
| Online fizetÃ©s | Banki API kell |
| NAV adatszolgÃ¡ltatÃ¡s | NAV API kell |
| ValÃ³s idejÅ± kÃ©szlet mÃ¡s boltban | KÃ¶zponti DB kell |
| KÃ¶zponti riportok | AggregÃ¡lt adatok kellenek |

### SzinkronizÃ¡ciÃ³s StratÃ©gia

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SZINKRONIZÃCIÃ“S FOLYAMAT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  1. OFFLINE MÅ°VELET                                                         â”‚
â”‚     â””â”€ FelhasznÃ¡lÃ³ mÅ±veletet vÃ©gez (pl. bÃ©rlÃ©s)                             â”‚
â”‚     â””â”€ Adat â†’ IndexedDB + Sync Queue                                        â”‚
â”‚                                                                              â”‚
â”‚  2. HÃTTÃ‰R SYNC (ha van internet)                                           â”‚
â”‚     â””â”€ Service Worker figyeli a hÃ¡lÃ³zatot                                   â”‚
â”‚     â””â”€ Queue elemek feldolgozÃ¡sa sorrendben                                 â”‚
â”‚     â””â”€ API hÃ­vÃ¡s a szerverhez                                               â”‚
â”‚                                                                              â”‚
â”‚  3. CONFLICT RESOLUTION                                                     â”‚
â”‚     â””â”€ Timestamp alapÃº: utolsÃ³ mÃ³dosÃ­tÃ¡s nyer                               â”‚
â”‚     â””â”€ Kritikus mezÅ‘k: manuÃ¡lis feloldÃ¡s                                    â”‚
â”‚     â””â”€ Audit log minden vÃ¡ltozÃ¡srÃ³l                                         â”‚
â”‚                                                                              â”‚
â”‚  4. CACHE FRISSÃTÃ‰S                                                         â”‚
â”‚     â””â”€ SzerverrÅ‘l friss tÃ¶rzsadatok                                         â”‚
â”‚     â””â”€ KÃ©szlet adatok frissÃ­tÃ©se                                            â”‚
â”‚     â””â”€ ÃœgyfÃ©l adatok szinkronizÃ¡lÃ¡sa                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Offline IdÅ‘korlÃ¡t

| BeÃ¡llÃ­tÃ¡s | AlapÃ©rtelmezett | LeÃ­rÃ¡s |
|-----------|-----------------|--------|
| `maxOfflineDays` | 7 nap | Max offline mÅ±kÃ¶dÃ©s |
| `cacheSize` | 500 MB | LokÃ¡lis tÃ¡rolÃ³ limit |
| `syncInterval` | 30 sec | Sync prÃ³bÃ¡lkozÃ¡s |
| `conflictStrategy` | `lastWrite` | Conflict feloldÃ¡s |

---

## 3. On-Premise (SajÃ¡t Szerver)

### Mikor szÃ¼ksÃ©ges?

- Franchise partner kifejezetten kÃ©ri
- SpeciÃ¡lis biztonsÃ¡gi kÃ¶vetelmÃ©ny
- VidÃ©ki telephely gyenge internettel
- SzabÃ¡lyozÃ¡si megfelelÅ‘sÃ©g (pl. egÃ©szsÃ©gÃ¼gy)

### ArchitektÃºra

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        HELYI HÃLÃ“ZAT                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Kliens 1  â”‚     â”‚   Kliens 2  â”‚     â”‚   Kliens N  â”‚       â”‚
â”‚  â”‚  (BÃ¶ngÃ©szÅ‘) â”‚     â”‚  (BÃ¶ngÃ©szÅ‘) â”‚     â”‚  (BÃ¶ngÃ©szÅ‘) â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚   HELYI SZERVER â”‚                         â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                         â”‚
â”‚                    â”‚  â”‚  Node.js  â”‚  â”‚                         â”‚
â”‚                    â”‚  â”‚  Backend  â”‚  â”‚                         â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚                         â”‚
â”‚                    â”‚        â”‚        â”‚                         â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”‚                         â”‚
â”‚                    â”‚  â”‚PostgreSQL â”‚  â”‚                         â”‚
â”‚                    â”‚  â”‚   LokÃ¡l   â”‚  â”‚                         â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â”‚ (OpcionÃ¡lis VPN)                  â”‚
â”‚                             â–¼                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚  KÃ–ZPONTI SYNC  â”‚                         â”‚
â”‚                    â”‚  (StatisztikÃ¡k) â”‚                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### On-Premise KÃ¶vetelmÃ©nyek

| Komponens | Minimum | AjÃ¡nlott |
|-----------|---------|----------|
| CPU | 4 core | 8 core |
| RAM | 8 GB | 16 GB |
| Storage | 100 GB SSD | 500 GB SSD |
| OS | Ubuntu 22.04 | Ubuntu 22.04 |
| Backup | Heti | Napi |

---

## TechnolÃ³gia Stack

### Frontend

| TechnolÃ³gia | VerziÃ³ | CÃ©l |
|-------------|--------|-----|
| React | 18.x | UI framework |
| Next.js | 14.x | SSR + routing |
| TypeScript | 5.x | TÃ­pusbiztonsÃ¡g |
| TailwindCSS | 3.x | Styling |
| Dexie.js | 4.x | IndexedDB wrapper |
| Workbox | 7.x | Service Worker |

### Backend

| TechnolÃ³gia | VerziÃ³ | CÃ©l |
|-------------|--------|-----|
| Node.js | 20 LTS | Runtime |
| NestJS | 10.x | Backend framework |
| PostgreSQL | 16.x | AdatbÃ¡zis |
| Redis | 7.x | Cache + Queue |
| Prisma | 5.x | ORM |

### InfrastruktÃºra

| TechnolÃ³gia | CÃ©l |
|-------------|-----|
| Docker | KontÃ©nerizÃ¡ciÃ³ |
| Kubernetes | OrchestrÃ¡ciÃ³ (prod) |
| GitHub Actions | CI/CD |
| Cloudflare | CDN + DDoS |
| AWS S3 | FÃ¡jl tÃ¡rolÃ¡s |

---

## ADR-002 BÅ‘vÃ­tÃ©s: Offline StratÃ©gia

### SzinkronizÃ¡landÃ³ EntitÃ¡sok

| EntitÃ¡s | Sync irÃ¡ny | PrioritÃ¡s | Cache mÃ©ret |
|---------|------------|-----------|-------------|
| PARTNER | KÃ©tirÃ¡nyÃº | Magas | ~50 MB |
| CIKK | Server â†’ Client | Magas | ~100 MB |
| BÃ‰RLÃ‰S | KÃ©tirÃ¡nyÃº | Kritikus | ~20 MB |
| MUNKALAP | KÃ©tirÃ¡nyÃº | Magas | ~30 MB |
| KÃ‰SZLET | Server â†’ Client | KÃ¶zepes | ~10 MB |

### Conflict Resolution

```typescript
interface SyncConflict {
  entityType: string;
  entityId: number;
  localVersion: {
    data: any;
    timestamp: Date;
    userId: number;
  };
  serverVersion: {
    data: any;
    timestamp: Date;
    userId: number;
  };
}

// AlapÃ©rtelmezett: Last Write Wins
function resolveConflict(conflict: SyncConflict): 'local' | 'server' {
  if (conflict.localVersion.timestamp > conflict.serverVersion.timestamp) {
    return 'local';
  }
  return 'server';
}
```

### Offline IndikÃ¡tor UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸ¢ Online                     â”‚  ğŸŸ¡ SzinkronizÃ¡lÃ¡s...           â”‚
â”‚  Minden adat naprakÃ©sz         â”‚  3 mÅ±velet vÃ¡rakozik            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŸ  Offline                    â”‚  ğŸ”´ Offline (tÃºl rÃ©gi)          â”‚
â”‚  LokÃ¡lis mÃ³dban mÅ±kÃ¶dik        â”‚  7+ napja offline - kockÃ¡zatos  â”‚
â”‚  12 mÅ±velet vÃ¡rakozik          â”‚  KÃ©rem csatlakozzon!            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DÃ¶ntÃ©si Fa

```
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ Van megbÃ­zhatÃ³      â”‚
                         â”‚ internet (99%+)?    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                               â”‚         â”‚
                             IGEN       NEM
                               â”‚         â”‚
                               â–¼         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Adat felhÅ‘benâ”‚ â”‚ On-Premise   â”‚
                    â”‚ elfogadhatÃ³? â”‚ â”‚ szÃ¼ksÃ©ges    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                      â”‚         â”‚
                    IGEN       NEM
                      â”‚         â”‚
                      â–¼         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  HIBRID    â”‚ â”‚ On-Premise â”‚
              â”‚ (AjÃ¡nlott) â”‚ â”‚            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## AjÃ¡nlott DÃ¶ntÃ©s

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      âœ… AJÃNLOTT: HIBRID MEGOLDÃS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  AlapÃ©rtelmezett mÅ±kÃ¶dÃ©s:                                                   â”‚
â”‚  â€¢ FelhÅ‘ alapÃº SaaS (AWS/GCP)                                               â”‚
â”‚  â€¢ PWA + Service Worker offline tÃ¡mogatÃ¡ssal                                â”‚
â”‚  â€¢ IndexedDB lokÃ¡lis cache                                                  â”‚
â”‚  â€¢ Automatikus hÃ¡ttÃ©r szinkronizÃ¡ciÃ³                                        â”‚
â”‚                                                                              â”‚
â”‚  OpcionÃ¡lis kiegÃ©szÃ­tÃ©s:                                                    â”‚
â”‚  â€¢ On-premise deployment franchise partnereknek                             â”‚
â”‚  â€¢ KÃ¼lÃ¶n licenc dÃ­j                                                         â”‚
â”‚  â€¢ KÃ¶zponttal valÃ³ szinkronizÃ¡ciÃ³ (statisztikÃ¡k)                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## KapcsolÃ³dÃ³ Dokumentumok

- [05-technologiai-dontesek.md](../analysis/05-technologiai-dontesek.md) - RÃ©szletes tech dÃ¶ntÃ©sek
- [07-erd-uj-entitasok.md](07-erd-uj-entitasok.md) - offline_sync mezÅ‘
- [08-holding-struktura.md](08-holding-struktura.md) - Multi-tenant

---

## JelmagyarÃ¡zat

| SzimbÃ³lum | JelentÃ©s |
|-----------|----------|
| â˜ï¸ | FelhÅ‘ (Cloud) |
| ğŸ”„ | Hibrid |
| ğŸ¢ | On-Premise |
| ğŸ“´ | Offline mÃ³d |
| ğŸŸ¢ | Online / OK |
| ğŸŸ¡ | SzinkronizÃ¡lÃ¡s |
| ğŸŸ  | Offline |
| ğŸ”´ | Kritikus |
