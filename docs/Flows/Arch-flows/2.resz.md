# KGC ERP - 2. Rész: Értékesítés

## Áttekintés

Ez a dokumentum a KGC ERP értékesítési moduljának folyamatait írja le a videó transcript alapján. Az értékesítés modul kezeli a termékek (cikkek) felvételét, bevételezését, készletkezelését és értékesítését.

---

## Fő Folyamatok

### 1. Új Cikk (Termék) Felvétele

**Kiváltó esemény:** Új termék érkezik, ami még nincs a rendszerben

**Lépések:**
1. Cikkszám keresés/felvétel menüpont
2. "Új" jelölő bekapcsolása
3. Cikkszám megadása (számláról)
4. Cikkcsoport kiválasztása
5. Beszállító megadása (ha ismert)
6. Tárhely/raktárkód rögzítése (alkatrészeknél)
7. Főkönyvi szám beállítása
8. Vonalkód beolvasása (ha van)
9. ÁFA beállítás (normál/adómentes/fordított)
10. Rögzítés (felhasználó kódjával)

**Cikkcsoportok:**
- Alkatrész (általános) - *aktívan használt*
- Bérgép
- Bérszerszám
- Díjak
- Egyéb
- Beszállító-specifikus (FGS, Makita, Lukas, stb.)
- Mérőműszer
- ~~Benzinmotos alkatrész~~ - *nem használt*
- ~~Elektromos alkatrész~~ - *nem használt*

**ÁFA típusok:**
- Normál (27%)
- Adómentes (pl. kaució)
- Fordított adózás (pl. géproncs, vas)

---

### 2. Bevételezés (Számlára)

**Kiváltó esemény:** Beszállítói számla érkezik

**Lépések:**
1. Bevételezés → Nyilatkozási számla
2. Számla számának megadása
3. Dátumok ellenőrzése
4. Fizetési mód beállítása (készpénz/átutalás)
5. Fuvarköltség megadása (ha van)
6. Számla bruttó végösszeg megadása
7. Rendszer kiszámolja a nettót
8. Cikkszám megadása (Enter)
9. Mennyiség megadása
10. Beszerzési darabár megadása
11. "Rendszeradatokkal" kalkuláció
12. Ellenőrzés: alsó összeg = számla összeg
13. Rögzítés
14. Nyomtatás (opcionális)

**Euró számlák:**
- Pénznem átállítása EUR-ra
- Bank által átszámolt forint összeg megadása
- Rendszer kiszámolja a forint értéket

**Ellenőrzés:**
- A bevételezés összegének egyeznie kell a számla összegével
- Ha stimmel → rögzíthető

---

### 3. Készlet Átcsoportosítás (Nagy Céges Cikkszámra)

**Kiváltó esemény:** Nagy megrendelő (FGS, MÁV stb.) saját cikkszámot használ

**Probléma:** A megrendelések csak a vevő saját cikkszámain értékesíthetők

**Lépések:**
1. Bizonylatok → Mínusz (készlet csökkentés)
2. Eredeti cikkszám megadása
3. Mennyiség megadása
4. Rögzítés → készlet 0-ra csökken
5. Bizonylatok → Plusz (készlet növelés)
6. Vevő cikkszáma megadása (pl. FGS: 43 10 429)
7. Ugyanaz a mennyiség
8. Rögzítés

**Eredmény:** Termék új cikkszám alatt látható, eredeti 0 készlettel

**Megjegyzés:** Lehetne egyből a vevő cikkszámára felvenni, de így jobban lekövethető

---

### 4. Értékesítés (Eladás)

**Kiváltó esemény:** Vevő terméket szeretne vásárolni

**Lépések:**
1. Partner kiválasztása
2. Cikkszám megadása (vagy vonalkód olvasás)
3. Mennyiség megadása
4. Fizetési mód (készpénz/kártya/átutalás)
5. Számla kiállítása

**Megjegyzés:** Ugyanaz a folyamat, mint a bérgépeknél

---

### 5. Cikk Beállítások (Engedélyezések)

**Fontos pipák a cikk adatlapon:**
- **Eladás** - engedélyezi az értékesítési bizonylatokon
- **Alkatrész** - alkatrészként kezelendő

**Figyelem:** Ha nincs bepipálva, a cikkszám nem ismerhető fel a bizonylatokon!

---

## Vonalkód Projekt

**Cél:** 2024 leltárra minden terméknek legyen vonalkódja

**Kezdés:** 2024 január

**Megoldások:**
1. Saját vonalkód generálása (van vonalkód nyomtató)
2. Gyári vonalkód beolvasása (ha van a terméken)

**Probléma korábban:**
- Sok termék saját elnevezéssel lett bevételezve
- Elírt kódok → keveredés
- Hiány és többlet problémák
- Számlán más szerepel, mint amit elvittek

---

## Entitások

### Cikk (Termék)
| Mező | Típus | Leírás |
|------|-------|--------|
| cikkszam | VARCHAR | Egyedi azonosító |
| megnevezes | VARCHAR | Termék neve |
| cikkcsoport | ENUM | Kategória |
| beszallito | VARCHAR | Beszállító neve |
| tarhely | VARCHAR | Raktár kód (alkatrészeknél) |
| fokonyi_szam | VARCHAR | Könyvelési szám |
| vonalkod | VARCHAR | EAN/belső vonalkód |
| afa_tipus | ENUM | normál/adómentes/fordított |
| beszerzesi_ar | DECIMAL | Utolsó beszerzési ár |
| eladasi_ar | DECIMAL | Aktuális eladási ár |
| keszlet | INT | Raktárkészlet |
| eladas_engedelyezve | BOOLEAN | Eladható-e |
| alkatresz | BOOLEAN | Alkatrész-e |

### Bevételezés
| Mező | Típus | Leírás |
|------|-------|--------|
| bizonylat_szam | VARCHAR | Belső azonosító |
| szamla_szam | VARCHAR | Beszállítói számla |
| datum | DATE | Bevételezés dátuma |
| fizetes_mod | ENUM | készpénz/átutalás |
| penznem | ENUM | HUF/EUR |
| brutto_osszeg | DECIMAL | Számla végösszeg |
| netto_osszeg | DECIMAL | Kalkulált nettó |
| fuvarkoltseg | DECIMAL | Szállítási költség |

### Bevételezés Tétel
| Mező | Típus | Leírás |
|------|-------|--------|
| cikkszam | VARCHAR | FK → Cikk |
| mennyiseg | INT | Bevételezett darab |
| egysegar | DECIMAL | Beszerzési darabár |

---

## Döntési Pontok

1. **Új cikk vagy meglévő?**
   - Új → Cikk felvétel folyamat
   - Meglévő → Bevételezés

2. **ÁFA típus?**
   - Normál (27%)
   - Adómentes
   - Fordított adózás

3. **Pénznem?**
   - HUF → normál bevételezés
   - EUR → átváltás szükséges

4. **Nagy céges cikkszám szükséges?**
   - Igen → Készlet átcsoportosítás
   - Nem → Közvetlen értékesítés

5. **Van vonalkód a terméken?**
   - Igen → Beolvasás
   - Nem → Generálás vagy kézi bevitel

---

## Problémák és Megoldások

| Probléma | Megoldás |
|----------|----------|
| Elírt cikkszámok | Vonalkód bevezetése |
| Készlet eltérés | Szigorú bevételezési kontroll |
| Nagy céges cikkszám követelmény | Átcsoportosítás funkció |
| Nem felismert cikkszám | Eladás/Alkatrész pipa ellenőrzése |

---

## Kapcsolódó Diagramok

- [2-ertekesites-folyamat.excalidraw](diagrams/2-ertekesites-folyamat.excalidraw) - Fő értékesítési folyamat
- [2-ertekesites-cikk-felvitel.excalidraw](diagrams/2-ertekesites-cikk-felvitel.excalidraw) - Cikk felvétel részletei
- [2-ertekesites-dfd.excalidraw](diagrams/2-ertekesites-dfd.excalidraw) - Adatfolyam diagram
- [2-ertekesites-erd.excalidraw](diagrams/2-ertekesites-erd.excalidraw) - Entitás kapcsolatok
- [2-ertekesites-keszlet.excalidraw](diagrams/2-ertekesites-keszlet.excalidraw) - Készletmozgás diagram

---

## Transcript Részlet

> "Tehát ezek itt a cikkszámok. Itt van az összes termék, ami valaha átment a cégen. Ha rendelek egy új terméket, ami még nincsen a rendszerben, akkor az első lépés, hogy felveszem..."

> "Januárban kezdtük el a vonalkódos kód rögzítését, és nagyon szeretnénk az idei leltárra megcsinálni azt, hogy minden termékünknek legyen vagy saját vonalkódja..."

---

*Dokumentum verzió: 1.0*
*Készült: KGC ERP Workflow Dokumentáció*
