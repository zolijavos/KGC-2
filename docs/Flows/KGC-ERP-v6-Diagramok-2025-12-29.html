<!DOCTYPE html>
<html lang="hu" x-data="appData()" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KGC ERP v6.0 - Inventory Modul Diagramok (2025-12-29)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script>tailwind.config = { darkMode: 'class' }</script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .dark { background-color: rgb(17 24 39); color: rgb(243 244 246); }
        .sticky-sidebar { position: sticky; top: 1.5rem; max-height: calc(100vh - 3rem); overflow-y: auto; }
        .diagram-container { background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 1.5rem; margin: 1.5rem 0; }
        .dark .diagram-container { background: rgb(31 41 55); border-color: rgb(55 65 81); }
        .diagram-wrapper { background: #f9fafb; border-radius: 0.5rem; padding: 1rem; overflow: auto; }
        .dark .diagram-wrapper { background: #2d3748; }
        .diagram-wrapper svg { display: block; margin: 0 auto; max-width: 100%; height: auto; }
        .dark .diagram-wrapper svg { filter: invert(0.9) hue-rotate(180deg); }
        .explanation-box { background: linear-gradient(to right, #eff6ff, #dbeafe); border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 8px; }
        .dark .explanation-box { background: linear-gradient(to right, rgb(30 58 138 / 0.5), rgb(29 78 216 / 0.5)); }
        @media print { .no-print { display: none !important; } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <header class="bg-gradient-to-r from-green-600 via-green-700 to-green-800 text-white shadow-lg no-print">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col lg:flex-row justify-between items-center">
                <div class="text-center lg:text-left mb-4 lg:mb-0">
                    <h1 class="text-3xl font-bold">KGC ERP v6.0 - Inventory / Rakt√°rkezel√©s Modul</h1>
                    <p class="mt-1 text-green-100">Multi-Warehouse | Serial Number Tracking | State Machine | v1.0 + v2.0 Feature</p>
                    <p class="text-sm mt-2">
                        <span class="bg-white/20 px-2 py-1 rounded mr-2">üìä 5 diagram</span>
                        <span class="bg-green-500 px-2 py-1 rounded mr-2">üÜï 5 √∫j</span>
                        <span class="bg-purple-500 px-2 py-1 rounded">üìÖ 2025-12-29</span>
                    </p>
                </div>
                <div class="flex space-x-3">
                    <button @click="darkMode = !darkMode" class="p-3 bg-white/20 hover:bg-white/30 rounded-lg transition-colors" title="S√∂t√©t/Vil√°gos m√≥d">
                        <span x-text="darkMode ? '‚òÄÔ∏è' : 'üåô'"></span>
                    </button>
                    <button @click="exportNotes()" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors">üì• CSV Export</button>
                    <button @click="$refs.fileInput.click()" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors">üì§ CSV Import</button>
                    <input type="file" x-ref="fileInput" @change="importNotes($event)" accept=".csv" class="hidden">
                </div>
            </div>
        </div>
    </header>

    <!-- Summary Banner -->
    <div class="bg-gradient-to-r from-green-100 to-blue-100 dark:from-green-900/30 dark:to-blue-900/30 border-b border-green-200 dark:border-green-800 no-print">
        <div class="container mx-auto px-4 py-4">
            <h2 class="text-lg font-bold text-green-800 dark:text-green-200 mb-2">üìã Inventory Modul √Åttekint√©s</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                <div class="bg-white/50 dark:bg-gray-800/50 p-3 rounded-lg">
                    <h3 class="font-bold text-green-600">üéØ Core Funkci√≥k (v1.0)</h3>
                    <ul class="mt-1 text-gray-700 dark:text-gray-300">
                        <li>‚Ä¢ K√∂zpontos√≠tott CIKK entit√°s</li>
                        <li>‚Ä¢ Multi-Warehouse t√°mogat√°s (2-5 rakt√°r)</li>
                        <li>‚Ä¢ Serial Number tracking (b√©rg√©pek)</li>
                        <li>‚Ä¢ B√©rg√©p st√°tusz workflow (bent/kint/szerviz)</li>
                        <li>‚Ä¢ Real-time k√©szletfriss√≠t√©s</li>
                    </ul>
                </div>
                <div class="bg-white/50 dark:bg-gray-800/50 p-3 rounded-lg">
                    <h3 class="font-bold text-blue-600">üöÄ v2.0 Feature (Multi-Location)</h3>
                    <ul class="mt-1 text-gray-700 dark:text-gray-300">
                        <li>‚Ä¢ √öj: CIKK_LOCATION t√°bla</li>
                        <li>‚Ä¢ Picking javaslat algoritmus</li>
                        <li>‚Ä¢ Kiad√°si priorit√°s (p√∂rg≈ës k√©szlet)</li>
                        <li>‚Ä¢ Multi-lok√°ci√≥s k√©szletkezel√©s</li>
                        <li>‚Ä¢ Polc v√°laszt√≥ UI</li>
                    </ul>
                </div>
                <div class="bg-white/50 dark:bg-gray-800/50 p-3 rounded-lg">
                    <h3 class="font-bold text-purple-600">üîó Integr√°ci√≥k</h3>
                    <ul class="mt-1 text-gray-700 dark:text-gray-300">
                        <li>‚Ä¢ B√©rl√©s modul (checkBergepAvailability)</li>
                        <li>‚Ä¢ Szerviz modul (useServicePart)</li>
                        <li>‚Ä¢ √ârt√©kes√≠t√©s modul (decreaseStock)</li>
                        <li>‚Ä¢ P√©nz√ºgy modul (getStockValuation)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-12 gap-6">
            <aside class="col-span-12 lg:col-span-3 no-print">
                <div class="sticky-sidebar bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg">
                    <h2 class="text-lg font-bold mb-4 flex items-center">
                        <span class="mr-2">üìã</span> Diagramok
                    </h2>
                    <div class="space-y-2">

                        <button @click="activeTab = 'inv-1'"
                            :class="activeTab === 'inv-1' ? 'bg-green-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'"
                            class="w-full text-left px-3 py-2 rounded-lg text-sm transition-colors border-2 border-green-400 bg-green-50 dark:bg-green-900/30">
                            1. B√©rl√©si Folyamat
                            <span class="ml-1 text-green-600 dark:text-green-400">üÜï</span>
                        </button>

                        <button @click="activeTab = 'inv-2'"
                            :class="activeTab === 'inv-2' ? 'bg-green-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'"
                            class="w-full text-left px-3 py-2 rounded-lg text-sm transition-colors border-2 border-green-400 bg-green-50 dark:bg-green-900/30">
                            2. Inventory API - checkBergepAvailability()
                            <span class="ml-1 text-green-600 dark:text-green-400">üÜï</span>
                        </button>

                        <button @click="activeTab = 'inv-3'"
                            :class="activeTab === 'inv-3' ? 'bg-green-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'"
                            class="w-full text-left px-3 py-2 rounded-lg text-sm transition-colors border-2 border-green-400 bg-green-50 dark:bg-green-900/30">
                            3. √úgyf√©l B√©rl√©si √öt
                            <span class="ml-1 text-green-600 dark:text-green-400">üÜï</span>
                        </button>

                        <button @click="activeTab = 'inv-4'"
                            :class="activeTab === 'inv-4' ? 'bg-green-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'"
                            class="w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ">
                            4. Webhook Szinkroniz√°ci√≥
                            
                        </button>

                        <button @click="activeTab = 'inv-5'"
                            :class="activeTab === 'inv-5' ? 'bg-green-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'"
                            class="w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ">
                            5. B√©rg√©p St√°tusz √Åtmenetek
                            
                        </button>

                    </div>
                    <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-700">
                        <h3 class="text-sm font-bold mb-2">Jelmagyar√°zat:</h3>
                        <div class="space-y-1 text-xs">
                            <p><span class="inline-block w-3 h-3 bg-green-500 rounded mr-2"></span> üÜï √öj diagram</p>
                            <p><span class="inline-block w-3 h-3 bg-blue-500 rounded mr-2"></span> v1.0 alapfunkci√≥</p>
                            <p><span class="inline-block w-3 h-3 bg-orange-500 rounded mr-2"></span> v2.0 b≈ëv√≠t√©s</p>
                        </div>
                    </div>
                    <p class="mt-4 text-xs text-gray-500 dark:text-gray-400">üí° Megjegyz√©sek localStorage-ban ment≈ëdnek</p>
                </div>
            </aside>

            <main class="col-span-12 lg:col-span-9">
                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6">
                    <h3 class="font-bold text-blue-800 dark:text-blue-200 mb-2">üìñ Kapcsol√≥d√≥ Dokument√°ci√≥</h3>
                    <ul class="text-sm space-y-1">
                        <li>‚Ä¢ <a href="../ERP/Inventory/README.md" class="text-blue-600 hover:underline">Inventory Modul README</a> - Teljes √°ttekint√©s</li>
                        <li>‚Ä¢ <a href="../ERP/Inventory/INVENTORY-INTEGRATION-ARCHITECTURE.md" class="text-blue-600 hover:underline">Integration Architecture</a> - R√©szletes specifik√°ci√≥ (~25 oldal)</li>
                        <li>‚Ä¢ <a href="../ERP/Inventory/INVENTORY-FEATURE-MAPPING.md" class="text-blue-600 hover:underline">Feature Mapping</a> - v1.0 vs v2.0 k√ºl√∂nbs√©gek</li>
                        <li>‚Ä¢ <a href="../architecture/Feature-Multi-Location-Raktarkezeles-Architektura.md" class="text-blue-600 hover:underline">Multi-Location Feature</a> - v2.0 architekt√∫ra</li>
                    </ul>
                </div>


                <div x-show="activeTab === 'inv-1'" x-transition:enter.duration.300ms>
                    <div class="diagram-container" id="inv-01-business-process-berles">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-semibold">
                                B√©rl√©si Folyamat
                                <span class="ml-2 px-3 py-1 bg-green-500 text-white text-sm rounded-full font-bold animate-pulse">üÜï √öJ</span>
                            </h3>
                            <button @click="expanded['inv-01-business-process-berles'] = !expanded['inv-01-business-process-berles']"
                                    class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm transition-colors">
                                <span x-text="expanded['inv-01-business-process-berles'] ? '‚ûñ Bez√°r' : '‚ûï Megnyit'"></span>
                            </button>
                        </div>
                        <div class="explanation-box mb-3">
                            <p class="text-sm"><strong>üìã</strong> √úgyf√©l b√©rl√©si ig√©ny ‚Üí k√©szlet ellen≈ërz√©s ‚Üí j√≥v√°hagy√°s ‚Üí szerz≈ëd√©s ‚Üí kisz√°ll√≠t√°s (8 l√©p√©s, 2 d√∂nt√©s)</p>
                        </div>


                        <details class="mb-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg">
                            <summary class="px-4 py-2 cursor-pointer font-semibold text-orange-700 dark:text-orange-300 hover:bg-orange-100 dark:hover:bg-orange-900/40 rounded-lg">
                                üìù V√°ltoz√°sok (2 m√≥dos√≠t√°s) - Kattints a r√©szletek√©rt
                            </summary>
                            <div class="px-4 pb-3">
                                <table class="w-full mt-2 text-left border-collapse">
                                    <thead class="bg-orange-100 dark:bg-orange-900/40">
                                        <tr>
                                            <th class="px-2 py-1 text-sm">#</th>
                                            <th class="px-2 py-1 text-sm">Szekci√≥</th>
                                            <th class="px-2 py-1 text-sm">V√°ltoz√°s</th>
                                            <th class="px-2 py-1 text-sm">Forr√°s</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-orange-200 dark:divide-orange-800">

                                        <tr class="bg-orange-50 dark:bg-orange-900/20">
                                            <td class="px-2 py-1 text-sm">1</td>
                                            <td class="px-2 py-1 text-sm font-medium">v2.0</td>
                                            <td class="px-2 py-1 text-sm">Multi-Location picking javaslat algoritmus</td>
                                            <td class="px-2 py-1 text-sm text-blue-600 dark:text-blue-400">ADR-016</td>
                                        </tr>

                                        <tr class="">
                                            <td class="px-2 py-1 text-sm">2</td>
                                            <td class="px-2 py-1 text-sm font-medium">UI</td>
                                            <td class="px-2 py-1 text-sm">Picking lista gener√°l√°s (melyik polcr√≥l?)</td>
                                            <td class="px-2 py-1 text-sm text-blue-600 dark:text-blue-400">Feature</td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </details>

                        <div x-show="expanded['inv-01-business-process-berles']" x-collapse>
                            <div class="diagram-wrapper mb-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="140 -20 700 1520" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="140" y="-20" width="700" height="1520" fill="#ffffff"/>
<text x="420" y="40" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">B√©rl√©si Folyamat - Inventory v1.0</text>
<text x="420" y="64" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Basic Operation (egy location/cikk)</text>
<ellipse cx="400" cy="130" rx="60" ry="30" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="120" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">START</text>
<rect x="320" y="240" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="256" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">√úgyf√©l b√©rl√©si</text>
<text x="400" y="275.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ig√©ny</text>
<polygon points="400,400 470,450 400,500 330,450" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="416" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Van el√©rhet≈ë</text>
<text x="400" y="435.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">b√©rg√©p?</text>
<rect x="320" y="580" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="596" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">J√≥v√°hagy√°s</text>
<polygon points="400,740 470,790 400,840 330,790" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="756" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">J√≥v√°hagyva?</text>
<rect x="320" y="920" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="936" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Inventory API call</text>
<rect x="320" y="1080" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="1096" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Szerz≈ëd√©s</text>
<rect x="320" y="1240" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="1256" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Kisz√°ll√≠t√°s</text>
<ellipse cx="400" cy="1430" rx="60" ry="30" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="1420" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">END</text>
<path d="M 400 170 L 400 230" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 330 L 400 390" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 510 L 400 570" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 670 L 400 730" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 850 L 400 910" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 1010 L 400 1070" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 1170 L 400 1230" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 1330 L 400 1390" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="520" y="414" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">üìù v2.0 B≈ëv√≠t√©s:</text>
<text x="520" y="430.8" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">Multi-Location picking javaslat</text>
<text x="520" y="447.6" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="520" y="464.4" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">L√°sd: Feature-Multi-Location-</text>
<text x="520" y="481.2" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">Kiadas-Flowchart.excalidraw</text>
</svg></div>

                            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                                <label class="block text-sm font-medium mb-2">üìù Megjegyz√©sek:</label>
                                <textarea
                                    x-model="notes['inv-01-business-process-berles']"
                                    @input="saveNotes()"
                                    rows="3"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500"
                                    placeholder="Add meg a megjegyz√©seidet err≈ël a diagramr√≥l..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="activeTab === 'inv-2'" x-transition:enter.duration.300ms>
                    <div class="diagram-container" id="inv-02-algorithm-api">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-semibold">
                                Inventory API - checkBergepAvailability()
                                <span class="ml-2 px-3 py-1 bg-green-500 text-white text-sm rounded-full font-bold animate-pulse">üÜï √öJ</span>
                            </h3>
                            <button @click="expanded['inv-02-algorithm-api'] = !expanded['inv-02-algorithm-api']"
                                    class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm transition-colors">
                                <span x-text="expanded['inv-02-algorithm-api'] ? '‚ûñ Bez√°r' : '‚ûï Megnyit'"></span>
                            </button>
                        </div>
                        <div class="explanation-box mb-3">
                            <p class="text-sm"><strong>üìã</strong> API f√ºggv√©ny bels≈ë m≈±k√∂d√©se: valid√°ci√≥k, st√°tusz ellen≈ërz√©sek, error handling (7 l√©p√©s, 4 d√∂nt√©s)</p>
                        </div>


                        <details class="mb-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg">
                            <summary class="px-4 py-2 cursor-pointer font-semibold text-orange-700 dark:text-orange-300 hover:bg-orange-100 dark:hover:bg-orange-900/40 rounded-lg">
                                üìù V√°ltoz√°sok (2 m√≥dos√≠t√°s) - Kattints a r√©szletek√©rt
                            </summary>
                            <div class="px-4 pb-3">
                                <table class="w-full mt-2 text-left border-collapse">
                                    <thead class="bg-orange-100 dark:bg-orange-900/40">
                                        <tr>
                                            <th class="px-2 py-1 text-sm">#</th>
                                            <th class="px-2 py-1 text-sm">Szekci√≥</th>
                                            <th class="px-2 py-1 text-sm">V√°ltoz√°s</th>
                                            <th class="px-2 py-1 text-sm">Forr√°s</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-orange-200 dark:divide-orange-800">

                                        <tr class="bg-orange-50 dark:bg-orange-900/20">
                                            <td class="px-2 py-1 text-sm">1</td>
                                            <td class="px-2 py-1 text-sm font-medium">Query</td>
                                            <td class="px-2 py-1 text-sm">SELECT FROM cikk_location ORDER BY kiadasi_prioritas</td>
                                            <td class="px-2 py-1 text-sm text-blue-600 dark:text-blue-400">v2.0</td>
                                        </tr>

                                        <tr class="">
                                            <td class="px-2 py-1 text-sm">2</td>
                                            <td class="px-2 py-1 text-sm font-medium">Multi-lok√°ci√≥</td>
                                            <td class="px-2 py-1 text-sm">N t√°rol√≥hely t√°mogat√°s egy cikkhez</td>
                                            <td class="px-2 py-1 text-sm text-blue-600 dark:text-blue-400">ADR-016</td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </details>

                        <div x-show="expanded['inv-02-algorithm-api']" x-collapse>
                            <div class="diagram-wrapper mb-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="140 -20 1000 1400" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="140" y="-20" width="1000" height="1400" fill="#ffffff"/>
<text x="440" y="40" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Inventory API - checkBergepAvailability() v1.0</text>
<text x="440" y="64" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Basic Logic (egy location/cikk)</text>
<ellipse cx="400" cy="130" rx="60" ry="30" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="116" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">START</text>
<text x="400" y="135.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">checkBergep()</text>
<rect x="320" y="240" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="256" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Bet√∂lt√©s</text>
<text x="400" y="275.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">cikk_id alapj√°n</text>
<polygon points="400,400 470,450 400,500 330,450" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="416" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Cikk</text>
<text x="400" y="435.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">l√©tezik?</text>
<polygon points="400,580 470,630 400,680 330,630" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="596" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">berlet</text>
<text x="400" y="615.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">flag?</text>
<rect x="320" y="760" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="776" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">St√°tusz</text>
<text x="400" y="795.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">bet√∂lt√©se</text>
<polygon points="400,920 470,970 400,1020 330,970" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="936" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">status =</text>
<text x="400" y="955.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">&apos;bent&apos;?</text>
<polygon points="400,1100 470,1150 400,1200 330,1150" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="1116" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">warehouse_id</text>
<text x="400" y="1135.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">egyezik?</text>
<ellipse cx="400" cy="1310" rx="60" ry="30" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="1296" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">END</text>
<text x="400" y="1315.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Return True</text>
<ellipse cx="620" cy="450" rx="60" ry="30" stroke="#d32f2f" fill="#ffcdd2" stroke-width="2" opacity="1"/>
<text x="620" y="436" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Error 404</text>
<text x="620" y="455.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Not Found</text>
<ellipse cx="620" cy="630" rx="60" ry="30" stroke="#d32f2f" fill="#ffcdd2" stroke-width="2" opacity="1"/>
<text x="620" y="616" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Error 400</text>
<text x="620" y="635.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Bad Request</text>
<ellipse cx="620" cy="970" rx="60" ry="30" stroke="#f57c00" fill="#ffe0b2" stroke-width="2" opacity="1"/>
<text x="620" y="956" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Return False</text>
<text x="620" y="975.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(kint/szerviz)</text>
<ellipse cx="620" cy="1150" rx="60" ry="30" stroke="#f57c00" fill="#ffe0b2" stroke-width="2" opacity="1"/>
<text x="620" y="1136" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Return False</text>
<text x="620" y="1155.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(m√°s rakt√°r)</text>
<path d="M 400 170 L 400 230" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 330 L 400 390" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 510 L 400 570" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="410" y="546" font-size="16" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">igen</text>
<path d="M 480 450 L 550 450" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="500" y="446" font-size="16" fill="#d32f2f" text-anchor="start" class="excalidraw-text" opacity="1">nem</text>
<path d="M 400 690 L 400 750" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="410" y="726" font-size="16" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">igen</text>
<path d="M 480 630 L 550 630" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="500" y="626" font-size="16" fill="#d32f2f" text-anchor="start" class="excalidraw-text" opacity="1">nem</text>
<path d="M 400 850 L 400 910" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 1030 L 400 1090" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="410" y="1066" font-size="16" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">igen</text>
<path d="M 480 970 L 550 970" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange)" opacity="1"/>
<text x="500" y="966" font-size="16" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">nem</text>
<path d="M 400 1210 L 400 1270" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="410" y="1246" font-size="16" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">igen</text>
<path d="M 480 1150 L 550 1150" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange)" opacity="1"/>
<text x="500" y="1146" font-size="16" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">nem</text>
<text x="800" y="614" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">üìù v2.0 Major V√°ltoz√°s:</text>
<text x="800" y="630.8" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">Multi-location query:</text>
<text x="800" y="647.6" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">SELECT FROM cikk_location</text>
<text x="800" y="664.4" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">ORDER BY kiadasi_prioritas</text>
<text x="800" y="681.2" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="800" y="698" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">L√°sd: Feature-Multi-Location-</text>
<text x="800" y="714.8" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">Raktarkezeles-Architektura.md</text>
</svg></div>

                            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                                <label class="block text-sm font-medium mb-2">üìù Megjegyz√©sek:</label>
                                <textarea
                                    x-model="notes['inv-02-algorithm-api']"
                                    @input="saveNotes()"
                                    rows="3"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500"
                                    placeholder="Add meg a megjegyz√©seidet err≈ël a diagramr√≥l..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="activeTab === 'inv-3'" x-transition:enter.duration.300ms>
                    <div class="diagram-container" id="inv-03-user-journey">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-semibold">
                                √úgyf√©l B√©rl√©si √öt
                                <span class="ml-2 px-3 py-1 bg-green-500 text-white text-sm rounded-full font-bold animate-pulse">üÜï √öJ</span>
                            </h3>
                            <button @click="expanded['inv-03-user-journey'] = !expanded['inv-03-user-journey']"
                                    class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm transition-colors">
                                <span x-text="expanded['inv-03-user-journey'] ? '‚ûñ Bez√°r' : '‚ûï Megnyit'"></span>
                            </button>
                        </div>
                        <div class="explanation-box mb-3">
                            <p class="text-sm"><strong>üìã</strong> √úgyf√©l perspekt√≠v√°b√≥l a b√©rl√©si folyamat: ig√©ny felm√©r√©s ‚Üí k√©szlet ‚Üí v√°laszt√°s ‚Üí szerz≈ëd√©s ‚Üí √°tv√©tel (6 line√°ris l√©p√©s)</p>
                        </div>


                        <details class="mb-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg">
                            <summary class="px-4 py-2 cursor-pointer font-semibold text-orange-700 dark:text-orange-300 hover:bg-orange-100 dark:hover:bg-orange-900/40 rounded-lg">
                                üìù V√°ltoz√°sok (1 m√≥dos√≠t√°s) - Kattints a r√©szletek√©rt
                            </summary>
                            <div class="px-4 pb-3">
                                <table class="w-full mt-2 text-left border-collapse">
                                    <thead class="bg-orange-100 dark:bg-orange-900/40">
                                        <tr>
                                            <th class="px-2 py-1 text-sm">#</th>
                                            <th class="px-2 py-1 text-sm">Szekci√≥</th>
                                            <th class="px-2 py-1 text-sm">V√°ltoz√°s</th>
                                            <th class="px-2 py-1 text-sm">Forr√°s</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-orange-200 dark:divide-orange-800">

                                        <tr class="bg-orange-50 dark:bg-orange-900/20">
                                            <td class="px-2 py-1 text-sm">1</td>
                                            <td class="px-2 py-1 text-sm font-medium">UX</td>
                                            <td class="px-2 py-1 text-sm">Rakt√°ros picking lista UI b≈ëv√≠t√©s</td>
                                            <td class="px-2 py-1 text-sm text-blue-600 dark:text-blue-400">v2.0</td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </details>

                        <div x-show="expanded['inv-03-user-journey']" x-collapse>
                            <div class="diagram-wrapper mb-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="160 -20 680 1160" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="160" y="-20" width="680" height="1160" fill="#ffffff"/>
<text x="400" y="40" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">√úgyf√©l B√©rl√©si √öt - v1.0</text>
<text x="400" y="64" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">User Journey (basic flow)</text>
<ellipse cx="400" cy="130" rx="60" ry="30" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="120" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">START</text>
<rect x="320" y="240" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="256" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Ig√©ny felm√©r√©s</text>
<text x="400" y="275.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(telefonon/email)</text>
<rect x="320" y="400" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="416" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">K√©szlet ellen≈ërz√©s</text>
<text x="400" y="435.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Inventory API)</text>
<rect x="320" y="560" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="576" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">G√©p kiv√°laszt√°s</text>
<text x="400" y="595.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(modell, id≈ëtartam)</text>
<rect x="320" y="720" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="736" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Szerz≈ëd√©s al√°√≠r√°s</text>
<text x="400" y="755.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(digit√°lis/pap√≠r)</text>
<rect x="320" y="880" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="896" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">G√©p √°tv√©tel</text>
<text x="400" y="915.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(kisz√°ll√≠t√°s/√°tv√©tel)</text>
<ellipse cx="400" cy="1070" rx="60" ry="30" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="1060" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">END</text>
<path d="M 400 170 L 400 230" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 330 L 400 390" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 490 L 400 550" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 650 L 400 710" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 810 L 400 870" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 970 L 400 1030" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="540" y="414" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">üìù v2.0 UI B≈ëv√≠t√©s:</text>
<text x="540" y="430.8" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">Picking lista gener√°l√°s</text>
<text x="540" y="447.6" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">(Rakt√°ros: melyik polcr√≥l?)</text>
<text x="540" y="464.4" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="540" y="481.2" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">L√°sd: Feature-Multi-Location-</text>
<text x="540" y="498" font-size="14" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">Bevetelezes-Flowchart</text>
</svg></div>

                            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                                <label class="block text-sm font-medium mb-2">üìù Megjegyz√©sek:</label>
                                <textarea
                                    x-model="notes['inv-03-user-journey']"
                                    @input="saveNotes()"
                                    rows="3"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500"
                                    placeholder="Add meg a megjegyz√©seidet err≈ël a diagramr√≥l..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="activeTab === 'inv-4'" x-transition:enter.duration.300ms>
                    <div class="diagram-container" id="inv-04-webhook-sync">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-semibold">
                                Webhook Szinkroniz√°ci√≥
                                
                            </h3>
                            <button @click="expanded['inv-04-webhook-sync'] = !expanded['inv-04-webhook-sync']"
                                    class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm transition-colors">
                                <span x-text="expanded['inv-04-webhook-sync'] ? '‚ûñ Bez√°r' : '‚ûï Megnyit'"></span>
                            </button>
                        </div>
                        <div class="explanation-box mb-3">
                            <p class="text-sm"><strong>üìã</strong> Webhook event ‚Üí HMAC ellen≈ërz√©s ‚Üí adatkinyer√©s ‚Üí Inventory API h√≠v√°s ‚Üí logging (7 l√©p√©s, 2 d√∂nt√©s)</p>
                        </div>


                        <div x-show="expanded['inv-04-webhook-sync']" x-collapse>
                            <div class="diagram-wrapper mb-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="140 -20 580 1360" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="140" y="-20" width="580" height="1360" fill="#ffffff"/>
<text x="430" y="40" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Webhook Szinkroniz√°ci√≥ - v1.0</text>
<text x="430" y="64" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Data Pipeline (unchanged in v2.0)</text>
<ellipse cx="400" cy="130" rx="60" ry="30" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="116" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">START</text>
<text x="400" y="135.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Webhook</text>
<rect x="320" y="240" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="256" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Parse JSON</text>
<text x="400" y="275.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">payload</text>
<polygon points="400,400 470,450 400,500 330,450" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="416" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">HMAC</text>
<text x="400" y="435.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">signature OK?</text>
<rect x="320" y="580" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="596" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Extract data</text>
<text x="400" y="615.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(cikk_id, status)</text>
<polygon points="400,740 470,790 400,840 330,790" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="756" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Inventory</text>
<text x="400" y="775.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">event?</text>
<rect x="320" y="920" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="936" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Call Inventory API</text>
<text x="400" y="955.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">updateBergepStatus()</text>
<rect x="320" y="1080" width="160" height="80" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="8" opacity="1"/>
<text x="400" y="1096" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Log webhook</text>
<text x="400" y="1115.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">event + result</text>
<ellipse cx="400" cy="1270" rx="60" ry="30" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" opacity="1"/>
<text x="400" y="1256" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">END</text>
<text x="400" y="1275.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">200 OK</text>
<ellipse cx="620" cy="450" rx="60" ry="30" stroke="#d32f2f" fill="#ffcdd2" stroke-width="2" opacity="1"/>
<text x="620" y="436" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Error 401</text>
<text x="620" y="455.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Unauthorized</text>
<ellipse cx="620" cy="790" rx="60" ry="30" stroke="#757575" fill="#e0e0e0" stroke-width="2" opacity="1"/>
<text x="620" y="776" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Ignore</text>
<text x="620" y="795.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Other event)</text>
<path d="M 400 170 L 400 230" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 330 L 400 390" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 510 L 400 570" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="410" y="546" font-size="16" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">igen</text>
<path d="M 480 450 L 550 450" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="500" y="446" font-size="16" fill="#d32f2f" text-anchor="start" class="excalidraw-text" opacity="1">nem</text>
<path d="M 400 670 L 400 730" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 850 L 400 910" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="410" y="886" font-size="16" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">igen</text>
<path d="M 480 790 L 550 790" stroke="#757575" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="500" y="786" font-size="16" fill="#757575" text-anchor="start" class="excalidraw-text" opacity="1">nem</text>
<path d="M 400 1010 L 400 1070" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<path d="M 400 1170 L 400 1230" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
</svg></div>

                            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                                <label class="block text-sm font-medium mb-2">üìù Megjegyz√©sek:</label>
                                <textarea
                                    x-model="notes['inv-04-webhook-sync']"
                                    @input="saveNotes()"
                                    rows="3"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500"
                                    placeholder="Add meg a megjegyz√©seidet err≈ël a diagramr√≥l..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="activeTab === 'inv-5'" x-transition:enter.duration.300ms>
                    <div class="diagram-container" id="inv-05-status-transitions">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-semibold">
                                B√©rg√©p St√°tusz √Åtmenetek
                                
                            </h3>
                            <button @click="expanded['inv-05-status-transitions'] = !expanded['inv-05-status-transitions']"
                                    class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm transition-colors">
                                <span x-text="expanded['inv-05-status-transitions'] ? '‚ûñ Bez√°r' : '‚ûï Megnyit'"></span>
                            </button>
                        </div>
                        <div class="explanation-box mb-3">
                            <p class="text-sm"><strong>üìã</strong> B√©rg√©p √©letciklus: bent ‚Üî kint ‚Üî szerviz, terminal st√°tuszok: sold, lost, destroyed (6 √°llapot, 8 √°tmenet)</p>
                        </div>


                        <div x-show="expanded['inv-05-status-transitions']" x-collapse>
                            <div class="diagram-wrapper mb-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="140 -20 840 900" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="140" y="-20" width="840" height="900" fill="#ffffff"/>
<text x="440" y="40" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">B√©rg√©p St√°tusz √Åtmenetek - v1.0</text>
<text x="440" y="64" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">State Machine (unchanged in v2.0)</text>
<ellipse cx="450" cy="600" rx="70" ry="40" stroke="#2e7d32" fill="#c8e6c9" stroke-width="3" opacity="1"/>
<text x="450" y="578" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">bent</text>
<text x="450" y="599.6" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Available)</text>
<ellipse cx="670" cy="400" rx="70" ry="40" stroke="#f57c00" fill="#ffe0b2" stroke-width="2" opacity="1"/>
<text x="670" y="378" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">kint</text>
<text x="670" y="399.6" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Rented)</text>
<ellipse cx="670" cy="800" rx="70" ry="40" stroke="#d32f2f" fill="#ffcdd2" stroke-width="2" opacity="1"/>
<text x="670" y="778" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">szerviz</text>
<text x="670" y="799.6" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Service)</text>
<ellipse cx="870" cy="600" rx="70" ry="40" stroke="#616161" fill="#e0e0e0" stroke-width="2" opacity="1"/>
<text x="870" y="578" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">sold</text>
<text x="870" y="599.6" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Terminal)</text>
<ellipse cx="250" cy="800" rx="70" ry="40" stroke="#616161" fill="#e0e0e0" stroke-width="2" opacity="1"/>
<text x="250" y="778" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">lost</text>
<text x="250" y="799.6" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Terminal)</text>
<ellipse cx="250" cy="400" rx="70" ry="40" stroke="#616161" fill="#e0e0e0" stroke-width="2" opacity="1"/>
<text x="250" y="378" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">destroyed</text>
<text x="250" y="399.6" font-size="18" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Terminal)</text>
<path d="M 510 580 L 590 420" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="560" y="494" font-size="14" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">b√©rl√©s indul</text>
<path d="M 610 450 L 520 570" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange)" opacity="1"/>
<text x="580" y="534" font-size="14" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">visszahozva</text>
<path d="M 490 630 L 590 750" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="560" y="714" font-size="14" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">jav√≠t√°s</text>
<path d="M 610 770 L 500 630" stroke="#d32f2f" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="570" y="684" font-size="14" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">k√©sz</text>
<path d="M 690 450 L 690 750" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange)" opacity="1"/>
<text x="740" y="604" font-size="14" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">probl√©ma</text>
<path d="M 530 600 L 790 600" stroke="#616161" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="660" y="594" font-size="14" fill="#616161" text-anchor="middle" class="excalidraw-text" opacity="1">eladva</text>
<path d="M 410 640 L 280 750" stroke="#616161" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="340" y="724" font-size="14" fill="#616161" text-anchor="middle" class="excalidraw-text" opacity="1">elveszett</text>
<path d="M 410 570 L 300 430" stroke="#616161" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="340" y="494" font-size="14" fill="#616161" text-anchor="middle" class="excalidraw-text" opacity="1">selejtezve</text>
<text x="550" y="264" font-size="24" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">B√©rg√©p St√°tusz √Åtmenetek</text>
</svg></div>

                            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                                <label class="block text-sm font-medium mb-2">üìù Megjegyz√©sek:</label>
                                <textarea
                                    x-model="notes['inv-05-status-transitions']"
                                    @input="saveNotes()"
                                    rows="3"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500"
                                    placeholder="Add meg a megjegyz√©seidet err≈ël a diagramr√≥l..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm">KGC ERP v6.0 - Inventory Modul Diagramok | Gener√°lva: 2025-12-29</p>
            <p class="text-xs mt-2 text-gray-400">
                Dokument√°ci√≥ hely: <code>docs/ERP/Inventory/</code> |
                Excalidraw source: <code>docs/ERP/Inventory/flowcharts/*.excalidraw</code>
            </p>
        </div>
    </footer>

    <script>
        function appData() {
            return {
                darkMode: localStorage.getItem('darkMode') === 'true',
                activeTab: 'inv-1',
                expanded: {},
                notes: JSON.parse(localStorage.getItem('diagramNotes') || '{}'),

                saveNotes() {
                    localStorage.setItem('diagramNotes', JSON.stringify(this.notes));
                },

                exportNotes() {
                    const csv = Object.entries(this.notes)
                        .filter(([_, v]) => v)
                        .map(([k, v]) => `"${k}","${v.replace(/"/g, '""')}"`)
                        .join('\n');
                    const blob = new Blob(['Diagram,Megjegyz√©s\n' + csv], { type: 'text/csv' });
                    const a = document.createElement('a');
                    a.href = URL.createObjectURL(blob);
                    a.download = 'kgc-inventory-notes-' + new Date().toISOString().slice(0, 10) + '.csv';
                    a.click();
                },

                importNotes(event) {
                    const file = event.target.files[0];
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const lines = e.target.result.split('\n').slice(1);
                        lines.forEach(line => {
                            const match = line.match(/"([^"]+)","([^"]*)"/);
                            if (match) this.notes[match[1]] = match[2].replace(/""/g, '"');
                        });
                        this.saveNotes();
                    };
                    reader.readAsText(file);
                },

                init() {
                    this.$watch('darkMode', v => localStorage.setItem('darkMode', v));
                }
            }
        }
    </script>
</body>
</html>