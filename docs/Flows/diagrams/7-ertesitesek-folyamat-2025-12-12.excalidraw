{
  "type": "excalidraw",
  "version": 2,
  "source": "KGC-ERP-v3",
  "elements": [
    {
      "type": "text",
      "x": 400,
      "y": 20,
      "width": 500,
      "height": 35,
      "text": "KGC ERP - PWA Push √ârtes√≠t√©sek v3.0",
      "fontSize": 28,
      "fontFamily": 1,
      "textAlign": "center",
      "strokeColor": "#1976d2"
    },
    {
      "type": "text",
      "x": 400,
      "y": 55,
      "width": 350,
      "height": 20,
      "text": "2025-12-12 | N.3 Push csatorna",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "center",
      "strokeColor": "#666666"
    },
    {
      "type": "rectangle",
      "x": 50,
      "y": 100,
      "width": 200,
      "height": 120,
      "strokeColor": "#616161",
      "backgroundColor": "#fafafa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 60,
      "y": 108,
      "width": 180,
      "height": 25,
      "text": "N.1 Email (megl√©v≈ë)",
      "fontSize": 14,
      "fontFamily": 1,
      "strokeColor": "#616161"
    },
    {
      "type": "text",
      "x": 60,
      "y": 140,
      "width": 180,
      "height": 70,
      "text": "SMTP k√ºld√©s\nTemplates\nRendszeres √©rtes√≠t√©sek",
      "fontSize": 11,
      "fontFamily": 3,
      "strokeColor": "#333333"
    },
    {
      "type": "rectangle",
      "x": 280,
      "y": 100,
      "width": 200,
      "height": 120,
      "strokeColor": "#616161",
      "backgroundColor": "#fafafa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 290,
      "y": 108,
      "width": 180,
      "height": 25,
      "text": "N.2 SMS (megl√©v≈ë)",
      "fontSize": 14,
      "fontFamily": 1,
      "strokeColor": "#616161"
    },
    {
      "type": "text",
      "x": 290,
      "y": 140,
      "width": 180,
      "height": 70,
      "text": "SMS Gateway\nS√ºrg≈ës √©rtes√≠t√©sek\nLej√°rat eml√©keztet≈ë",
      "fontSize": 11,
      "fontFamily": 3,
      "strokeColor": "#333333"
    },
    {
      "type": "rectangle",
      "x": 510,
      "y": 100,
      "width": 250,
      "height": 120,
      "strokeColor": "#388e3c",
      "backgroundColor": "#e8f5e9",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 520,
      "y": 108,
      "width": 230,
      "height": 25,
      "text": "N.3 Push (√öJ) üÜï",
      "fontSize": 14,
      "fontFamily": 1,
      "strokeColor": "#388e3c"
    },
    {
      "type": "text",
      "x": 520,
      "y": 140,
      "width": 230,
      "height": 70,
      "text": "Firebase Cloud Messaging\nPWA Service Worker\nAzonnali √©rtes√≠t√©s\nOffline is m≈±k√∂dik!",
      "fontSize": 11,
      "fontFamily": 3,
      "strokeColor": "#333333"
    },
    {
      "type": "arrow",
      "x": 150,
      "y": 220,
      "width": 0,
      "height": 60,
      "strokeColor": "#333333",
      "strokeWidth": 1,
      "points": [[0, 0], [0, 60]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "type": "arrow",
      "x": 380,
      "y": 220,
      "width": 0,
      "height": 60,
      "strokeColor": "#333333",
      "strokeWidth": 1,
      "points": [[0, 0], [0, 60]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "type": "arrow",
      "x": 635,
      "y": 220,
      "width": 0,
      "height": 60,
      "strokeColor": "#388e3c",
      "strokeWidth": 2,
      "points": [[0, 0], [0, 60]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "type": "rectangle",
      "x": 200,
      "y": 290,
      "width": 400,
      "height": 80,
      "strokeColor": "#1976d2",
      "backgroundColor": "#e3f2fd",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 210,
      "y": 300,
      "width": 380,
      "height": 60,
      "text": "√âRTES√çT√âS_BE√ÅLL√çT√ÅSOK (b≈ëv√≠tve)\n+ push_engedelyezett: BOOLEAN\n+ push_subscription_json: JSONB",
      "fontSize": 12,
      "fontFamily": 3,
      "strokeColor": "#1976d2"
    },
    {
      "type": "rectangle",
      "x": 50,
      "y": 420,
      "width": 300,
      "height": 280,
      "strokeColor": "#388e3c",
      "backgroundColor": "#e8f5e9",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 60,
      "y": 428,
      "width": 280,
      "height": 25,
      "text": "PUSH_SUBSCRIPTION üÜï",
      "fontSize": 16,
      "fontFamily": 1,
      "strokeColor": "#388e3c"
    },
    {
      "type": "line",
      "x": 50,
      "y": 455,
      "width": 300,
      "height": 0,
      "strokeColor": "#388e3c",
      "strokeWidth": 1,
      "points": [[0, 0], [300, 0]]
    },
    {
      "type": "text",
      "x": 60,
      "y": 465,
      "width": 280,
      "height": 225,
      "text": "PK subscription_id: INT\n   tenant_id: UUID\nFK felhasznalo_id: INT\n   endpoint: TEXT\n   p256dh_key: VARCHAR(200)\n   auth_key: VARCHAR(100)\n   user_agent: VARCHAR(500)\n   eszkoz_tipus: ENUM\n   (desktop/mobile/tablet)\n   aktiv: BOOLEAN\n   utolso_hasznalat: DATETIME\n   letrehozva: DATETIME\n\nUNIQUE(felhasznalo_id, endpoint)",
      "fontSize": 12,
      "fontFamily": 3,
      "strokeColor": "#333333"
    },
    {
      "type": "rectangle",
      "x": 400,
      "y": 420,
      "width": 400,
      "height": 280,
      "strokeColor": "#7b1fa2",
      "backgroundColor": "#f3e5f5",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 410,
      "y": 428,
      "width": 380,
      "height": 25,
      "text": "Push √ârtes√≠t√©s Folyamat",
      "fontSize": 16,
      "fontFamily": 1,
      "strokeColor": "#7b1fa2"
    },
    {
      "type": "line",
      "x": 400,
      "y": 455,
      "width": 400,
      "height": 0,
      "strokeColor": "#7b1fa2",
      "strokeWidth": 1,
      "points": [[0, 0], [400, 0]]
    },
    {
      "type": "text",
      "x": 410,
      "y": 465,
      "width": 380,
      "height": 225,
      "text": "1. Felhaszn√°l√≥ megnyitja a PWA-t\n   ‚îî‚îÄ Service Worker regisztr√°ci√≥\n\n2. Push enged√©ly k√©r√©s\n   ‚îî‚îÄ Browser notification permission\n\n3. Subscription l√©trehoz√°sa\n   ‚îî‚îÄ pushManager.subscribe()\n   ‚îî‚îÄ PUSH_SUBSCRIPTION ment√©s\n\n4. Esem√©ny kiv√°lt√°sakor (lej√°rat, sz√°mla):\n   ‚îî‚îÄ Backend ‚Üí FCM API h√≠v√°s\n   ‚îî‚îÄ FCM ‚Üí Service Worker\n   ‚îî‚îÄ Service Worker ‚Üí self.registration\n                        .showNotification()\n\n5. Kattint√°s: PWA megnyit√°s adott oldalon",
      "fontSize": 11,
      "fontFamily": 3,
      "strokeColor": "#333333"
    },
    {
      "type": "rectangle",
      "x": 50,
      "y": 730,
      "width": 300,
      "height": 150,
      "strokeColor": "#f57c00",
      "backgroundColor": "#fff3e0",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 60,
      "y": 738,
      "width": 280,
      "height": 25,
      "text": "Push √ârtes√≠t√©s T√≠pusok",
      "fontSize": 14,
      "fontFamily": 1,
      "strokeColor": "#f57c00"
    },
    {
      "type": "text",
      "x": 60,
      "y": 770,
      "width": 280,
      "height": 100,
      "text": "BERLES_LEJAR  - B√©rl√©s lej√°r (1/3/7 nap)\nSZAMLA_KESZULT - √öj sz√°mla el√©rhet≈ë\nKESZLET_ALACSONY - K√©szletfigyelmeztet√©s\nPAROSITAS_VARAKOZIK - K√©zi p√°ros√≠t√°s kell\nRENDSZER_UZENET - Rendszer √©rtes√≠t√©s",
      "fontSize": 11,
      "fontFamily": 3,
      "strokeColor": "#333333"
    },
    {
      "type": "rectangle",
      "x": 400,
      "y": 730,
      "width": 400,
      "height": 150,
      "strokeColor": "#1976d2",
      "backgroundColor": "#e3f2fd",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 410,
      "y": 738,
      "width": 380,
      "height": 25,
      "text": "Firebase Cloud Messaging Konfig",
      "fontSize": 14,
      "fontFamily": 1,
      "strokeColor": "#1976d2"
    },
    {
      "type": "text",
      "x": 410,
      "y": 770,
      "width": 380,
      "height": 100,
      "text": "// .env konfigur√°ci√≥k\nFCM_PROJECT_ID=kgc-erp-prod\nFCM_PRIVATE_KEY=*** (titkos√≠tott)\nFCM_CLIENT_EMAIL=fcm@kgc-erp.iam...\n\n// VAPID kulcsok gener√°l√°sa sz√ºks√©ges\nVAPID_PUBLIC_KEY=B...\nVAPID_PRIVATE_KEY=***",
      "fontSize": 11,
      "fontFamily": 3,
      "strokeColor": "#333333"
    },
    {
      "type": "rectangle",
      "x": 620,
      "y": 100,
      "width": 150,
      "height": 40,
      "strokeColor": "#d32f2f",
      "backgroundColor": "#ffebee",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3, "value": 8 }
    },
    {
      "type": "text",
      "x": 640,
      "y": 110,
      "width": 110,
      "height": 20,
      "text": "ADR-002 Offline",
      "fontSize": 11,
      "fontFamily": 1,
      "strokeColor": "#d32f2f"
    }
  ],
  "appState": {
    "viewBackgroundColor": "#ffffff",
    "gridSize": null
  }
}
