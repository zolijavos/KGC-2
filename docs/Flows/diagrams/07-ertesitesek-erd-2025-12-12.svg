<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 -20 1160 690" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="10" y="-20" width="1160" height="690" fill="#ffffff"/>
<text x="650" y="48" font-size="28" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">KGC ERP - √ârtes√≠t√©sek ERD v3.0</text>
<text x="600" y="69" font-size="14" fill="#666666" text-anchor="middle" class="excalidraw-text" opacity="1">2025-12-12 | Push csatorna + PUSH_SUBSCRIPTION</text>
<rect x="50" y="100" width="320" height="300" stroke="#1976d2" fill="#e3f2fd" stroke-width="3" rx="8" opacity="1"/>
<text x="60" y="126" font-size="18" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">√âRTES√çT√âS (b≈ëv√≠tett) üîÑ</text>
<path d="M 50 140 L 370 140" stroke="#1976d2" fill="none" stroke-width="1" opacity="1"/>
<text x="60" y="162" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">PK ertesites_id: INT</text>
<text x="60" y="176.4" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   tenant_id: UUID</text>
<text x="60" y="190.8" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">FK felhasznalo_id: INT</text>
<text x="60" y="205.2" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   tipus: ENUM</text>
<text x="60" y="219.6" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   (BERLES_LEJAR/SZAMLA/stb.)</text>
<text x="60" y="234" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="60" y="248.39999999999998" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">üîÑ csatorna: ENUM</text>
<text x="60" y="262.79999999999995" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   (sms/email/push) ‚Üê B≈êV√çTVE!</text>
<text x="60" y="277.2" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="60" y="291.6" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   targy: VARCHAR</text>
<text x="60" y="306" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   tartalom: TEXT</text>
<text x="60" y="320.4" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   statusz: ENUM</text>
<text x="60" y="334.79999999999995" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   (varakozik/kuldve/sikertelen)</text>
<text x="60" y="349.2" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   kuldesi_datum: DATETIME</text>
<text x="60" y="363.59999999999997" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   hiba_uzenet: TEXT</text>
<text x="60" y="378" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   created_at: DATETIME</text>
<rect x="450" y="100" width="320" height="300" stroke="#388e3c" fill="#e8f5e9" stroke-width="3" rx="8" opacity="1"/>
<text x="460" y="126" font-size="18" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">PUSH_SUBSCRIPTION üÜï</text>
<path d="M 450 140 L 770 140" stroke="#388e3c" fill="none" stroke-width="1" opacity="1"/>
<text x="460" y="162" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">PK subscription_id: INT</text>
<text x="460" y="176.4" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   tenant_id: UUID</text>
<text x="460" y="190.8" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">FK felhasznalo_id: INT ‚Üí FELH.</text>
<text x="460" y="205.2" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   endpoint: TEXT (push URL)</text>
<text x="460" y="219.6" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   p256dh_key: VARCHAR(200)</text>
<text x="460" y="234" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   auth_key: VARCHAR(100)</text>
<text x="460" y="248.39999999999998" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   user_agent: VARCHAR(500)</text>
<text x="460" y="262.79999999999995" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   eszkoz_tipus: ENUM</text>
<text x="460" y="277.2" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   (desktop/mobile/tablet)</text>
<text x="460" y="291.6" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   aktiv: BOOLEAN</text>
<text x="460" y="306" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   utolso_hasznalat: DATETIME</text>
<text x="460" y="320.4" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   letrehozva: DATETIME</text>
<text x="460" y="334.79999999999995" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="460" y="349.2" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">UNIQUE(felhasznalo_id, endpoint)</text>
<rect x="850" y="100" width="280" height="200" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" rx="8" opacity="1"/>
<text x="860" y="124" font-size="16" fill="#7b1fa2" text-anchor="start" class="excalidraw-text" opacity="1">√âRTES√çT√âS_BE√ÅLL√çT√ÅS (b≈ëv.)</text>
<path d="M 850 140 L 1130 140" stroke="#7b1fa2" fill="none" stroke-width="1" opacity="1"/>
<text x="860" y="162" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">PK beallitas_id: INT</text>
<text x="860" y="176.4" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">FK felhasznalo_id: INT</text>
<text x="860" y="190.8" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   email_engedelyezett: BOOL</text>
<text x="860" y="205.2" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   sms_engedelyezett: BOOL</text>
<text x="860" y="219.6" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="860" y="234" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">üÜï push_engedelyezett: BOOL</text>
<text x="860" y="248.39999999999998" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">üÜï push_subscription_json: JSONB</text>
<text x="860" y="262.79999999999995" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="860" y="277.2" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   ertesites_tipusok: JSONB</text>
<text x="860" y="291.6" font-size="12" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">   (mely t√≠pusokra k√©r √©rtes√≠t√©st)</text>
<path d="M 370 250 L 450 250" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green)" opacity="1"/>
<text x="385" y="244" font-size="14" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">1:N</text>
<path d="M 770 200 L 850 200" stroke="#7b1fa2" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="785" y="194" font-size="14" fill="#7b1fa2" text-anchor="start" class="excalidraw-text" opacity="1">1:1</text>
<rect x="50" y="430" width="320" height="200" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="8" opacity="1"/>
<text x="60" y="454" font-size="16" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">√ârtes√≠t√©s T√≠pusok</text>
<path d="M 50 465 L 370 465" stroke="#f57c00" fill="none" stroke-width="1" opacity="1"/>
<text x="60" y="486" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">BERLES_LEJAR - B√©rl√©s lej√°rat</text>
<text x="60" y="499.2" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  (1/3/7 nap el≈ëtte)</text>
<text x="60" y="512.4" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="60" y="525.6" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">SZAMLA_KESZULT - √öj sz√°mla</text>
<text x="60" y="538.8" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  (PDF csatolva)</text>
<text x="60" y="552" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="60" y="565.2" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">KESZLET_ALACSONY - K√©szlet figy.</text>
<text x="60" y="578.4" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  (min. szint alatt)</text>
<text x="60" y="591.6" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="60" y="604.8" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">üÜï PAROSITAS_VARAKOZIK</text>
<text x="60" y="618" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  (k√©zi p√°ros√≠t√°s sz√ºks√©ges)</text>
<text x="60" y="631.2" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="60" y="644.4" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">RENDSZER_UZENET - √Åltal√°nos</text>
<rect x="450" y="430" width="320" height="200" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="8" opacity="1"/>
<text x="460" y="454" font-size="16" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">Firebase Cloud Messaging</text>
<path d="M 450 465 L 770 465" stroke="#1976d2" fill="none" stroke-width="1" opacity="1"/>
<text x="460" y="486" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">Konfigur√°ci√≥ (.env):</text>
<text x="460" y="499.2" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  FCM_PROJECT_ID=kgc-erp-prod</text>
<text x="460" y="512.4" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  FCM_PRIVATE_KEY=*** (titkos)</text>
<text x="460" y="525.6" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  FCM_CLIENT_EMAIL=fcm@...</text>
<text x="460" y="538.8" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="460" y="552" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">VAPID kulcsok:</text>
<text x="460" y="565.2" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  VAPID_PUBLIC_KEY=B...</text>
<text x="460" y="578.4" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  VAPID_PRIVATE_KEY=***</text>
<text x="460" y="591.6" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="460" y="604.8" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">Service Worker:</text>
<text x="460" y="618" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">  self.registration</text>
<text x="460" y="631.2" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">    .showNotification(title, opts)</text>
<rect x="850" y="330" width="280" height="120" stroke="#616161" fill="#fafafa" stroke-width="1" rx="8" opacity="1"/>
<text x="860" y="354" font-size="14" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">Jelmagyar√°zat</text>
<text x="860" y="381" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">üîÑ = M√≥dos√≠tott entit√°s/mez≈ë</text>
<text x="860" y="394.2" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">üÜï = √öj entit√°s/mez≈ë</text>
<text x="860" y="407.4" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">PK = Primary Key</text>
<text x="860" y="420.6" font-size="11" fill="#333333" text-anchor="start" class="excalidraw-text" opacity="1">FK = Foreign Key</text>
</svg>