<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 -20 1130 890" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="10" y="-20" width="1130" height="890" fill="#ffffff"/>
<text x="600" y="52" font-size="32" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">KGC ERP v3.0 - Gyártás Modul ERD</text>
<text x="600" y="81" font-size="16" fill="#666666" text-anchor="middle" class="excalidraw-text" opacity="1">BOM + Gyártási rendelés + Lot/Batch követés</text>
<rect x="900" y="20" width="200" height="120" stroke="#424242" fill="#fafafa" stroke-width="1" rx="0" opacity="1"/>
<text x="920" y="44" font-size="14" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">Színkódok:</text>
<rect x="920" y="55" width="20" height="15" stroke="#1976d2" fill="#e3f2fd" stroke-width="1" rx="0" opacity="1"/>
<text x="950" y="65" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">BOM táblák (public)</text>
<rect x="920" y="78" width="20" height="15" stroke="#2e7d32" fill="#c8e6c9" stroke-width="1" rx="0" opacity="1"/>
<text x="950" y="88" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">Tranzakciós (tenant)</text>
<rect x="920" y="101" width="20" height="15" stroke="#757575" fill="#eeeeee" stroke-width="1" rx="0" opacity="1"/>
<text x="950" y="111" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">Külső referenciák</text>
<rect x="50" y="150" width="280" height="220" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="190" y="178" font-size="18" fill="#0d47a1" text-anchor="middle" class="excalidraw-text" opacity="1">BOM_HEADER</text>
<text x="60" y="195" font-size="10" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">public séma</text>
<path d="M 60 200 L 320 200" stroke="#1976d2" fill="none" stroke-width="1" opacity="1"/>
<text x="60" y="222" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">PK id</text>
<text x="60" y="236.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK cikk_id → public.cikk</text>
<text x="60" y="250.8" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   bom_kod</text>
<text x="60" y="265.2" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   megnevezes</text>
<text x="60" y="279.6" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   verzio</text>
<text x="60" y="294" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   aktiv (boolean)</text>
<text x="60" y="308.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   letrehozva (timestamp)</text>
<text x="60" y="322.79999999999995" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   modositva (timestamp)</text>
<rect x="50" y="420" width="280" height="220" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="190" y="448" font-size="18" fill="#0d47a1" text-anchor="middle" class="excalidraw-text" opacity="1">BOM_LINE</text>
<text x="60" y="465" font-size="10" fill="#1976d2" text-anchor="start" class="excalidraw-text" opacity="1">public séma</text>
<path d="M 60 470 L 320 470" stroke="#1976d2" fill="none" stroke-width="1" opacity="1"/>
<text x="60" y="492" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">PK id</text>
<text x="60" y="506.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK bom_header_id → bom_header</text>
<text x="60" y="520.8" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK parent_line_id → self (nullable)</text>
<text x="60" y="535.2" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK komponens_cikk_id → public.cikk</text>
<text x="60" y="549.6" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   mennyiseg (decimal)</text>
<text x="60" y="564" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   mertekegyseg</text>
<text x="60" y="578.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   level (int)</text>
<text x="60" y="592.8" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   sorrend (int)</text>
<rect x="420" y="150" width="320" height="280" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="0" opacity="1"/>
<text x="580" y="178" font-size="18" fill="#1b5e20" text-anchor="middle" class="excalidraw-text" opacity="1">PRODUCTION_ORDER</text>
<text x="430" y="195" font-size="10" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">tenant séma</text>
<path d="M 430 200 L 730 200" stroke="#2e7d32" fill="none" stroke-width="1" opacity="1"/>
<text x="430" y="222" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">PK id</text>
<text x="430" y="236.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   rendeles_szam (unique)</text>
<text x="430" y="250.8" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK bom_header_id → public.bom_header</text>
<text x="430" y="265.2" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   gyartando_mennyiseg (decimal)</text>
<text x="430" y="279.6" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   statusz ENUM:</text>
<text x="430" y="294" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - draft</text>
<text x="430" y="308.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - confirmed</text>
<text x="430" y="322.79999999999995" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - in_progress</text>
<text x="430" y="337.2" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - completed</text>
<text x="430" y="351.6" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - cancelled</text>
<text x="430" y="366" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   tervezett_kezdes (date)</text>
<text x="430" y="380.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   tervezett_befejezes (date)</text>
<text x="430" y="394.79999999999995" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK letrehozta_user_id → tenant.user</text>
<rect x="420" y="480" width="320" height="300" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="0" opacity="1"/>
<text x="580" y="506" font-size="16" fill="#1b5e20" text-anchor="middle" class="excalidraw-text" opacity="1">PRODUCTION_ORDER_PHASE</text>
<text x="430" y="525" font-size="10" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">tenant séma</text>
<path d="M 430 530 L 730 530" stroke="#2e7d32" fill="none" stroke-width="1" opacity="1"/>
<text x="430" y="552" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">PK id</text>
<text x="430" y="566.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK production_order_id → production_order</text>
<text x="430" y="580.8" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   fazis_tipus ENUM:</text>
<text x="430" y="595.2" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - elokeszites</text>
<text x="430" y="609.6" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - gyartas</text>
<text x="430" y="624" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - ellenorzes</text>
<text x="430" y="638.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">     - keszletbe_vetel</text>
<text x="430" y="652.8" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   statusz</text>
<text x="430" y="667.2" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   kezdes (timestamp)</text>
<text x="430" y="681.6" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   befejezes (timestamp)</text>
<text x="430" y="696" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK felelos_user_id → tenant.user</text>
<text x="430" y="710.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   megjegyzes (text)</text>
<text x="430" y="724.8" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   selejt_mennyiseg (decimal)</text>
<text x="430" y="739.2" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   selejt_ok (text)</text>
<rect x="820" y="200" width="280" height="230" stroke="#2e7d32" fill="#c8e6c9" stroke-width="2" rx="0" opacity="1"/>
<text x="960" y="228" font-size="18" fill="#1b5e20" text-anchor="middle" class="excalidraw-text" opacity="1">LOT_BATCH</text>
<text x="830" y="245" font-size="10" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">tenant séma</text>
<path d="M 830 250 L 1090 250" stroke="#2e7d32" fill="none" stroke-width="1" opacity="1"/>
<text x="830" y="272" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">PK id</text>
<text x="830" y="286.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK production_order_id → production_order</text>
<text x="830" y="300.8" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   lot_szam (unique)</text>
<text x="830" y="315.2" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   gyartas_datum (date)</text>
<text x="830" y="329.6" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   lejarati_datum (date, nullable)</text>
<text x="830" y="344" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">   mennyiseg (decimal)</text>
<text x="830" y="358.4" font-size="12" fill="#424242" text-anchor="start" class="excalidraw-text" opacity="1">FK cikk_id → public.cikk</text>
<rect x="820" y="480" width="180" height="100" stroke="#757575" fill="#eeeeee" stroke-width="2" rx="0" opacity="1"/>
<text x="910" y="506" font-size="16" fill="#424242" text-anchor="middle" class="excalidraw-text" opacity="1">CIKK</text>
<text x="830" y="525" font-size="10" fill="#757575" text-anchor="start" class="excalidraw-text" opacity="1">public séma</text>
<rect x="820" y="610" width="180" height="100" stroke="#757575" fill="#eeeeee" stroke-width="2" rx="0" opacity="1"/>
<text x="910" y="636" font-size="16" fill="#424242" text-anchor="middle" class="excalidraw-text" opacity="1">USER</text>
<text x="830" y="655" font-size="10" fill="#757575" text-anchor="start" class="excalidraw-text" opacity="1">tenant séma</text>
<path d="M 190 370 L 190 420" stroke="#1976d2" fill="none" stroke-width="2" opacity="1"/>
<text x="220" y="397" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">1 : N</text>
<path d="M 330 260 L 420 260" stroke="#424242" fill="none" stroke-width="2" opacity="1"/>
<text x="370" y="252" font-size="12" fill="#424242" text-anchor="middle" class="excalidraw-text" opacity="1">1 : N</text>
<path d="M 580 430 L 580 480" stroke="#2e7d32" fill="none" stroke-width="2" opacity="1"/>
<text x="610" y="457" font-size="12" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">1 : N</text>
<path d="M 740 300 L 820 300" stroke="#2e7d32" fill="none" stroke-width="2" opacity="1"/>
<text x="780" y="292" font-size="12" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">1 : N</text>
<rect x="50" y="680" width="300" height="150" stroke="#f57c00" fill="#fff8e1" stroke-width="1" rx="0" opacity="1"/>
<text x="60" y="704" font-size="14" fill="#e65100" text-anchor="start" class="excalidraw-text" opacity="1">Megjegyzések:</text>
<text x="60" y="726" font-size="11" fill="#bf360c" text-anchor="start" class="excalidraw-text" opacity="1">- BOM táblák PUBLIC sémában</text>
<text x="60" y="739.2" font-size="11" fill="#bf360c" text-anchor="start" class="excalidraw-text" opacity="1">- Tranzakciós táblák TENANT sémában</text>
<text x="60" y="752.4" font-size="11" fill="#bf360c" text-anchor="start" class="excalidraw-text" opacity="1">- bom_line.parent_line_id: hierarchikus</text>
<text x="60" y="765.6" font-size="11" fill="#bf360c" text-anchor="start" class="excalidraw-text" opacity="1">  BOM struktúra (al-termékek)</text>
<text x="60" y="778.8" font-size="11" fill="#bf360c" text-anchor="start" class="excalidraw-text" opacity="1">- Lot/Batch: nyomonkövethetőség</text>
</svg>