<!DOCTYPE html>
<html lang="hu" x-data="appData()" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KGC ERP - Modul Integr√°ci√≥k</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script>tailwind.config = { darkMode: 'class' }</script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .dark { background-color: rgb(17 24 39); color: rgb(243 244 246); }
        .sticky-sidebar { position: sticky; top: 1.5rem; max-height: calc(100vh - 3rem); overflow-y: auto; }
        .diagram-container { background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 1.5rem; margin: 1.5rem 0; }
        .dark .diagram-container { background: rgb(31 41 55); border-color: rgb(55 65 81); }
        .diagram-wrapper { background: #f9fafb; border-radius: 0.5rem; padding: 1rem; overflow: auto; }
        .dark .diagram-wrapper { background: #2d3748; }
        .diagram-wrapper svg { display: block; margin: 0 auto; max-width: 100%; height: auto; }
        .dark .diagram-wrapper svg { filter: invert(0.9) hue-rotate(180deg); }
        .explanation-box { background: linear-gradient(to right, #eff6ff, #dbeafe); border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 8px; }
        .dark .explanation-box { background: linear-gradient(to right, rgb(30 58 138), rgb(29 78 216)); }
        .details-box { background: #f0fdf4; border-left: 4px solid #22c55e; padding: 1rem; border-radius: 8px; margin-top: 0.5rem; }
        .dark .details-box { background: rgb(20 83 45); }
        .module-badge { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; }
        .module-support { background: #e1bee7; color: #4a148c; }
        .module-crm { background: #b2dfdb; color: #004d40; }
        .module-hr { background: #ffccbc; color: #bf360c; }
        .dark .module-support { background: #6a1b9a; color: #f3e5f5; }
        .dark .module-crm { background: #00695c; color: #e0f2f1; }
        .dark .module-hr { background: #e64a19; color: #fbe9e7; }
        @media print { .no-print { display: none !important; } }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <!-- Header -->
    <header class="bg-gradient-to-r from-purple-600 via-blue-600 to-teal-600 text-white shadow-lg no-print">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col lg:flex-row justify-between items-center">
                <div class="text-center lg:text-left mb-4 lg:mb-0">
                    <h1 class="text-3xl font-bold">KGC ERP - Modul Integr√°ci√≥k</h1>
                    <p class="mt-1">Plugin Architekt√∫ra | API-First | Ki-bekapcsolhat√≥ Modulok</p>
                    <div class="flex flex-wrap gap-2 mt-2 justify-center lg:justify-start">
                        <span class="module-badge module-support">ü§ñ Support</span>
                        <span class="module-badge module-crm">üìä CRM</span>
                        <span class="module-badge module-hr">üë• HR</span>
                    </div>
                </div>
                <div class="flex space-x-3">
                    <button @click="darkMode = !darkMode" class="p-3 bg-white/20 rounded-lg hover:bg-white/30" title="S√∂t√©t/Vil√°gos m√≥d">
                        <span x-text="darkMode ? '‚òÄÔ∏è' : 'üåô'"></span>
                    </button>
                    <button @click="window.print()" class="px-4 py-2 bg-white/20 rounded-lg hover:bg-white/30">üñ®Ô∏è Nyomtat√°s</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-12 gap-6">
            <!-- Sidebar Navigation -->
            <aside class="col-span-12 lg:col-span-3 no-print">
                <div class="sticky-sidebar bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg">
                    <h2 class="text-lg font-bold mb-4">üìã Modulok</h2>

                    <!-- Support Module -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-purple-600 dark:text-purple-400 mb-2">ü§ñ Support Modul</h3>
                        <div class="space-y-1">
                            <button @click="activeTab = 'support-overview'" :class="activeTab === 'support-overview' ? 'bg-purple-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                √Åttekint√©s
                            </button>
                            <button @click="activeTab = 'support-architecture'" :class="activeTab === 'support-architecture' ? 'bg-purple-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Plugin Architekt√∫ra
                            </button>
                            <button @click="activeTab = 'support-dataflow'" :class="activeTab === 'support-dataflow' ? 'bg-purple-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Adatfolyam (DFD)
                            </button>
                            <button @click="activeTab = 'support-docs'" :class="activeTab === 'support-docs' ? 'bg-purple-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Dokument√°ci√≥
                            </button>
                            <button @click="activeTab = 'support-full-doc'" :class="activeTab === 'support-full-doc' ? 'bg-purple-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                üìÑ Teljes Spec (PDF)
                            </button>
                        </div>
                    </div>

                    <!-- CRM Module -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-teal-600 dark:text-teal-400 mb-2">üìä CRM Modul</h3>
                        <div class="space-y-1">
                            <button @click="activeTab = 'crm-overview'" :class="activeTab === 'crm-overview' ? 'bg-teal-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                √Åttekint√©s
                            </button>
                            <button @click="activeTab = 'crm-architecture'" :class="activeTab === 'crm-architecture' ? 'bg-teal-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Plugin Architekt√∫ra
                            </button>
                            <button @click="activeTab = 'crm-dataflow'" :class="activeTab === 'crm-dataflow' ? 'bg-teal-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Adatfolyam (DFD)
                            </button>
                            <button @click="activeTab = 'crm-docs'" :class="activeTab === 'crm-docs' ? 'bg-teal-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Dokument√°ci√≥
                            </button>
                            <button @click="activeTab = 'crm-full-doc'" :class="activeTab === 'crm-full-doc' ? 'bg-teal-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                üìÑ Teljes Spec (PDF)
                            </button>
                        </div>
                    </div>

                    <!-- HR Module -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-orange-600 dark:text-orange-400 mb-2">üë• HR Modul</h3>
                        <div class="space-y-1">
                            <button @click="activeTab = 'hr-overview'" :class="activeTab === 'hr-overview' ? 'bg-orange-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                √Åttekint√©s
                            </button>
                            <button @click="activeTab = 'hr-architecture'" :class="activeTab === 'hr-architecture' ? 'bg-orange-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Plugin Architekt√∫ra
                            </button>
                            <button @click="activeTab = 'hr-dataflow'" :class="activeTab === 'hr-dataflow' ? 'bg-orange-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Adatfolyam (DFD)
                            </button>
                            <button @click="activeTab = 'hr-docs'" :class="activeTab === 'hr-docs' ? 'bg-orange-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Dokument√°ci√≥
                            </button>
                            <button @click="activeTab = 'hr-full-doc'" :class="activeTab === 'hr-full-doc' ? 'bg-orange-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                üìÑ Teljes Spec (PDF)
                            </button>
                        </div>
                    </div>

                    <!-- Comprehensive System Diagrams -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-blue-600 dark:text-blue-400 mb-2">üèóÔ∏è Teljes Rendszer</h3>
                        <div class="space-y-1">
                            <button @click="activeTab = 'system-architecture'" :class="activeTab === 'system-architecture' ? 'bg-blue-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Rendszer Architekt√∫ra
                            </button>
                            <button @click="activeTab = 'system-dataflow'" :class="activeTab === 'system-dataflow' ? 'bg-blue-600 text-white' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'" class="w-full text-left px-3 py-2 rounded-lg text-xs transition-colors">
                                Teljes Adatfolyam (DFD)
                            </button>
                        </div>
                    </div>

                    <div class="mt-6 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-xs">
                        <p class="font-semibold mb-1">üí° Plugin Filoz√≥fia</p>
                        <p class="text-gray-600 dark:text-gray-400">Minden modul √∂n√°ll√≥an m≈±k√∂dik, runtime ki-bekapcsolhat√≥, √©s nem f√ºgg a t√∂bbit≈ël.</p>
                    </div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="col-span-12 lg:col-span-9">

                <!-- ============================================= -->
                <!-- SUPPORT MODULE - OVERVIEW -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'support-overview'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <div class="flex items-start justify-between">
                            <div>
                                <h2 class="text-2xl font-bold flex items-center gap-2">
                                    <span class="module-badge module-support">ü§ñ Support</span>
                                    Kok√≥ AI √úgyf√©lszolg√°lat
                                </h2>
                                <p class="text-gray-600 dark:text-gray-400 mt-2">Intelligens, 24/7 el√©rhet≈ë chatbot t√°mogat√°s Gemini AI-val</p>
                            </div>
                            <span class="px-3 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 rounded-full text-sm font-semibold">Akt√≠v</span>
                        </div>
                    </div>

                    <!-- Key Features -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow">
                            <h3 class="font-semibold mb-3 flex items-center gap-2">
                                <span class="text-2xl">ü§ñ</span>
                                AI V√°laszad√°s
                            </h3>
                            <ul class="text-sm space-y-2 text-gray-600 dark:text-gray-400">
                                <li>‚úì Gemini 2.0 Flash Exp motor</li>
                                <li>‚úì Context Caching (75% k√∂lts√©gmegtakar√≠t√°s)</li>
                                <li>‚úì Confidence score minden v√°laszhoz</li>
                                <li>‚úì T√∂bbnyelv≈± t√°mogat√°s (HU/EN)</li>
                            </ul>
                        </div>

                        <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow">
                            <h3 class="font-semibold mb-3 flex items-center gap-2">
                                <span class="text-2xl">üîå</span>
                                Plugin Architekt√∫ra
                            </h3>
                            <ul class="text-sm space-y-2 text-gray-600 dark:text-gray-400">
                                <li>‚úì Runtime enable/disable</li>
                                <li>‚úì Feature flag: <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded">SUPPORT_MODULE_ENABLED</code></li>
                                <li>‚úì KGC ERP f√ºggetlen m≈±k√∂d√©s</li>
                                <li>‚úì Graceful degradation (hiba eset√©n)</li>
                            </ul>
                        </div>

                        <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow">
                            <h3 class="font-semibold mb-3 flex items-center gap-2">
                                <span class="text-2xl">üîó</span>
                                KGC Integr√°ci√≥
                            </h3>
                            <ul class="text-sm space-y-2 text-gray-600 dark:text-gray-400">
                                <li>‚úì 6 API endpoint (readonly)</li>
                                <li>‚úì 5 webhook esem√©ny (push)</li>
                                <li>‚úì B√©rl√©s, Szerviz, Rendel√©s lek√©rdez√©s</li>
                                <li>‚úì Automatikus √©rtes√≠t√©sek</li>
                            </ul>
                        </div>

                        <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow">
                            <h3 class="font-semibold mb-3 flex items-center gap-2">
                                <span class="text-2xl">üìÖ</span>
                                Id≈ëpontfoglal√°s
                            </h3>
                            <ul class="text-sm space-y-2 text-gray-600 dark:text-gray-400">
                                <li>‚úì Google Calendar integr√°ci√≥</li>
                                <li>‚úì Szabad id≈ëpontok lek√©rdez√©se</li>
                                <li>‚úì Szerviz foglal√°s chatbotb√≥l</li>
                                <li>‚úì Email visszaigazol√°s</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Integration Points -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-bold mb-4">üîó Integr√°ci√≥s Pontok a KGC ERP-ben</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-600 dark:text-blue-400 mb-2">üì¶ B√©rl√©s Modul</h4>
                                <ul class="text-sm space-y-1">
                                    <li>‚Ä¢ B√©rl√©s st√°tusz lek√©rdez√©s</li>
                                    <li>‚Ä¢ K√©s√©s √©rtes√≠t√©s</li>
                                    <li>‚Ä¢ Visszav√©tel el√©gedetts√©gi felm√©r√©s</li>
                                </ul>
                            </div>

                            <div class="border border-purple-200 dark:border-purple-800 rounded-lg p-4">
                                <h4 class="font-semibold text-purple-600 dark:text-purple-400 mb-2">üîß Szerviz Modul</h4>
                                <ul class="text-sm space-y-1">
                                    <li>‚Ä¢ Munkalap st√°tusz k√∂vet√©s</li>
                                    <li>‚Ä¢ √Åraj√°nlat k√©sz √©rtes√≠t√©s</li>
                                    <li>‚Ä¢ Jav√≠t√°s k√©sz √©rtes√≠t√©s</li>
                                    <li>‚Ä¢ Id≈ëpontfoglal√°s</li>
                                </ul>
                            </div>

                            <div class="border border-green-200 dark:border-green-800 rounded-lg p-4">
                                <h4 class="font-semibold text-green-600 dark:text-green-400 mb-2">üõí √ârt√©kes√≠t√©s</h4>
                                <ul class="text-sm space-y-1">
                                    <li>‚Ä¢ Rendel√©s st√°tusz</li>
                                    <li>‚Ä¢ √Åru be√©rkez√©s √©rtes√≠t√©s</li>
                                    <li>‚Ä¢ K√©szlet lek√©rdez√©s</li>
                                </ul>
                            </div>

                            <div class="border border-orange-200 dark:border-orange-800 rounded-lg p-4">
                                <h4 class="font-semibold text-orange-600 dark:text-orange-400 mb-2">üë§ √úgyf√©lkezel√©s</h4>
                                <ul class="text-sm space-y-1">
                                    <li>‚Ä¢ Telefonsz√°m alap√∫ azonos√≠t√°s</li>
                                    <li>‚Ä¢ Duplik√°ci√≥ ellen≈ërz√©s</li>
                                    <li>‚Ä¢ GDPR cascade delete</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Tech Stack -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-bold mb-4">üõ†Ô∏è Technol√≥giai Stack</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="text-center">
                                <div class="bg-purple-100 dark:bg-purple-900/30 rounded-lg p-3 mb-2">
                                    <span class="text-2xl">ü§ñ</span>
                                </div>
                                <p class="font-semibold text-sm">Gemini 2.0</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">AI Motor</p>
                            </div>
                            <div class="text-center">
                                <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-3 mb-2">
                                    <span class="text-2xl">üí¨</span>
                                </div>
                                <p class="font-semibold text-sm">Chatwoot</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Chat Platform</p>
                            </div>
                            <div class="text-center">
                                <div class="bg-green-100 dark:bg-green-900/30 rounded-lg p-3 mb-2">
                                    <span class="text-2xl">üêç</span>
                                </div>
                                <p class="font-semibold text-sm">Python</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Backend</p>
                            </div>
                            <div class="text-center">
                                <div class="bg-red-100 dark:bg-red-900/30 rounded-lg p-3 mb-2">
                                    <span class="text-2xl">üì¶</span>
                                </div>
                                <p class="font-semibold text-sm">Docker</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Deployment</p>
                            </div>
                        </div>
                    </div>

                    <!-- Cost Estimate -->
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border-l-4 border-green-500">
                        <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                            <span>üí∞</span>
                            K√∂lts√©gbecsl√©s
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <p class="text-3xl font-bold text-green-600 dark:text-green-400">$40-110</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Havi √ºzemeltet√©s / franchise</p>
                            </div>
                            <div>
                                <p class="text-3xl font-bold text-blue-600 dark:text-blue-400">~7 nap</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Fejleszt√©si id≈ë (integr√°ci√≥)</p>
                            </div>
                            <div>
                                <p class="text-3xl font-bold text-purple-600 dark:text-purple-400">75%</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Megtakar√≠t√°s (context cache)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- SUPPORT MODULE - ARCHITECTURE DIAGRAM -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'support-architecture'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üèóÔ∏è Plugin Architekt√∫ra Diagram</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">KGC ERP CORE + Support Module Plugin fel√©p√≠t√©se</p>
                    </div>

                    <div class="diagram-container">
                        <div class="explanation-box mb-4">
                            <p class="text-sm"><strong>üìä Diagram T√≠pus:</strong> Rendszer Architekt√∫ra</p>
                            <p class="text-sm mt-1"><strong>üéØ C√©l:</strong> Bemutatni a plugin-alap√∫ architekt√∫r√°t, ahol a Support modul runtime enable/disable t√°mogat√°ssal m≈±k√∂dik.</p>
                        </div>

                        <div class="diagram-wrapper"><svg xmlns="http://www.w3.org/2000/svg" viewBox="20 -20 1120 1080" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="20" y="-20" width="1120" height="1080" fill="#ffffff"/>
<text x="590" y="48" font-size="28" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">KGC-Support Plugin Architekt√∫ra</text>
<rect x="60" y="100" width="1040" height="420" stroke="#1976d2" fill="#e3f2fd" stroke-width="3" rx="0" opacity="1"/>
<text x="580" y="134" font-size="24" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">KGC ERP CORE</text>
<rect x="100" y="180" width="180" height="100" stroke="#1976d2" fill="#ffffff" stroke-width="2" rx="0" opacity="1"/>
<text x="190" y="237" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">B√©rl√©s</text>
<rect x="320" y="180" width="180" height="100" stroke="#1976d2" fill="#ffffff" stroke-width="2" rx="0" opacity="1"/>
<text x="410" y="237" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">√ârt√©kes√≠t√©s</text>
<rect x="540" y="180" width="180" height="100" stroke="#1976d2" fill="#ffffff" stroke-width="2" rx="0" opacity="1"/>
<text x="630" y="237" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Szerviz</text>
<rect x="760" y="180" width="180" height="100" stroke="#1976d2" fill="#ffffff" stroke-width="2" rx="0" opacity="1"/>
<text x="850" y="237" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P√©nz√ºgy</text>
<rect x="100" y="320" width="840" height="120" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="120" y="346" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Integration Layer</text>
<text x="120" y="365.2" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="120" y="384.4" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Plugin Discovery</text>
<text x="120" y="403.6" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Runtime Enable/Disable</text>
<text x="120" y="422.8" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ API Gateway &amp; Webhook Registry</text>
<rect x="520" y="340" width="200" height="80" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="0" opacity="1"/>
<text x="620" y="369" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Feature Flag:</text>
<text x="620" y="385.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">SUPPORT_MODULE</text>
<text x="620" y="402.6" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">_ENABLED</text>
<rect x="60" y="580" width="1040" height="300" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="3" rx="0" opacity="1"/>
<text x="580" y="614" font-size="24" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">SUPPORT MODULE PLUGIN (Opcion√°lis)</text>
<rect x="100" y="660" width="220" height="180" stroke="#7b1fa2" fill="#ffffff" stroke-width="2" rx="0" opacity="1"/>
<text x="120" y="696" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Chatwoot</text>
<text x="120" y="715.2" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Integration</text>
<text x="120" y="734.4" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="120" y="753.6" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Widget</text>
<text x="120" y="772.8" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Email Inbox</text>
<text x="120" y="792" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Discord Bridge</text>
<text x="120" y="811.2" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Contact Mgmt</text>
<rect x="360" y="660" width="220" height="180" stroke="#7b1fa2" fill="#ffffff" stroke-width="2" rx="0" opacity="1"/>
<text x="380" y="696" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Context Manager</text>
<text x="380" y="715.2" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">+ Gemini AI</text>
<text x="380" y="734.4" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="380" y="753.6" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Knowledge Base</text>
<text x="380" y="772.8" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Context Cache</text>
<text x="380" y="792" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Long-term Memory</text>
<text x="380" y="811.2" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ KGC API Client</text>
<rect x="620" y="660" width="220" height="180" stroke="#7b1fa2" fill="#ffffff" stroke-width="2" rx="0" opacity="1"/>
<text x="640" y="696" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Calendar Service</text>
<text x="640" y="715.2" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="640" y="734.4" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Google Calendar</text>
<text x="640" y="753.6" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Id≈ëpont Foglal√°s</text>
<text x="640" y="772.8" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Szerviz</text>
<text x="640" y="792" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">  Appointment</text>
<text x="640" y="811.2" font-size="16" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">  Booking</text>
<rect x="880" y="720" width="180" height="80" stroke="#388e3c" fill="#c8e6c9" stroke-width="2" rx="0" opacity="1"/>
<text x="970" y="749" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Plugin Status:</text>
<text x="970" y="765.8" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">ENABLED /</text>
<text x="970" y="782.6" font-size="14" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">DISABLED</text>
<path d="M 190 280 L 190 320" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<path d="M 410 280 L 410 320" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<path d="M 630 280 L 630 320" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<path d="M 520 440 L 520 580" stroke="#388e3c" fill="none" stroke-width="3" marker-end="url(#ah-green)" opacity="1"/>
<text x="520" y="520" font-size="20" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">(Opcion√°lis)</text>
<text x="100" y="558" font-size="18" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">‚Üë Webhooks (Push)</text>
<text x="960" y="558" font-size="18" fill="#388e3c" text-anchor="end" class="excalidraw-text" opacity="1">‚Üì API Pull (Queries)</text>
<rect x="60" y="920" width="500" height="100" stroke="#424242" fill="#fafafa" stroke-width="1" rx="0" opacity="1"/>
<text x="80" y="944" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Jelmagyar√°zat:</text>
<text x="80" y="960.8" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚îÄ‚îÄ‚îÄ Szil√°rd vonal: KGC ERP bels≈ë kapcsolat</text>
<text x="80" y="977.6" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">- - - Szaggatott: Opcion√°lis Support modul integr√°ci√≥</text>
<text x="80" y="994.4" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">      Z√∂ld h√°tt√©r: Integration Layer (plugin manager)</text>
</svg></div>

                        <div class="details-box mt-4" x-data="{ open: false }">
                            <button @click="open = !open" class="w-full text-left font-semibold flex justify-between items-center">
                                <span>üìù Architekt√∫ra R√©szletek</span>
                                <span x-text="open ? '‚ñº' : '‚ñ∂'"></span>
                            </button>
                            <div x-show="open" x-collapse class="mt-3 text-sm space-y-2">
                                <p><strong>KGC ERP CORE:</strong></p>
                                <ul class="list-disc list-inside pl-4 space-y-1">
                                    <li>5 alap modul: B√©rl√©s, √ârt√©kes√≠t√©s, Szerviz, √úgyf√©lkezel√©s, Dolgoz√≥kezel√©s</li>
                                    <li>Teljesen f√ºggetlen m≈±k√∂d√©s (Support modul n√©lk√ºl is)</li>
                                </ul>

                                <p><strong>Integration Layer:</strong></p>
                                <ul class="list-disc list-inside pl-4 space-y-1">
                                    <li>Plugin Discovery: Felismeri az el√©rhet≈ë plugin-okat</li>
                                    <li>Runtime Enable/Disable: Feature flag alap√∫ kapcsol√°s</li>
                                    <li>API Gateway & Webhook Registry: Routing √©s event management</li>
                                </ul>

                                <p><strong>Support Module Plugin (Opcion√°lis):</strong></p>
                                <ul class="list-disc list-inside pl-4 space-y-1">
                                    <li><strong>Chatwoot Integration:</strong> Widget, Email, Discord</li>
                                    <li><strong>Context Manager + Gemini AI:</strong> Tud√°sb√°zis, Cache, Memory, KGC API Client</li>
                                    <li><strong>Calendar Service:</strong> Google Calendar, Id≈ëpont foglal√°s</li>
                                </ul>

                                <p><strong>Feature Flag:</strong></p>
                                <ul class="list-disc list-inside pl-4 space-y-1">
                                    <li><code class="bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded">SUPPORT_MODULE_ENABLED=true/false</code></li>
                                    <li>Admin UI-b√≥l runtime kapcsolhat√≥</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- SUPPORT MODULE - DATAFLOW DIAGRAM -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'support-dataflow'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üìä Adatfolyam Diagram (DFD)</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">KGC ‚Üî Support adat √°raml√°s √©s integr√°ci√≥</p>
                    </div>

                    <div class="diagram-container">
                        <div class="explanation-box mb-4">
                            <p class="text-sm"><strong>üìä Diagram T√≠pus:</strong> Data Flow Diagram (DFD)</p>
                            <p class="text-sm mt-1"><strong>üéØ C√©l:</strong> Bemutatni a konkr√©t adat√°raml√°st a KGC ERP √©s Support modul k√∂z√∂tt (API Pull + Webhook Push).</p>
                        </div>

                        <div class="diagram-wrapper"><svg xmlns="http://www.w3.org/2000/svg" viewBox="20 -20 1190 1000" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah2" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue2" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green2" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange2" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="20" y="-20" width="1190" height="1000" fill="#ffffff"/>
<text x="590" y="48" font-size="28" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">KGC-Support Adatfolyam Diagram (DFD)</text>
<rect x="60" y="120" width="180" height="100" stroke="#e65100" fill="#fff3e0" stroke-width="3" rx="0" opacity="1"/>
<text x="150" y="177" font-size="20" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">√úgyf√©l</text>
<ellipse cx="440" cy="170" rx="100" ry="70" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" opacity="1"/>
<text x="440" y="161" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P1</text>
<text x="440" y="180.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Chatbot</text>
<text x="440" y="199.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Feldolgoz√°s</text>
<ellipse cx="740" cy="170" rx="100" ry="70" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" opacity="1"/>
<text x="740" y="161" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P2</text>
<text x="740" y="180.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Context Manager</text>
<text x="740" y="199.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">+ AI Query</text>
<ellipse cx="1060" cy="170" rx="100" ry="70" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="1060" y="161" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P3</text>
<text x="1060" y="180.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">KGC ERP</text>
<text x="1060" y="199.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">API Gateway</text>
<rect x="960" y="320" width="200" height="100" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="1060" y="361" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">D1</text>
<text x="1060" y="380.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">KGC Database</text>
<text x="1060" y="399.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(PostgreSQL)</text>
<rect x="340" y="320" width="200" height="100" stroke="#388e3c" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="440" y="361" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">D2</text>
<text x="440" y="380.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Support Memory</text>
<text x="440" y="399.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">(Redis + Files)</text>
<ellipse cx="740" cy="590" rx="100" ry="70" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="740" y="581" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P4</text>
<text x="740" y="600.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Webhook</text>
<text x="740" y="619.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">Handler</text>
<ellipse cx="440" cy="590" rx="100" ry="70" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" opacity="1"/>
<text x="440" y="581" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">P5</text>
<text x="440" y="600.2" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">√ârtes√≠t√©s</text>
<text x="440" y="619.4" font-size="16" fill="#1e1e1e" text-anchor="middle" class="excalidraw-text" opacity="1">K√ºld√©s</text>
<path d="M 240 170 L 340 170" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue2)" opacity="1"/>
<text x="290" y="154" font-size="14" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">1. K√©rd√©s</text>
<path d="M 540 170 L 640 170" stroke="#7b1fa2" fill="none" stroke-width="2" marker-end="url(#ah2)" opacity="1"/>
<text x="590" y="154" font-size="14" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">2. AI Query</text>
<path d="M 840 170 L 960 170" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue2)" opacity="1"/>
<text x="900" y="147" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">3. API Pull</text>
<text x="900" y="161.4" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">(GET /api/...)</text>
<path d="M 1060 240 L 1060 320" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green2)" opacity="1"/>
<text x="1070" y="272" font-size="12" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">4. Read:</text>
<text x="1070" y="286.4" font-size="12" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">√úgyf√©l,</text>
<text x="1070" y="300.8" font-size="12" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">Munkalap,</text>
<text x="1070" y="315.2" font-size="12" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">Rendel√©s</text>
<path d="M 640 230 L 480 320" stroke="#7b1fa2" fill="none" stroke-width="2" marker-end="url(#ah2)" opacity="1"/>
<text x="590" y="267" font-size="12" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">5. Save:</text>
<text x="590" y="281.4" font-size="12" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Chat</text>
<text x="590" y="295.8" font-size="12" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">History</text>
<path d="M 340 190 L 240 190" stroke="#388e3c" fill="none" stroke-width="2" marker-end="url(#ah-green2)" opacity="1"/>
<text x="290" y="214" font-size="14" fill="#388e3c" text-anchor="middle" class="excalidraw-text" opacity="1">6. V√°lasz</text>
<path d="M 960 370 L 760 540" stroke="#f57c00" fill="none" stroke-width="3" marker-end="url(#ah-orange2)" opacity="1"/>
<text x="830" y="437" font-size="12" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">7. Webhook</text>
<text x="830" y="451.4" font-size="12" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">   Push:</text>
<text x="830" y="465.8" font-size="12" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">   order.arrived,</text>
<text x="830" y="480.2" font-size="12" fill="#f57c00" text-anchor="start" class="excalidraw-text" opacity="1">   repair.done</text>
<path d="M 640 590 L 540 590" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange2)" opacity="1"/>
<text x="590" y="572" font-size="12" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">8. Format</text>
<text x="590" y="586.4" font-size="12" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">   Notification</text>
<path d="M 340 570 L 160 200" stroke="#388e3c" fill="none" stroke-width="3" marker-end="url(#ah-green2)" opacity="1"/>
<text x="180" y="367" font-size="12" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">9. √ârtes√≠t√©s:</text>
<text x="180" y="381.4" font-size="12" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">   SMS/Email/</text>
<text x="180" y="395.8" font-size="12" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">   Chat Widget</text>
<text x="180" y="410.2" font-size="12" fill="#388e3c" text-anchor="start" class="excalidraw-text" opacity="1">   &quot;√Åru be√©rkezett&quot;</text>
<text x="60" y="740" font-size="20" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Jelmagyar√°zat:</text>
<text x="60" y="774" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚óã Ellipszis (Px): Folyamat (Process)</text>
<text x="60" y="790.8" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚ñ° T√©glalap (Dx): Adatt√°r (Data Store)</text>
<text x="60" y="807.6" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚ñ° T√©glalap (vastag keret): K√ºls≈ë Entit√°s (External Entity)</text>
<text x="60" y="824.4" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="60" y="841.2" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">K√©k: KGC ERP adatfolyamok</text>
<text x="60" y="858" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Lila: Support AI adatfolyamok</text>
<text x="60" y="874.8" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Narancs: Webhook push esem√©ny</text>
<text x="60" y="891.6" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Z√∂ld: V√°lasz/√ârtes√≠t√©s az √ºgyf√©lnek</text>
<text x="700" y="740" font-size="20" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Use Case P√©ld√°k:</text>
<text x="700" y="774" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Lek√©rdez√©s (1-6): &quot;Hol tart a szerviz munk√°m?&quot;</text>
<text x="700" y="790.8" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Üí Chatbot lek√©rdezi KGC API-b√≥l a munkalap st√°tuszt</text>
<text x="700" y="807.6" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1"></text>
<text x="700" y="824.4" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">Push √ârtes√≠t√©s (7-9): Rendel√©s be√©rkezik</text>
<text x="700" y="841.2" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Üí KGC ERP webhook-ot k√ºld Support-nak</text>
<text x="700" y="858" font-size="14" fill="#1e1e1e" text-anchor="start" class="excalidraw-text" opacity="1">‚Üí Support automatikusan √©rtes√≠ti az √ºgyfelet</text>
</svg></div>

                        <div class="details-box mt-4" x-data="{ open: false }">
                            <button @click="open = !open" class="w-full text-left font-semibold flex justify-between items-center">
                                <span>üìù Adatfolyam R√©szletek</span>
                                <span x-text="open ? '‚ñº' : '‚ñ∂'"></span>
                            </button>
                            <div x-show="open" x-collapse class="mt-3 text-sm space-y-3">
                                <div>
                                    <p class="font-semibold text-blue-600 dark:text-blue-400">üîµ Lek√©rdez√©s Folyamat (Pull - 1-6 l√©p√©s):</p>
                                    <ol class="list-decimal list-inside pl-4 space-y-1 mt-1">
                                        <li>√úgyf√©l k√©rd√©st tesz fel a chatbot-nak (pl. "Hol tart a szerviz munk√°m?")</li>
                                        <li>Chatbot feldolgoz√°s (P1): Nyelvfelismer√©s, intent detection</li>
                                        <li>Context Manager + AI Query (P2): Gemini API h√≠v√°s + context</li>
                                        <li>KGC ERP API Gateway (P3): API endpoint routing</li>
                                        <li>KGC Database (D1) olvas√°s: Munkalap, √úgyf√©l, Rendel√©s adatok</li>
                                        <li>V√°lasz vissza√∫t az √ºgyf√©lhez</li>
                                    </ol>
                                </div>

                                <div>
                                    <p class="font-semibold text-orange-600 dark:text-orange-400">üü† Push √ârtes√≠t√©s Folyamat (Webhook - 7-9 l√©p√©s):</p>
                                    <ol class="list-decimal list-inside pl-4 space-y-1 mt-1" start="7">
                                        <li>KGC DB v√°ltoz√°s (pl. rendel√©s be√©rkezett) ‚Üí Webhook trigger</li>
                                        <li>Webhook Handler (P4) fogadja √©s form√°zza az √©rtes√≠t√©st</li>
                                        <li>√ârtes√≠t√©s K√ºld√©s (P5): SMS/Email/Chat widget</li>
                                    </ol>
                                </div>

                                <div>
                                    <p class="font-semibold text-purple-600 dark:text-purple-400">üü£ Adatt√°rol√°s:</p>
                                    <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                                        <li><strong>D1 (KGC Database):</strong> PostgreSQL - ERP t√∂rzsadatok</li>
                                        <li><strong>D2 (Support Memory):</strong> Redis + Files - Chat history, √ºgyf√©l preferenci√°k</li>
                                    </ul>
                                </div>

                                <div>
                                    <p class="font-semibold text-green-600 dark:text-green-400">üü¢ Use Case P√©ld√°k:</p>
                                    <ul class="list-disc list-inside pl-4 space-y-1 mt-1">
                                        <li><strong>Szerviz st√°tusz:</strong> "M-2025-0123 munk√°m hol tart?" ‚Üí Chatbot lek√©rdezi, v√°laszol: "Diagnosztika f√°zisban, becs√ºlt k√©szs√©g: 12/30"</li>
                                        <li><strong>Rendel√©s be√©rkezett:</strong> KGC ERP webhook ‚Üí Support √©rtes√≠t: "Makita f√∫r√≥ be√©rkezett, √°tvehet≈ë!"</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- SUPPORT MODULE - DOCUMENTATION -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'support-docs'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üìö Support Modul Dokument√°ci√≥</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">Integr√°ci√≥s architekt√∫ra, API specifik√°ci√≥, deployment √∫tmutat√≥k</p>
                    </div>

                    <!-- Main Documentation Link -->
                    <div class="bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-lg p-6 border-l-4 border-purple-500">
                        <h3 class="text-xl font-bold mb-3">üìÑ F≈ë Dokumentum</h3>
                        <p class="font-semibold text-purple-600 dark:text-purple-400 mb-1">KGC-Support Integr√°ci√≥s Architekt√∫ra (69 oldal)</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 mb-3">Teljes technikai specifik√°ci√≥: Plugin architekt√∫ra, API-k, Webhooks, Deployment, Biztons√°g, Tesztel√©s</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">üìÅ F√°jl: docs/ERP/Support/KGC-SUPPORT-INTEGRATION-ARCHITECTURE.md</p>
                    </div>

                    <!-- Documentation Sections -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow">
                            <h3 class="font-semibold mb-3">üîå Architekt√∫r√°lis Elvek</h3>
                            <ul class="text-sm space-y-2 text-gray-600 dark:text-gray-400">
                                <li>‚Ä¢ Plugin Architekt√∫ra</li>
                                <li>‚Ä¢ API-First integr√°ci√≥ (RESTful)</li>
                                <li>‚Ä¢ Event-Driven Notifications (Webhooks)</li>
                                <li>‚Ä¢ Feature Flags (runtime switching)</li>
                            </ul>
                        </div>

                        <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow">
                            <h3 class="font-semibold mb-3">üõ°Ô∏è Biztons√°g</h3>
                            <ul class="text-sm space-y-2 text-gray-600 dark:text-gray-400">
                                <li>‚Ä¢ API Key autentik√°ci√≥</li>
                                <li>‚Ä¢ Webhook HMAC signature</li>
                                <li>‚Ä¢ GDPR cascade delete</li>
                                <li>‚Ä¢ Minim√°lis adatcsere elv</li>
                            </ul>
                        </div>

                        <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow">
                            <h3 class="font-semibold mb-3">üöÄ Deployment</h3>
                            <ul class="text-sm space-y-2 text-gray-600 dark:text-gray-400">
                                <li>‚Ä¢ Docker Compose (k√ºl√∂n stack-ek)</li>
                                <li>‚Ä¢ On-Premise franchise telep√≠t√©s</li>
                                <li>‚Ä¢ Plugin Lifecycle management</li>
                                <li>‚Ä¢ Health Check monitoring</li>
                            </ul>
                        </div>

                        <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow">
                            <h3 class="font-semibold mb-3">üß™ Tesztel√©s</h3>
                            <ul class="text-sm space-y-2 text-gray-600 dark:text-gray-400">
                                <li>‚Ä¢ Unit tesztek (webhook, API)</li>
                                <li>‚Ä¢ Integr√°ci√≥ tesztek</li>
                                <li>‚Ä¢ E2E forgat√≥k√∂nyvek</li>
                                <li>‚Ä¢ Graceful degradation tesztek</li>
                            </ul>
                        </div>
                    </div>

                    <!-- API Endpoints -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-bold mb-4">üåê API V√©gpontok (6 db)</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-100 dark:bg-gray-700">
                                    <tr>
                                        <th class="text-left p-2">Endpoint</th>
                                        <th class="text-left p-2">Method</th>
                                        <th class="text-left p-2">Le√≠r√°s</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                    <tr>
                                        <td class="p-2"><code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-xs">/api/customers/by-phone/{phone}</code></td>
                                        <td class="p-2"><span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded text-xs">GET</span></td>
                                        <td class="p-2">√úgyf√©l info telefonsz√°m alapj√°n</td>
                                    </tr>
                                    <tr>
                                        <td class="p-2"><code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-xs">/api/rentals/{rental_id}/status</code></td>
                                        <td class="p-2"><span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded text-xs">GET</span></td>
                                        <td class="p-2">B√©rl√©s aktu√°lis st√°tusza</td>
                                    </tr>
                                    <tr>
                                        <td class="p-2"><code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-xs">/api/service/worklogs/{worklog_id}/status</code></td>
                                        <td class="p-2"><span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded text-xs">GET</span></td>
                                        <td class="p-2">Munkalap st√°tusz + becs√ºlt k√©szs√©g</td>
                                    </tr>
                                    <tr>
                                        <td class="p-2"><code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-xs">/api/orders/{order_id}/status</code></td>
                                        <td class="p-2"><span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded text-xs">GET</span></td>
                                        <td class="p-2">Rendel√©s st√°tusz</td>
                                    </tr>
                                    <tr>
                                        <td class="p-2"><code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-xs">/api/inventory/check</code></td>
                                        <td class="p-2"><span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded text-xs">GET</span></td>
                                        <td class="p-2">K√©szlet el√©rhet≈ës√©g rakt√°rank√©nt</td>
                                    </tr>
                                    <tr>
                                        <td class="p-2"><code class="bg-gray-100 dark:bg-gray-700 px-1 rounded text-xs">/api/service/appointments</code></td>
                                        <td class="p-2"><span class="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-0.5 rounded text-xs">POST</span></td>
                                        <td class="p-2">Id≈ëpont foglal√°s (opcion√°lis)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Webhooks -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-bold mb-4">üì° Webhook Esem√©nyek (5 db)</h3>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
                                <span class="text-2xl">üì¶</span>
                                <div>
                                    <p class="font-semibold">rental.started / rental.ended</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">B√©rl√©s ind√≠t√°s/visszav√©tel esem√©nyek</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                <span class="text-2xl">üîß</span>
                                <div>
                                    <p class="font-semibold">service.quote_ready / service.repair_done</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Szerviz √°raj√°nlat/jav√≠t√°s k√©sz</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                                <span class="text-2xl">üì¨</span>
                                <div>
                                    <p class="font-semibold">order.arrived</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Rendel√©s be√©rkez√©s √©rtes√≠t√©s</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Implementation Timeline -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-bold mb-4">üìÖ Implement√°ci√≥s √útemterv (4 f√°zis)</h3>
                        <div class="space-y-3">
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-20 text-center">
                                    <span class="inline-block bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full text-sm font-semibold">1 h√©t</span>
                                </div>
                                <div>
                                    <p class="font-semibold">F√°zis 1: Alapok</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Feature flag, 3 alap API, webhook skeleton, Docker setup</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-20 text-center">
                                    <span class="inline-block bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-3 py-1 rounded-full text-sm font-semibold">1 h√©t</span>
                                </div>
                                <div>
                                    <p class="font-semibold">F√°zis 2: Webhook Integr√°ci√≥</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">5 webhook implement√°ci√≥, event handler-ek, autentik√°ci√≥</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-20 text-center">
                                    <span class="inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-3 py-1 rounded-full text-sm font-semibold">1 h√©t</span>
                                </div>
                                <div>
                                    <p class="font-semibold">F√°zis 3: Tud√°sb√°zis & Finomhangol√°s</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">KGC knowledge base, chatbot persona, Admin UI, monitoring</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-20 text-center">
                                    <span class="inline-block bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 px-3 py-1 rounded-full text-sm font-semibold">1 h√©t</span>
                                </div>
                                <div>
                                    <p class="font-semibold">F√°zis 4: Tesztel√©s & √âles√≠t√©s</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Integr√°ci√≥ tesztek, E2E, performance, pilot telep√≠t√©s</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- SUPPORT MODULE - FULL DOCUMENTATION (PDF) -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'support-full-doc'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold">üìÑ Teljes Integr√°ci√≥s Specifik√°ci√≥</h2>
                                <p class="text-gray-600 dark:text-gray-400 mt-2">KGC-Support Rendszer Integr√°ci√≥s Architekt√∫ra - 69 oldal (v1.0)</p>
                            </div>
                            <button onclick="window.print()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2 no-print">
                                üì• Let√∂lt√©s PDF-k√©nt
                            </button>
                        </div>
                    </div>

                    <!-- Full Documentation Content -->
                    <div id="full-documentation" class="bg-white dark:bg-gray-800 rounded-lg p-8 shadow prose dark:prose-invert max-w-none">
                        <style>
                            @media print {
                                body * { visibility: hidden; }
                                #full-documentation, #full-documentation * { visibility: visible; }
                                #full-documentation { position: absolute; left: 0; top: 0; width: 100%; }
                                .no-print { display: none !important; }
                            }
                            .prose h1 { font-size: 2em; font-weight: bold; margin-top: 1.5em; margin-bottom: 0.5em; }
                            .prose h2 { font-size: 1.75em; font-weight: bold; margin-top: 1.25em; margin-bottom: 0.5em; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.25em; }
                            .dark .prose h2 { border-bottom-color: #4b5563; }
                            .prose h3 { font-size: 1.5em; font-weight: 600; margin-top: 1em; margin-bottom: 0.5em; }
                            .prose h4 { font-size: 1.25em; font-weight: 600; margin-top: 0.75em; margin-bottom: 0.5em; }
                            .prose code { background: #f3f4f6; padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-size: 0.9em; }
                            .dark .prose code { background: #374151; }
                            .prose pre { background: #f9fafb; color: #1f2937; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; border: 1px solid #e5e7eb; }
                            .dark .prose pre { background: #1f2937; color: #f3f4f6; border-color: #374151; }
                            .prose table { width: 100%; border-collapse: collapse; margin: 1em 0; }
                            .prose th { background: #f3f4f6; padding: 0.5rem; text-align: left; border: 1px solid #e5e7eb; font-weight: 600; }
                            .prose td { padding: 0.5rem; border: 1px solid #e5e7eb; }
                            .dark .prose th { background: #374151; border-color: #4b5563; }
                            .dark .prose td { border-color: #4b5563; }
                            .prose ul, .prose ol { margin-left: 1.5em; margin-top: 0.5em; margin-bottom: 0.5em; }
                            .prose li { margin-bottom: 0.25em; }
                            .prose blockquote { border-left: 4px solid #7b1fa2; padding-left: 1em; margin: 1em 0; font-style: italic; }
                        </style>

                        <h1>KGC-Support Rendszer Integr√°ci√≥s Architekt√∫ra</h1>

                        <p><strong>Szerz≈ë:</strong> Winston (Architect √ºgyn√∂k)<br>
                        <strong>D√°tum:</strong> 2025-12-28<br>
                        <strong>Verzi√≥:</strong> 1.0<br>
                        <strong>St√°tusz:</strong> Tervezet</p>

                        <hr>

                        <h2>Executive Summary</h2>

                        <p>Ez a dokumentum defini√°lja a <strong>Kok√≥ AI Support rendszer</strong> integr√°l√°s√°t a <strong>KGC ERP v2</strong> rendszerbe <strong>√∂n√°ll√≥, ki-bekapcsolhat√≥ modulk√©nt</strong>. Az integr√°ci√≥ c√©lja, hogy a Support modul:</p>

                        <ol>
                            <li><strong>Opcion√°lis legyen</strong> - A KGC ERP m≈±k√∂dj√∂n Support modul n√©lk√ºl is</li>
                            <li><strong>Plugink√©nt</strong> viselkedjen - Runtime enable/disable t√°mogat√°s</li>
                            <li><strong>Laz√°n csatol√≥djon</strong> - API-alap√∫ integr√°ci√≥, minim√°lis f√ºgg≈ës√©g</li>
                            <li><strong>Adatokat megosson</strong> - Relev√°ns ERP adatok el√©r√©se a Support rendszer sz√°m√°ra</li>
                            <li><strong>√ârt√©ket adjon</strong> - 24/7 √ºgyf√©lszolg√°lat, szerviz st√°tusz lek√©rdez√©s, id≈ëpontfoglal√°s</li>
                        </ol>

                        <hr>

                        <h2>1. Architekt√∫r√°lis Elvek</h2>

                        <h3>1.1 Plugin Architekt√∫ra</h3>

                        <pre><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         KGC ERP CORE                                 ‚îÇ
‚îÇ                   (F√ºggetlen a Support-t√≥l)                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ  B√©rl√©s   ‚îÇ  ‚îÇ √ârt√©kes√≠t√©s‚îÇ  ‚îÇ  Szerviz  ‚îÇ  ‚îÇ  P√©nz√ºgy  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  Modul    ‚îÇ  ‚îÇ   Modul    ‚îÇ  ‚îÇ   Modul   ‚îÇ  ‚îÇ   Modul   ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ   ‚îÇ          Integration Layer (Plugin Manager)               ‚îÇ     ‚îÇ
‚îÇ   ‚îÇ                                                            ‚îÇ     ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Plugin Discovery                                        ‚îÇ     ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Runtime Enable/Disable                                 ‚îÇ     ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ API Gateway Routing                                    ‚îÇ     ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Webhook Registry                                       ‚îÇ     ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                           ‚îÇ                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº (Optional)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     SUPPORT MODULE PLUGIN                            ‚îÇ
‚îÇ                      (Kok√≥ AI System)                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ  Chatwoot      ‚îÇ  ‚îÇ Context Manager‚îÇ  ‚îÇ Calendar       ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  Integration   ‚îÇ  ‚îÇ + Gemini AI    ‚îÇ  ‚îÇ Service        ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ   Support modul st√°tusz: ENABLED / DISABLED                         ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>

                        <h3>1.2 Integr√°ci√≥ M√≥dszerei</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>M√≥d</th>
                                    <th>Le√≠r√°s</th>
                                    <th>Haszn√°lat</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>API-First</strong></td>
                                    <td>RESTful API v√©gpontok a KGC ERP-ben</td>
                                    <td>Support lek√©rdez√©sek (szerviz st√°tusz, √ºgyf√©l info)</td>
                                </tr>
                                <tr>
                                    <td><strong>Webhook Push</strong></td>
                                    <td>KGC ERP esem√©nyeket k√ºld a Support-nak</td>
                                    <td>Munkalap v√°ltoz√°s, be√©rkez√©s √©rtes√≠t√©s</td>
                                </tr>
                                <tr>
                                    <td><strong>Shared Data Store</strong></td>
                                    <td>K√∂z√∂s Redis/DB view n√©h√°ny entit√°shoz</td>
                                    <td>Val√≥s idej≈± cache (opcion√°lis)</td>
                                </tr>
                                <tr>
                                    <td><strong>Feature Flags</strong></td>
                                    <td>Runtime ki/be kapcsol√°s</td>
                                    <td><code>SUPPORT_MODULE_ENABLED=true/false</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <hr>

                        <h2>2. Integr√°ci√≥s Pontok a KGC ERP Folyamataiban</h2>

                        <h3>2.1 B√©rl√©s Modul</h3>

                        <p><strong>Integr√°ci√≥s Pont:</strong> B√©rl√©s st√°tusz lek√©rdez√©s, k√©s√©s √©rtes√≠t√©s</p>

                        <table>
                            <thead>
                                <tr>
                                    <th>KGC ERP Funkci√≥</th>
                                    <th>Support Integr√°ci√≥</th>
                                    <th>API Endpoint</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>B√©rl√©s ind√≠t√°sa</td>
                                    <td>Automatikus √ºdv√∂zl≈ë √ºzenet (opcion√°lis)</td>
                                    <td><code>POST /api/support/notifications/rental-started</code></td>
                                </tr>
                                <tr>
                                    <td>K√©s√©s bek√∂vetkez√©se</td>
                                    <td>Chatbot tud v√°laszolni k√©s√©s st√°tuszr√≥l</td>
                                    <td><code>GET /api/rentals/{rental_id}/status</code></td>
                                </tr>
                                <tr>
                                    <td>Visszav√©tel</td>
                                    <td>El√©gedetts√©gi k√©rd≈ë√≠v trigger (opcion√°lis)</td>
                                    <td><code>POST /api/support/notifications/rental-ended</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>2.2 Szerviz Modul</h3>

                        <p><strong>Integr√°ci√≥s Pont:</strong> Munkalap st√°tusz k√∂vet√©s, id≈ëpontfoglal√°s</p>

                        <table>
                            <thead>
                                <tr>
                                    <th>KGC ERP Funkci√≥</th>
                                    <th>Support Integr√°ci√≥</th>
                                    <th>API Endpoint</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Munkalap felv√©tel</td>
                                    <td>Chatbot keres + el≈ëjegyez id≈ëpontot</td>
                                    <td><code>POST /api/service/appointments</code></td>
                                </tr>
                                <tr>
                                    <td>Diagnosztika k√©sz</td>
                                    <td>Automatikus √©rtes√≠t√©s: "√Åraj√°nlat k√©sz"</td>
                                    <td><code>POST /api/support/notifications/quote-ready</code></td>
                                </tr>
                                <tr>
                                    <td>Jav√≠t√°s k√©sz</td>
                                    <td>Automatikus √©rtes√≠t√©s: "G√©p √°tvehet≈ë"</td>
                                    <td><code>POST /api/support/notifications/repair-done</code></td>
                                </tr>
                                <tr>
                                    <td>St√°tusz lek√©rdez√©s</td>
                                    <td>Chatbot v√°laszol: "Munkalap M-123 diagnosztik√°ban"</td>
                                    <td><code>GET /api/service/worklogs/{worklog_id}/status</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>2.3 √ârt√©kes√≠t√©s/Megrendel√©s Modul</h3>

                        <p><strong>Integr√°ci√≥s Pont:</strong> Rendel√©s st√°tusz, √°ru be√©rkez√©s</p>

                        <table>
                            <thead>
                                <tr>
                                    <th>KGC ERP Funkci√≥</th>
                                    <th>Support Integr√°ci√≥</th>
                                    <th>API Endpoint</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Megrendel√©s felv√©tel</td>
                                    <td>Chatbot t√°j√©koztat v√°rhat√≥ id≈ër≈ël</td>
                                    <td><code>GET /api/orders/{order_id}/estimated-arrival</code></td>
                                </tr>
                                <tr>
                                    <td>√Åru be√©rkezik</td>
                                    <td>Automatikus √©rtes√≠t√©s SMS/Email/Chat</td>
                                    <td><code>POST /api/support/notifications/order-arrived</code></td>
                                </tr>
                                <tr>
                                    <td>K√©szlet lek√©rdez√©s</td>
                                    <td>"Van-e rakt√°ron X term√©k?"</td>
                                    <td><code>GET /api/inventory/check?sku={sku}&location={location}</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>2.4 √úgyf√©lkezel√©s</h3>

                        <p><strong>Integr√°ci√≥s Pont:</strong> √úgyf√©l autentik√°ci√≥, kontakt info</p>

                        <table>
                            <thead>
                                <tr>
                                    <th>KGC ERP Funkci√≥</th>
                                    <th>Support Integr√°ci√≥</th>
                                    <th>API Endpoint</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Partner keres√©s</td>
                                    <td>Chatbot azonos√≠t telefonsz√°m alapj√°n</td>
                                    <td><code>GET /api/customers/by-phone/{phone}</code></td>
                                </tr>
                                <tr>
                                    <td>Duplik√°ci√≥ ellen≈ërz√©s</td>
                                    <td>Support javasol merge-t ha duplumot tal√°l</td>
                                    <td><code>GET /api/customers/duplicates?name={name}&phone={phone}</code></td>
                                </tr>
                                <tr>
                                    <td>GDPR t√∂rl√©s</td>
                                    <td>Support mem√≥ria is t√∂rl≈ëdik</td>
                                    <td><code>DELETE /api/customers/{customer_id}</code> (cascade)</td>
                                </tr>
                            </tbody>
                        </table>

                        <hr>

                        <h2>3. Plugin Menedzsment</h2>

                        <h3>3.1 Konfigur√°ci√≥ (Feature Flag)</h3>

                        <p><strong>K√∂rnyezeti v√°ltoz√≥k (KGC ERP):</strong></p>

                        <pre><code># .env f√°jl
SUPPORT_MODULE_ENABLED=true              # Plugin akt√≠v/inakt√≠v
SUPPORT_API_URL=http://localhost:5001    # Kok√≥ ai-chatbot URL
SUPPORT_CONTEXT_URL=http://localhost:5004 # Kok√≥ context-manager URL
SUPPORT_API_KEY=secret_key_here          # API autentik√°ci√≥
SUPPORT_WEBHOOK_SECRET=webhook_secret    # Webhook valid√°ci√≥</code></pre>

                        <h3>3.2 Plugin Lifecycle</h3>

                        <pre><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  PLUGIN LIFECYCLE                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. DISCOVERY
   ‚îú‚îÄ KGC ERP bootol√°skor ellen≈ërzi: SUPPORT_MODULE_ENABLED
   ‚îú‚îÄ Ha true ‚Üí pr√≥b√°l kapcsol√≥dni SUPPORT_API_URL/health
   ‚îî‚îÄ Ha sikeres ‚Üí Plugin status: ACTIVE

2. RUNTIME ENABLE
   ‚îú‚îÄ Admin UI: "Support modul bekapcsol√°sa"
   ‚îú‚îÄ Friss√≠ti .env f√°jlt vagy DB config-ot
   ‚îú‚îÄ √öjraolvassa konfigur√°ci√≥t (no restart needed)
   ‚îî‚îÄ Webhook subscription: KGC ‚Üí Support

3. RUNTIME DISABLE
   ‚îú‚îÄ Admin UI: "Support modul kikapcsol√°sa"
   ‚îú‚îÄ SUPPORT_MODULE_ENABLED = false
   ‚îú‚îÄ Le√°ll√≠tja webhook k√ºld√©seket
   ‚îî‚îÄ Support API h√≠v√°sok kimaradnak (graceful degradation)

4. HEALTH CHECK
   ‚îú‚îÄ Periodikus: GET /api/support/health (minden 5 perc)
   ‚îú‚îÄ Ha DOWN ‚Üí Admin warning, de KGC ERP m≈±k√∂dik tov√°bb
   ‚îî‚îÄ Ha UP ‚Üí Plugin status: HEALTHY</code></pre>

                        <hr>

                        <h2>4. API Specifik√°ci√≥</h2>

                        <h3>4.1 Support ‚Üí KGC ERP (Pull API)</h3>

                        <p>Chatbot lek√©rdez√©sekhez readonly API-k:</p>

                        <table>
                            <thead>
                                <tr>
                                    <th>Endpoint</th>
                                    <th>Method</th>
                                    <th>Le√≠r√°s</th>
                                    <th>Auth</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>/api/customers/by-phone/{phone}</code></td>
                                    <td>GET</td>
                                    <td>√úgyf√©l info telefonsz√°m alapj√°n</td>
                                    <td>API Key</td>
                                </tr>
                                <tr>
                                    <td><code>/api/rentals/{rental_id}/status</code></td>
                                    <td>GET</td>
                                    <td>B√©rl√©s aktu√°lis st√°tusza</td>
                                    <td>API Key</td>
                                </tr>
                                <tr>
                                    <td><code>/api/service/worklogs/{worklog_id}/status</code></td>
                                    <td>GET</td>
                                    <td>Munkalap st√°tusz + becs√ºlt k√©szs√©g</td>
                                    <td>API Key</td>
                                </tr>
                                <tr>
                                    <td><code>/api/orders/{order_id}/status</code></td>
                                    <td>GET</td>
                                    <td>Rendel√©s st√°tusz</td>
                                    <td>API Key</td>
                                </tr>
                                <tr>
                                    <td><code>/api/inventory/check</code></td>
                                    <td>GET</td>
                                    <td>K√©szlet el√©rhet≈ës√©g rakt√°rank√©nt</td>
                                    <td>API Key</td>
                                </tr>
                                <tr>
                                    <td><code>/api/service/appointments</code></td>
                                    <td>POST</td>
                                    <td>Id≈ëpont foglal√°s (ha enged√©lyezett)</td>
                                    <td>API Key</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>4.2 KGC ERP ‚Üí Support (Push Webhook)</h3>

                        <p>Support modul feliratkozik KGC ERP esem√©nyekre:</p>

                        <table>
                            <thead>
                                <tr>
                                    <th>Event</th>
                                    <th>Webhook URL</th>
                                    <th>Payload</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>rental.started</code></td>
                                    <td><code>/webhook/kgc/rental-started</code></td>
                                    <td><code>{rental_id, customer, machine}</code></td>
                                </tr>
                                <tr>
                                    <td><code>rental.ended</code></td>
                                    <td><code>/webhook/kgc/rental-ended</code></td>
                                    <td><code>{rental_id, customer, satisfaction_survey}</code></td>
                                </tr>
                                <tr>
                                    <td><code>service.quote_ready</code></td>
                                    <td><code>/webhook/kgc/quote-ready</code></td>
                                    <td><code>{worklog_id, customer, quote_amount}</code></td>
                                </tr>
                                <tr>
                                    <td><code>service.repair_done</code></td>
                                    <td><code>/webhook/kgc/repair-done</code></td>
                                    <td><code>{worklog_id, customer, pickup_info}</code></td>
                                </tr>
                                <tr>
                                    <td><code>order.arrived</code></td>
                                    <td><code>/webhook/kgc/order-arrived</code></td>
                                    <td><code>{order_id, customer, items[]}</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <hr>

                        <h2>5. Deployment Architekt√∫ra</h2>

                        <h3>5.1 Docker Compose Integr√°ci√≥</h3>

                        <p><strong>Opci√≥ A: K√ºl√∂n stack-ek (Recommended)</strong></p>

                        <pre><code># KGC ERP - docker-compose.yml
version: '3.8'
services:
  kgc-api:
    image: kgc-erp-api:latest
    environment:
      - SUPPORT_MODULE_ENABLED=true
      - SUPPORT_API_URL=http://support-chatbot:5001
      - SUPPORT_API_KEY=${SUPPORT_API_KEY}
    networks:
      - kgc-network
      - support-integration  # K√∂z√∂s h√°l√≥zat

# Support - docker-compose.support.yml
version: '3.8'
services:
  support-chatbot:
    image: koko-ai-chatbot:latest
    environment:
      - KGC_API_URL=http://kgc-api:3000
      - KGC_API_KEY=${KGC_API_KEY}
    networks:
      - support-network
      - support-integration  # K√∂z√∂s h√°l√≥zat</code></pre>

                        <hr>

                        <h2>6. Biztons√°gi Megfontol√°sok</h2>

                        <h3>6.1 API Autentik√°ci√≥</h3>

                        <p><strong>API Key gener√°l√°s:</strong></p>
                        <ul>
                            <li>Admin UI: "Support integr√°ci√≥" men√º ‚Üí "API Key gener√°l√°s"</li>
                            <li>Key scope: <code>support:read</code> (csak readonly m≈±veletek)</li>
                            <li>Rotation: 90 naponta, vagy revoke gomb</li>
                        </ul>

                        <h3>6.2 Adatv√©delem (GDPR)</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>Adat T√≠pus</th>
                                    <th>√Åtad√°s?</th>
                                    <th>Indokl√°s</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>√úgyf√©l n√©v, telefon</td>
                                    <td>‚úÖ Igen</td>
                                    <td>Azonos√≠t√°shoz sz√ºks√©ges</td>
                                </tr>
                                <tr>
                                    <td>Email</td>
                                    <td>‚úÖ Igen</td>
                                    <td>√ârtes√≠t√©shez sz√ºks√©ges</td>
                                </tr>
                                <tr>
                                    <td>B√©rl√©si/szerviz st√°tusz</td>
                                    <td>‚úÖ Igen</td>
                                    <td>Chatbot v√°laszhoz sz√ºks√©ges</td>
                                </tr>
                                <tr>
                                    <td>NAV ad√≥sz√°m</td>
                                    <td>‚ùå Nem</td>
                                    <td>√ârz√©keny, nem kell a chatbot-nak</td>
                                </tr>
                                <tr>
                                    <td>Szem√©lyi igazolv√°ny sz√°m</td>
                                    <td>‚ùå Nem</td>
                                    <td>√ârz√©keny, nem kell</td>
                                </tr>
                            </tbody>
                        </table>

                        <hr>

                        <h2>7. K√∂lts√©gbecsl√©s</h2>

                        <h3>7.1 Support Modul √územeltet√©si K√∂lts√©gek</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>Komponens</th>
                                    <th>Havi K√∂lts√©g</th>
                                    <th>Megjegyz√©s</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Gemini API</strong></td>
                                    <td>$15-30</td>
                                    <td>~10,000 chatbot interakci√≥/h√≥ (context cache 75% kedvezm√©ny)</td>
                                </tr>
                                <tr>
                                    <td><strong>Chatwoot</strong></td>
                                    <td>$0 (self-hosted)</td>
                                    <td>Docker alap√∫, saj√°t szerver</td>
                                </tr>
                                <tr>
                                    <td><strong>OpenAI Whisper</strong></td>
                                    <td>$5-10</td>
                                    <td>Hang√ºzenet transzkripci√≥ (alacsony volumen)</td>
                                </tr>
                                <tr>
                                    <td><strong>SMS √©rtes√≠t√©sek</strong></td>
                                    <td>$20-50</td>
                                    <td>~500 SMS/h√≥ (opcion√°lis)</td>
                                </tr>
                            </tbody>
                        </table>

                        <p><strong>√ñsszesen:</strong> ~$40-110/h√≥ <strong>franchise partner-enk√©nt</strong></p>

                        <h3>7.2 Fejleszt√©si K√∂lts√©gbecsl√©s</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>Feladat</th>
                                    <th>Effort</th>
                                    <th>Felel≈ës</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>KGC ERP API endpoint-ok</td>
                                    <td>2 nap</td>
                                    <td>Backend dev</td>
                                </tr>
                                <tr>
                                    <td>KGC ERP webhook integr√°ci√≥</td>
                                    <td>1 nap</td>
                                    <td>Backend dev</td>
                                </tr>
                                <tr>
                                    <td>Admin UI - Plugin Manager</td>
                                    <td>1 nap</td>
                                    <td>Frontend dev</td>
                                </tr>
                                <tr>
                                    <td>Support webhook handler-ek</td>
                                    <td>1 nap</td>
                                    <td>Support dev</td>
                                </tr>
                                <tr>
                                    <td>Integr√°ci√≥ tesztek</td>
                                    <td>1 nap</td>
                                    <td>QA + Dev</td>
                                </tr>
                            </tbody>
                        </table>

                        <p><strong>√ñsszesen:</strong> ~7 fejleszt≈ëi nap (~$3,500-7,000 one-time)</p>

                        <hr>

                        <h2>8. Implement√°ci√≥s √útemterv</h2>

                        <h3>F√°zis 1: Alapok (1 h√©t)</h3>
                        <ul>
                            <li>KGC ERP: Feature flag infrastrukt√∫ra</li>
                            <li>KGC ERP: 3 alap API (customers, rentals, service)</li>
                            <li>Support: Webhook handler skeleton</li>
                            <li>Docker compose friss√≠t√©s (k√ºl√∂n stack-ek)</li>
                        </ul>

                        <h3>F√°zis 2: Webhook Integr√°ci√≥ (1 h√©t)</h3>
                        <ul>
                            <li>KGC ERP: 5 webhook implement√°ci√≥</li>
                            <li>Support: KGC event handler-ek</li>
                            <li>API/Webhook autentik√°ci√≥</li>
                            <li>Teszt k√∂rnyezet setup</li>
                        </ul>

                        <h3>F√°zis 3: Tud√°sb√°zis √©s Finomhangol√°s (1 h√©t)</h3>
                        <ul>
                            <li>Support: KGC-specifikus knowledge base</li>
                            <li>Chatbot persona finomhangol√°s (KGC brand voice)</li>
                            <li>Admin UI: Plugin Manager</li>
                            <li>Health check + monitoring</li>
                        </ul>

                        <h3>F√°zis 4: Tesztel√©s √©s √âles√≠t√©s (1 h√©t)</h3>
                        <ul>
                            <li>Integr√°ci√≥ tesztek</li>
                            <li>E2E tesztek val√≥s adatokkal</li>
                            <li>Performance tesztek</li>
                            <li>Dokument√°ci√≥ (admin + user guide)</li>
                            <li>Pilot telep√≠t√©s 1 franchise partner-n√©l</li>
                        </ul>

                        <hr>

                        <h2>9. K√∂vetkeztet√©sek</h2>

                        <h3>Kulcs D√∂nt√©sek</h3>

                        <ol>
                            <li><strong>Plugin Architekt√∫ra</strong> ‚úÖ - Support modul teljesen opcion√°lis, runtime enable/disable</li>
                            <li><strong>API-First Integr√°ci√≥</strong> ‚úÖ - Loose coupling, KGC ERP f√ºggetlen marad</li>
                            <li><strong>Event-Driven Notifications</strong> ‚úÖ - Push webhook-ok real-time √©rtes√≠t√©sekhez</li>
                            <li><strong>Graceful Degradation</strong> ‚úÖ - Support hiba nem blokkolja a KGC ERP-t</li>
                            <li><strong>GDPR Cascade</strong> ‚úÖ - √úgyf√©l t√∂rl√©s automatikusan propag√°l√≥dik</li>
                        </ol>

                        <h3>√ârt√©kn√∂vel√©s a KGC ERP-hez</h3>

                        <ul>
                            <li><strong>√úgyf√©l √©lm√©ny:</strong> 24/7 chatbot t√°mogat√°s, automatikus √©rtes√≠t√©sek</li>
                            <li><strong>Hat√©konys√°g:</strong> Adminok id≈ët takar√≠tanak meg (st√°tusz lek√©rdez√©sek, id≈ëpontfoglal√°s)</li>
                            <li><strong>Bev√©tel:</strong> White Label lehet≈ës√©g - Support modul k√ºl√∂n √°rk√©pz√©ssel √©rt√©kes√≠thet≈ë</li>
                            <li><strong>Franchise vonzer≈ë:</strong> Modern, AI-alap√∫ √ºgyf√©lszolg√°lat vonzza a partnereket</li>
                        </ul>

                        <hr>

                        <p style="text-align: center; margin-top: 3em; color: #6b7280;">
                            <strong>Dokumentum Verzi√≥:</strong> 1.0<br>
                            <strong>Utols√≥ Friss√≠t√©s:</strong> 2025-12-28<br>
                            <strong>K√∂vetkez≈ë Review:</strong> 2025-01-15
                        </p>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- CRM MODULE - OVERVIEW -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'crm-overview'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üìä CRM Modul - √Åttekint√©s</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">Twenty CRM integr√°ci√≥ a KGC ERP rendszerbe</p>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üéØ Strat√©giai C√©lok</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">1. Plugin Architekt√∫ra</h4>
                                <p class="text-sm">Opcion√°lis modul, runtime enable/disable t√°mogat√°ssal</p>
                            </div>
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">2. Twenty CRM Platform</h4>
                                <p class="text-sm">Self-hosted, ny√≠lt forr√°sk√≥d√∫ CRM (GraphQL alap√∫)</p>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-2">3. Szolg√°ltat√°s El≈ëzm√©nyek</h4>
                                <p class="text-sm">B√©rl√©sek, szervizek, √©rt√©kes√≠t√©s szinkroniz√°l√°sa</p>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-2">4. Marketing Automatiz√°ci√≥</h4>
                                <p class="text-sm">Email kamp√°nyok Gmail SMTP-vel</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üèóÔ∏è Technikai Stack</h3>
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-100 dark:bg-gray-700">
                                    <th class="px-4 py-2 text-left">Komponens</th>
                                    <th class="px-4 py-2 text-left">Technol√≥gia</th>
                                    <th class="px-4 py-2 text-left">Verzi√≥/Platform</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-4 py-2"><strong>CRM Platform</strong></td>
                                    <td class="px-4 py-2">Twenty CRM</td>
                                    <td class="px-4 py-2">Open-source, Self-hosted</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2"><strong>API Layer</strong></td>
                                    <td class="px-4 py-2">GraphQL Adapter</td>
                                    <td class="px-4 py-2">Node.js service</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2"><strong>Database</strong></td>
                                    <td class="px-4 py-2">PostgreSQL</td>
                                    <td class="px-4 py-2">v14+</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2"><strong>Marketing</strong></td>
                                    <td class="px-4 py-2">Gmail SMTP</td>
                                    <td class="px-4 py-2">smtp.gmail.com</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2"><strong>Deployment</strong></td>
                                    <td class="px-4 py-2">Docker Compose</td>
                                    <td class="px-4 py-2">docker-compose.crm.yml</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üí∞ K√∂lts√©gbecsl√©s</h3>
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-100 dark:bg-gray-700">
                                    <th class="px-4 py-2 text-left">Komponens</th>
                                    <th class="px-4 py-2 text-left">Havi K√∂lts√©g</th>
                                    <th class="px-4 py-2 text-left">Megjegyz√©s</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-4 py-2">Twenty CRM</td>
                                    <td class="px-4 py-2">$0</td>
                                    <td class="px-4 py-2">Self-hosted, open-source</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2">PostgreSQL DB</td>
                                    <td class="px-4 py-2">$0</td>
                                    <td class="px-4 py-2">Megosztott KGC szerverrel</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2">Gmail SMTP</td>
                                    <td class="px-4 py-2">$0</td>
                                    <td class="px-4 py-2">Ingyenes (500 email/nap)</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2">Szerver</td>
                                    <td class="px-4 py-2">+$0-30</td>
                                    <td class="px-4 py-2">Ha extra kapacit√°s kell</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2">Backup</td>
                                    <td class="px-4 py-2">$5-10</td>
                                    <td class="px-4 py-2">CRM DB backup</td>
                                </tr>
                                <tr class="bg-teal-50 dark:bg-teal-900">
                                    <td class="px-4 py-2"><strong>√ñSSZESEN</strong></td>
                                    <td class="px-4 py-2"><strong>$5-40/h√≥</strong></td>
                                    <td class="px-4 py-2"><strong>franchise partner-enk√©nt</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- CRM MODULE - ARCHITECTURE DIAGRAM -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'crm-architecture'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üèóÔ∏è CRM Plugin Architekt√∫ra Diagram</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">KGC ERP CORE + CRM Module Plugin (Twenty) fel√©p√≠t√©se</p>
                    </div>

                    <div class="diagram-container">
                        <div class="explanation-box mb-4">
                            <p class="text-sm"><strong>üìä Diagram T√≠pus:</strong> Rendszer Architekt√∫ra</p>
                            <p class="text-sm mt-1"><strong>üéØ C√©l:</strong> Plugin-alap√∫ CRM integr√°ci√≥, GraphQL Adapter r√©teggel √©s Gmail SMTP email marketinggel.</p>
                        </div>

                        <div class="diagram-wrapper"><svg xmlns="http://www.w3.org/2000/svg" viewBox="60 60 880 960" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="60" y="60" width="880" height="960" fill="#ffffff"/>
<rect x="100" y="100" width="800" height="180" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="520" y="135" font-size="20" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">KGC ERP CORE</text>
<rect x="130" y="160" width="160" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="210" y="203" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">B√©rl√©s</text>
<text x="210" y="222.2" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Modul</text>
<rect x="310" y="160" width="160" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="390" y="203" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">√ârt√©kes√≠t√©s</text>
<text x="390" y="222.2" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Modul</text>
<rect x="490" y="160" width="160" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="570" y="203" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Szerviz</text>
<text x="570" y="222.2" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Modul</text>
<rect x="670" y="160" width="160" height="80" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" rx="0" opacity="1"/>
<text x="750" y="203" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">√úgyf√©lkez.</text>
<text x="750" y="222.2" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Modul</text>
<rect x="100" y="340" width="800" height="160" stroke="#2e7d32" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="505" y="375" font-size="20" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">Integration Layer (Plugin Manager)</text>
<text x="150" y="409" font-size="14" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Plugin Discovery          ‚Ä¢ Runtime Enable/Disable</text>
<text x="150" y="425.8" font-size="14" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ API Gateway Routing     ‚Ä¢ Webhook Registry</text>
<text x="150" y="442.6" font-size="14" fill="#2e7d32" text-anchor="start" class="excalidraw-text" opacity="1">‚Ä¢ Data Sync Manager      ‚Ä¢ Feature Flag Management</text>
<path d="M 500 280 L 500 340" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<rect x="350" y="540" width="300" height="50" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="0" opacity="1"/>
<text x="500" y="568" font-size="16" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">CRM_MODULE_ENABLED</text>
<path d="M 500 500 L 500 640" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<rect x="100" y="640" width="800" height="200" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" rx="0" opacity="1"/>
<text x="500" y="675" font-size="20" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">CRM MODULE PLUGIN (Twenty CRM)</text>
<rect x="130" y="710" width="160" height="90" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" rx="0" opacity="1"/>
<text x="210" y="758" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">GraphQL</text>
<text x="210" y="777.2" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Adapter</text>
<rect x="310" y="710" width="160" height="90" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" rx="0" opacity="1"/>
<text x="390" y="758" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Contact/Lead</text>
<text x="390" y="777.2" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Management</text>
<rect x="490" y="710" width="160" height="90" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" rx="0" opacity="1"/>
<text x="570" y="758" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Service</text>
<text x="570" y="777.2" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">History</text>
<rect x="670" y="710" width="160" height="90" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" rx="0" opacity="1"/>
<text x="750" y="758" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Marketing</text>
<text x="750" y="777.2" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Automation</text>
<rect x="300" y="900" width="400" height="80" stroke="#d32f2f" fill="#ffebee" stroke-width="2" rx="0" opacity="1"/>
<text x="500" y="947" font-size="20" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Email: Gmail SMTP</text>
<path d="M 500 840 L 500 900" stroke="#7b1fa2" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
</svg></div>

                        <div class="details-box mt-4">
                            <h4 class="font-semibold mb-2">üìñ Komponensek Magyar√°zata</h4>
                            <ul class="text-sm space-y-1">
                                <li><strong>KGC ERP CORE:</strong> 5 f≈ë modul (B√©rl√©s, √ârt√©kes√≠t√©s, Szerviz, √úgyf√©lkezel√©s, Dolgoz√≥kezel√©s) - CRM-t≈ël f√ºggetlen m≈±k√∂d√©s</li>
                                <li><strong>Integration Layer:</strong> Plugin manager, webhook registry, feature flag kezel√©s</li>
                                <li><strong>CRM_MODULE_ENABLED:</strong> Runtime on/off kapcsol√≥ - opcion√°lis modul</li>
                                <li><strong>Twenty CRM:</strong> GraphQL alap√∫ CRM platform 4 komponenssel</li>
                                <li><strong>GraphQL Adapter:</strong> REST (KGC) ‚Üí GraphQL (Twenty) ford√≠t√°s</li>
                                <li><strong>Gmail SMTP:</strong> Email marketing ingyenes SMTP-n kereszt√ºl</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- CRM MODULE - DATAFLOW DIAGRAM -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'crm-dataflow'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üìä CRM Adatfolyam (DFD) Diagram</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">Data Flow: KGC ‚Üí GraphQL Adapter ‚Üí Twenty CRM ‚Üí Gmail SMTP</p>
                    </div>

                    <div class="diagram-container">
                        <div class="explanation-box mb-4">
                            <p class="text-sm"><strong>üìä Diagram T√≠pus:</strong> Data Flow Diagram (DFD)</p>
                            <p class="text-sm mt-1"><strong>üéØ C√©l:</strong> Webhook-alap√∫ esem√©nyvez√©relt adat√°raml√°s bemutat√°sa a KGC modulokb√≥l a CRM-be.</p>
                        </div>

                        <div class="diagram-wrapper"><svg xmlns="http://www.w3.org/2000/svg" viewBox="60 10 1240 1030" class="w-full h-auto">
<defs>
<style>.excalidraw-text { font-family: Segoe UI, Arial, sans-serif; }</style>
<marker id="ah" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1e1e1e"/>
</marker>
<marker id="ah-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#1976d2"/>
</marker>
<marker id="ah-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#388e3c"/>
</marker>
<marker id="ah-orange" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#f57c00"/>
</marker>
</defs>
<rect x="60" y="10" width="1240" height="1030" fill="#ffffff"/>
<text x="550" y="78" font-size="28" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">CRM Adatfolyam (Data Flow Diagram)</text>
<ellipse cx="190" cy="200" rx="90" ry="50" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="190" y="203" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">KGC</text>
<text x="190" y="222.2" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">√úgyf√©lkez.</text>
<ellipse cx="190" cy="350" rx="90" ry="50" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="190" y="353" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">KGC</text>
<text x="190" y="372.2" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">B√©rl√©s</text>
<ellipse cx="190" cy="500" rx="90" ry="50" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="190" y="503" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">KGC</text>
<text x="190" y="522.2" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Szerviz</text>
<ellipse cx="190" cy="650" rx="90" ry="50" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="190" y="653" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">KGC</text>
<text x="190" y="672.2" font-size="16" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">√ârt√©kes√≠t√©s</text>
<rect x="400" y="350" width="220" height="120" stroke="#2e7d32" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="510" y="391" font-size="16" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">GraphQL Adapter</text>
<text x="510" y="410.2" font-size="16" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="510" y="429.4" font-size="16" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ REST ‚Üí GraphQL</text>
<text x="510" y="448.6" font-size="16" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Data Transform</text>
<path d="M 280 200 L 400 380" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="350" y="262" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Webhook:</text>
<text x="350" y="276.4" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">customer.created</text>
<text x="350" y="290.8" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">customer.updated</text>
<path d="M 280 350 L 400 390" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="340" y="362" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Webhook:</text>
<text x="340" y="376.4" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">rental.completed</text>
<path d="M 280 500 L 400 460" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="340" y="477" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Webhook:</text>
<text x="340" y="491.4" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">service.completed</text>
<path d="M 280 650 L 400 470" stroke="#1976d2" fill="none" stroke-width="2" marker-end="url(#ah-blue)" opacity="1"/>
<text x="340" y="542" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">Webhook:</text>
<text x="340" y="556.4" font-size="12" fill="#1976d2" text-anchor="middle" class="excalidraw-text" opacity="1">sale.completed</text>
<rect x="740" y="350" width="240" height="120" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" rx="0" opacity="1"/>
<text x="860" y="381" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Twenty CRM DB</text>
<text x="860" y="400.2" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="860" y="419.4" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Contacts</text>
<text x="860" y="438.6" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Rental History</text>
<text x="860" y="457.8" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Service History</text>
<text x="860" y="477" font-size="16" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Sales History</text>
<path d="M 620 410 L 740 410" stroke="#2e7d32" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="680" y="392" font-size="12" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">GraphQL</text>
<text x="680" y="406.4" font-size="12" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">Mutation:</text>
<text x="680" y="420.8" font-size="12" fill="#2e7d32" text-anchor="middle" class="excalidraw-text" opacity="1">create/update</text>
<rect x="740" y="550" width="240" height="100" stroke="#f57c00" fill="#fff3e0" stroke-width="2" rx="0" opacity="1"/>
<text x="860" y="586" font-size="16" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">Marketing</text>
<text x="860" y="605.2" font-size="16" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">Automation</text>
<text x="860" y="624.4" font-size="16" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1"></text>
<text x="860" y="643.6" font-size="16" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Contact Tagging</text>
<text x="860" y="662.8" font-size="16" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">‚Ä¢ Campaign Trigger</text>
<path d="M 860 470 L 860 550" stroke="#7b1fa2" fill="none" stroke-width="2" marker-end="url(#ah)" opacity="1"/>
<text x="915" y="512" font-size="12" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">Event:</text>
<text x="915" y="526.4" font-size="12" fill="#7b1fa2" text-anchor="middle" class="excalidraw-text" opacity="1">contact.updated</text>
<ellipse cx="1170" cy="600" rx="90" ry="50" stroke="#d32f2f" fill="#ffebee" stroke-width="2" opacity="1"/>
<text x="1170" y="603" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">Gmail</text>
<text x="1170" y="622.2" font-size="16" fill="#d32f2f" text-anchor="middle" class="excalidraw-text" opacity="1">SMTP</text>
<path d="M 980 600 L 1080 600" stroke="#f57c00" fill="none" stroke-width="2" marker-end="url(#ah-orange)" opacity="1"/>
<text x="1030" y="582" font-size="12" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">REST API:</text>
<text x="1030" y="596.4" font-size="12" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">add_contact</text>
<text x="1030" y="610.8" font-size="12" fill="#f57c00" text-anchor="middle" class="excalidraw-text" opacity="1">trigger_campaign</text>
<text x="100" y="788" font-size="18" fill="#000000" text-anchor="start" class="excalidraw-text" opacity="1">Jelmagyar√°zat:</text>
<ellipse cx="140" cy="835" rx="40" ry="25" stroke="#1976d2" fill="#e3f2fd" stroke-width="2" opacity="1"/>
<text x="190" y="839" font-size="14" fill="#000000" text-anchor="start" class="excalidraw-text" opacity="1">= External Entity (KGC modul)</text>
<rect x="100" y="880" width="80" height="50" stroke="#2e7d32" fill="#e8f5e9" stroke-width="2" rx="0" opacity="1"/>
<text x="190" y="909" font-size="14" fill="#000000" text-anchor="start" class="excalidraw-text" opacity="1">= Process (feldolgoz√°s)</text>
<rect x="100" y="950" width="80" height="50" stroke="#7b1fa2" fill="#f3e5f5" stroke-width="2" rx="0" opacity="1"/>
<text x="190" y="979" font-size="14" fill="#000000" text-anchor="start" class="excalidraw-text" opacity="1">= Data Store (adatt√°r)</text>
</svg></div>

                        <div class="details-box mt-4">
                            <h4 class="font-semibold mb-2">üìñ Adatfolyamok Magyar√°zata</h4>
                            <ul class="text-sm space-y-1">
                                <li><strong>customer.created/updated:</strong> √öj √ºgyf√©l vagy m√≥dos√≠t√°s ‚Üí CRM Contact l√©trehoz√°s/friss√≠t√©s</li>
                                <li><strong>rental.completed:</strong> B√©rl√©s lez√°rva ‚Üí B√©rl√©si t√∂rt√©net bejegyz√©s CRM-ben</li>
                                <li><strong>service.completed:</strong> Szerviz munk√°lap k√©sz ‚Üí Szerviz t√∂rt√©net bejegyz√©s CRM-ben</li>
                                <li><strong>sale.completed:</strong> √ârt√©kes√≠t√©s lez√°rva ‚Üí Elad√°si t√∂rt√©net bejegyz√©s CRM-ben</li>
                                <li><strong>contact.updated:</strong> CRM-ben kontakt v√°ltoz√°s ‚Üí Marketing automation trigger (tagging, campaign)</li>
                                <li><strong>Gmail SMTP:</strong> Email k√ºld√©s, template-alap√∫ kamp√°nyok, nodemailer</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- CRM MODULE - DOCUMENTATION SUMMARY -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'crm-docs'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üìö CRM Dokument√°ci√≥ √ñsszefoglal√≥</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">Gyors referencia: KGC-CRM integr√°ci√≥ kulcspontok</p>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üîó Integr√°ci√≥s Pontok</h3>
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-100 dark:bg-gray-700">
                                    <th class="px-4 py-2 text-left">KGC Modul</th>
                                    <th class="px-4 py-2 text-left">CRM Integr√°ci√≥</th>
                                    <th class="px-4 py-2 text-left">Webhook</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-4 py-2">√úgyf√©lkezel√©s</td>
                                    <td class="px-4 py-2">Contact/Lead l√©trehoz√°s</td>
                                    <td class="px-4 py-2"><code>customer.created</code></td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2">B√©rl√©s</td>
                                    <td class="px-4 py-2">Rental History sync</td>
                                    <td class="px-4 py-2"><code>rental.completed</code></td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2">Szerviz</td>
                                    <td class="px-4 py-2">Service History sync</td>
                                    <td class="px-4 py-2"><code>service.completed</code></td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2">√ârt√©kes√≠t√©s</td>
                                    <td class="px-4 py-2">Sales History sync</td>
                                    <td class="px-4 py-2"><code>sale.completed</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üöÄ Telep√≠t√©si L√©p√©sek</h3>
                        <div class="space-y-3">
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-1">1. Docker Compose Setup</h4>
                                <pre class="text-xs bg-gray-100 dark:bg-gray-900 p-2 rounded mt-1"><code>docker-compose -f docker-compose.crm.yml up -d</code></pre>
                            </div>
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-1">2. Twenty CRM Konfigur√°ci√≥</h4>
                                <pre class="text-xs bg-gray-100 dark:bg-gray-900 p-2 rounded mt-1"><code>PG_DATABASE_URL=postgresql://twenty:password@crm-db:5432/twenty
FRONT_BASE_URL=http://localhost:3000</code></pre>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-1">3. GraphQL Adapter Deploy</h4>
                                <pre class="text-xs bg-gray-100 dark:bg-gray-900 p-2 rounded mt-1"><code>KGC_API_URL=http://kgc-api:3000
CRM_GRAPHQL_ENDPOINT=http://twenty-crm:3000/graphql</code></pre>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-1">4. Gmail SMTP Konfigur√°l√°s</h4>
                                <pre class="text-xs bg-gray-100 dark:bg-gray-900 p-2 rounded mt-1"><code>GMAIL_USER=kgc-crm@gmail.com
GMAIL_APP_PASSWORD=your_app_password_here</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">‚ö†Ô∏è Kritikus Megfontol√°sok</h3>
                        <div class="space-y-2">
                            <div class="bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-500 p-3 rounded">
                                <p class="text-sm"><strong>GDPR:</strong> Cascade delete t√°mogat√°s k√∂telez≈ë - √ºgyf√©l t√∂rl√©skor CRM adatok is t√∂rl≈ëdnek</p>
                            </div>
                            <div class="bg-blue-50 dark:bg-blue-900 border-l-4 border-blue-500 p-3 rounded">
                                <p class="text-sm"><strong>KGC Master:</strong> Partner adatok mindig KGC-ben j√∂nnek l√©tre, CRM read-only view</p>
                            </div>
                            <div class="bg-green-50 dark:bg-green-900 border-l-4 border-green-500 p-3 rounded">
                                <p class="text-sm"><strong>Graceful Degradation:</strong> CRM le√°ll√°s nem blokkolja a KGC m≈±k√∂d√©s√©t</p>
                            </div>
                            <div class="bg-purple-50 dark:bg-purple-900 border-l-4 border-purple-500 p-3 rounded">
                                <p class="text-sm"><strong>Feature Flag:</strong> <code>CRM_MODULE_ENABLED=true/false</code> runtime kapcsol√°s</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- CRM MODULE - FULL DOCUMENTATION -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'crm-full-doc'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold">üìÑ Teljes CRM Integr√°ci√≥s Specifik√°ci√≥</h2>
                                <p class="text-gray-600 dark:text-gray-400 mt-2">KGC-CRM Rendszer Integr√°ci√≥s Architekt√∫ra - 70+ oldal (v1.0)</p>
                            </div>
                            <button onclick="window.print()" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 flex items-center gap-2 no-print">
                                üì• Let√∂lt√©s PDF-k√©nt
                            </button>
                        </div>
                    </div>

                    <!-- Full Documentation Content -->
                    <div id="crm-full-documentation" class="bg-white dark:bg-gray-800 rounded-lg p-8 shadow prose dark:prose-invert max-w-none">
                        <style>
                            @media print {
                                body * { visibility: hidden; }
                                #crm-full-documentation, #crm-full-documentation * { visibility: visible; }
                                #crm-full-documentation { position: absolute; left: 0; top: 0; width: 100%; }
                                .no-print { display: none !important; }
                            }
                        </style>

                        <h1>KGC-CRM Rendszer Integr√°ci√≥s Architekt√∫ra</h1>

                        <p><strong>Szerz≈ë:</strong> Winston (Architect √ºgyn√∂k)<br>
                        <strong>D√°tum:</strong> 2025-12-28<br>
                        <strong>Verzi√≥:</strong> 1.0<br>
                        <strong>St√°tusz:</strong> Tervezet</p>

                        <hr>

                        <p><em>Ez a dokumentum r√©szletesen bemutatja a Twenty CRM integr√°ci√≥ architekt√∫r√°j√°t a KGC ERP rendszerbe. A teljes specifik√°ci√≥ megtal√°lhat√≥: <code>/docs/ERP/CRM/KGC-CRM-INTEGRATION-ARCHITECTURE.md</code></em></p>

                        <h2>Executive Summary</h2>

                        <p>A KGC ERP rendszer CRM modulja egy <strong>opcion√°lis, plugin-alap√∫ integr√°ci√≥</strong>, amely a Twenty CRM open-source platformot haszn√°lja √ºgyf√©lkapcsolat-kezel√©sre √©s marketing automatiz√°ci√≥ra.</p>

                        <h3>Kulcs K√∂vetelm√©nyek</h3>

                        <ol>
                            <li><strong>Opcion√°lis legyen</strong> - A KGC ERP m≈±k√∂dj√∂n CRM modul n√©lk√ºl is</li>
                            <li><strong>Plugink√©nt</strong> viselkedjen - Runtime enable/disable t√°mogat√°s</li>
                            <li><strong>Laz√°n csatol√≥djon</strong> - API-alap√∫ integr√°ci√≥, minim√°lis f√ºgg≈ës√©g</li>
                            <li><strong>Szolg√°ltat√°s el≈ëzm√©nyeket szinkroniz√°ljon</strong> - B√©rl√©sek, szervizek, √©rt√©kes√≠t√©s CRM-be</li>
                            <li><strong>Marketing automatiz√°ci√≥t t√°mogasson</strong> - Email kamp√°nyok, √ºgyf√©l szegment√°ci√≥</li>
                            <li><strong>KGC legyen a master</strong> - Partner adatok KGC-ben j√∂nnek l√©tre, CRM read-only view</li>
                        </ol>

                        <h2>1. Modul √Åttekint√©s</h2>

                        <h3>1.1 Twenty CRM Platform</h3>

                        <p><strong>Twenty CRM</strong> egy modern, ny√≠lt forr√°sk√≥d√∫ CRM rendszer GraphQL API-val.</p>

                        <ul>
                            <li><strong>Repository:</strong> <a href="https://github.com/twentyhq/twenty" target="_blank">github.com/twentyhq/twenty</a></li>
                            <li><strong>License:</strong> AGPL-3.0 (self-hosted, teljes testreszab√°s)</li>
                            <li><strong>Technol√≥gia:</strong> Node.js, PostgreSQL, GraphQL</li>
                            <li><strong>Deployment:</strong> Docker Compose</li>
                        </ul>

                        <h3>1.2 GraphQL Adapter Architekt√∫ra</h3>

                        <p>A KGC REST API √©s a Twenty GraphQL API k√∂z√∂tti ford√≠t√≥r√©teg:</p>

                        <pre><code>KGC REST API (webhooks)
    ‚Üì
GraphQL Adapter (Node.js service)
    ‚Üì
Twenty CRM (GraphQL mutations)</code></pre>

                        <h3>1.3 Marketing Automatiz√°ci√≥</h3>

                        <p><strong>Gmail SMTP konfigur√°ci√≥</strong> email kamp√°nyokhoz:</p>

                        <ul>
                            <li>Contact szinkroniz√°l√°s KGC ‚Üí Mailchimp</li>
                            <li>Automatikus tagging (√∫j √ºgyf√©l, akt√≠v b√©rl≈ë, VIP, stb.)</li>
                            <li>Campaign trigger (b√©rl√©s lez√°rva ‚Üí el√©gedetts√©gi k√©rd≈ë√≠v)</li>
                        </ul>

                        <h2>2. Integr√°ci√≥s Pontok</h2>

                        <h3>2.1 √úgyf√©lkezel√©s Modul</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>KGC Esem√©ny</th>
                                    <th>CRM M≈±velet</th>
                                    <th>GraphQL Mutation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>customer.created</td>
                                    <td>CRM Contact l√©trehoz√°s</td>
                                    <td><code>createKGCContact</code></td>
                                </tr>
                                <tr>
                                    <td>customer.updated</td>
                                    <td>CRM Contact friss√≠t√©s</td>
                                    <td><code>updateKGCContact</code></td>
                                </tr>
                                <tr>
                                    <td>customer.deleted</td>
                                    <td>CRM Contact t√∂rl√©s (GDPR)</td>
                                    <td><code>deleteKGCContact</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>2.2 B√©rl√©s Modul</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>KGC Esem√©ny</th>
                                    <th>CRM M≈±velet</th>
                                    <th>GraphQL Mutation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>rental.completed</td>
                                    <td>Rental History bejegyz√©s</td>
                                    <td><code>createRentalRecord</code></td>
                                </tr>
                                <tr>
                                    <td>rental.cancelled</td>
                                    <td>Rental Record update</td>
                                    <td><code>updateRentalRecord</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>2.3 Szerviz Modul</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>KGC Esem√©ny</th>
                                    <th>CRM M≈±velet</th>
                                    <th>GraphQL Mutation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>service.completed</td>
                                    <td>Service History bejegyz√©s</td>
                                    <td><code>createServiceRecord</code></td>
                                </tr>
                                <tr>
                                    <td>service.quote_sent</td>
                                    <td>Service Record note</td>
                                    <td><code>addServiceNote</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>2.4 √ârt√©kes√≠t√©s Modul</h3>

                        <table>
                            <thead>
                                <tr>
                                    <th>KGC Esem√©ny</th>
                                    <th>CRM M≈±velet</th>
                                    <th>GraphQL Mutation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>sale.completed</td>
                                    <td>Sales History bejegyz√©s</td>
                                    <td><code>createSalesRecord</code></td>
                                </tr>
                                <tr>
                                    <td>sale.invoice_paid</td>
                                    <td>Sales Record update</td>
                                    <td><code>updateSalesRecord</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <h2>3. Deployment & Konfigur√°ci√≥</h2>

                        <h3>3.1 Docker Compose Konfigur√°ci√≥</h3>

                        <pre><code># docker-compose.crm.yml
version: '3.8'
services:
  twenty-crm:
    image: twentyhq/twenty:latest
    environment:
      - PG_DATABASE_URL=postgresql://twenty:password@crm-db:5432/twenty
      - FRONT_BASE_URL=http://localhost:3000
      - SERVER_URL=http://localhost:3000
    ports:
      - "3000:3000"
    networks:
      - crm-network
      - crm-integration
    depends_on:
      - crm-db

  crm-graphql-adapter:
    image: kgc-crm-adapter:latest
    environment:
      - KGC_API_URL=http://kgc-api:3000
      - CRM_GRAPHQL_ENDPOINT=http://twenty-crm:3000/graphql
      - CRM_API_KEY=${CRM_API_KEY}
      - MAILCHIMP_API_KEY=${MAILCHIMP_API_KEY}
    networks:
      - crm-integration

  crm-db:
    image: postgres:14-alpine
    environment:
      - POSTGRES_DB=twenty
      - POSTGRES_USER=twenty
      - POSTGRES_PASSWORD=password
    volumes:
      - crm-db-data:/var/lib/postgresql/data
    networks:
      - crm-network

networks:
  crm-network:
    internal: true
  crm-integration:
    external: true

volumes:
  crm-db-data:</code></pre>

                        <h3>3.2 Feature Flag Konfigur√°ci√≥</h3>

                        <pre><code># .env f√°jl
CRM_MODULE_ENABLED=true

# KGC API k√∂rnyezeti v√°ltoz√≥
export CRM_MODULE_ENABLED=true</code></pre>

                        <h3>3.3 Mailchimp Setup</h3>

                        <pre><code># Mailchimp API konfigur√°l√°s
MAILCHIMP_API_KEY=your_api_key_here
MAILCHIMP_LIST_ID=your_audience_id
MAILCHIMP_SERVER_PREFIX=us1  # pl. us1, us2, stb.</code></pre>

                        <h2>4. Biztons√°gi Megfontol√°sok</h2>

                        <h3>4.1 GDPR Compliance</h3>

                        <ul>
                            <li><strong>Cascade Delete:</strong> KGC √ºgyf√©l t√∂rl√©sekor CRM adatok is t√∂rl≈ëdnek</li>
                            <li><strong>Data Minimization:</strong> Csak sz√ºks√©ges adatok szinkroniz√°l√°sa</li>
                            <li><strong>Encryption:</strong> HTTPS/TLS minden API h√≠v√°shoz</li>
                            <li><strong>Access Control:</strong> GraphQL API key authentication</li>
                        </ul>

                        <h3>4.2 API Biztons√°g</h3>

                        <ul>
                            <li><strong>Webhook Signature Validation:</strong> HMAC-SHA256 al√°√≠r√°s ellen≈ërz√©se</li>
                            <li><strong>Rate Limiting:</strong> 100 k√©r√©s/perc/partner</li>
                            <li><strong>IP Whitelist:</strong> Csak KGC szerverek IP c√≠mei</li>
                        </ul>

                        <h2>5. K√∂lts√©gbecsl√©s</h2>

                        <table>
                            <thead>
                                <tr>
                                    <th>Komponens</th>
                                    <th>Havi K√∂lts√©g</th>
                                    <th>Megjegyz√©s</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Twenty CRM</strong></td>
                                    <td>$0 (self-hosted)</td>
                                    <td>Open-source, Docker alap√∫</td>
                                </tr>
                                <tr>
                                    <td><strong>PostgreSQL Database</strong></td>
                                    <td>$0 (self-hosted)</td>
                                    <td>KGC szerverrel megosztva</td>
                                </tr>
                                <tr>
                                    <td><strong>Gmail SMTP</strong></td>
                                    <td>$20-40</td>
                                    <td>Essentials plan (~500 contacts)</td>
                                </tr>
                                <tr>
                                    <td><strong>GraphQL Adapter</strong></td>
                                    <td>$0 (self-developed)</td>
                                    <td>Node.js service</td>
                                </tr>
                                <tr>
                                    <td><strong>Szerver k√∂lts√©g</strong></td>
                                    <td>+$0-30</td>
                                    <td>Ha KGC infrastrukt√∫r√°n</td>
                                </tr>
                                <tr>
                                    <td><strong>Backup & Storage</strong></td>
                                    <td>$5-10</td>
                                    <td>CRM DB backup</td>
                                </tr>
                                <tr>
                                    <td><strong>√ñSSZESEN</strong></td>
                                    <td><strong>~$25-80/h√≥</strong></td>
                                    <td><strong>franchise partner-enk√©nt</strong></td>
                                </tr>
                            </tbody>
                        </table>

                        <h2>6. Implement√°ci√≥s Id≈ëz√≠t√©s</h2>

                        <h3>F√°zis 1: Alapinfrastrukt√∫ra (1-2 h√©t)</h3>
                        <ul>
                            <li>Twenty CRM Docker telep√≠t√©s</li>
                            <li>PostgreSQL DB setup</li>
                            <li>GraphQL Adapter skeleton</li>
                        </ul>

                        <h3>F√°zis 2: Customer Sync (1 h√©t)</h3>
                        <ul>
                            <li>customer.created/updated webhook handler</li>
                            <li>GraphQL Contact mutation implement√°ci√≥</li>
                            <li>Unit √©s integ√°ci√≥s tesztek</li>
                        </ul>

                        <h3>F√°zis 3: Service History Sync (2 h√©t)</h3>
                        <ul>
                            <li>rental.completed webhook</li>
                            <li>service.completed webhook</li>
                            <li>sale.completed webhook</li>
                            <li>GraphQL Record mutation-ok</li>
                        </ul>

                        <h3>F√°zis 4: Marketing Automatiz√°ci√≥ (1 h√©t)</h3>
                        <ul>
                            <li>Mailchimp API integr√°ci√≥</li>
                            <li>Contact tagging logic</li>
                            <li>Campaign trigger implement√°ci√≥</li>
                        </ul>

                        <h3>F√°zis 5: Tesztel√©s & Dokument√°ci√≥ (1 h√©t)</h3>
                        <ul>
                            <li>E2E tesztek</li>
                            <li>Load testing</li>
                            <li>Felhaszn√°l√≥i dokument√°ci√≥</li>
                        </ul>

                        <h3>F√°zis 6: √âles Ind√≠t√°s (1 h√©t)</h3>
                        <ul>
                            <li>Pilot deployment (1-2 franchise)</li>
                            <li>Monitoring & alerting setup</li>
                            <li>Rollout terv finaliz√°l√°sa</li>
                        </ul>

                        <p><strong>Teljes id≈ëig√©ny:</strong> 7-9 h√©t</p>

                        <hr>

                        <p style="text-align: center; margin-top: 3em; color: #6b7280;">
                            <strong>Dokumentum Verzi√≥:</strong> 1.0<br>
                            <strong>Utols√≥ Friss√≠t√©s:</strong> 2025-12-28<br>
                            <strong>K√∂vetkez≈ë Review:</strong> 2025-01-15
                        </p>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- HR MODULE - OVERVIEW -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'hr-overview'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üë• HR Modul - √Åttekint√©s</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">Horilla HRMS integr√°ci√≥ a KGC ERP rendszerbe</p>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üéØ Strat√©giai C√©lok</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">1. Plugin Architekt√∫ra</h4>
                                <p class="text-sm">Opcion√°lis modul, runtime enable/disable t√°mogat√°ssal</p>
                            </div>
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">2. Horilla HRMS Platform</h4>
                                <p class="text-sm">Self-hosted, Django-alap√∫ HR rendszer</p>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-2">3. Jelenl√©t Nyilv√°ntart√°s</h4>
                                <p class="text-sm">Attendance tracking integr√°lt munkaid≈ë kezel√©ssel</p>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-2">4. Szabads√°g Kezel√©s</h4>
                                <p class="text-sm">Leave management approval workflow-val</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üèóÔ∏è Technikai Stack</h3>
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-100 dark:bg-gray-700">
                                    <th class="px-4 py-2 text-left">Komponens</th>
                                    <th class="px-4 py-2 text-left">Technol√≥gia</th>
                                    <th class="px-4 py-2 text-left">Verzi√≥/Platform</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-4 py-2"><strong>HR Platform</strong></td>
                                    <td class="px-4 py-2">Horilla HRMS</td>
                                    <td class="px-4 py-2">Open-source (LGPL-2.1)</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2"><strong>API Layer</strong></td>
                                    <td class="px-4 py-2">Django REST Adapter</td>
                                    <td class="px-4 py-2">Python middleware</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2"><strong>Database</strong></td>
                                    <td class="px-4 py-2">PostgreSQL</td>
                                    <td class="px-4 py-2">v14+</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-2"><strong>Integration</strong></td>
                                    <td class="px-4 py-2">Webhooks + REST API</td>
                                    <td class="px-4 py-2">Event-driven sync</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üí∞ K√∂lts√©gbecsl√©s</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                                <p class="text-sm font-semibold text-green-700 dark:text-green-300">üíö K√∂lts√©g / Franchise</p>
                                <p class="text-2xl font-bold mt-2">$5-30/h√≥</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">Legolcs√≥bb modul</p>
                            </div>
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                                <p class="text-sm font-semibold text-blue-700 dark:text-blue-300">‚öôÔ∏è Infrastrukt√∫ra</p>
                                <p class="text-lg font-bold mt-2">$5-15/h√≥</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">Horilla + DB + Adapter</p>
                            </div>
                            <div class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
                                <p class="text-sm font-semibold text-purple-700 dark:text-purple-300">üìä K√ºls≈ë Szolg√°ltat√°sok</p>
                                <p class="text-lg font-bold mt-2">$0/h√≥</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">Nincs k√ºls≈ë integr√°ci√≥</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- HR MODULE - ARCHITECTURE -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'hr-architecture'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üèóÔ∏è HR Plugin Architekt√∫ra</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">A Horilla HRMS modul plugin-alap√∫ integr√°ci√≥ja</p>
                    </div>

                    <div class="diagram-container">
                        <h3 class="text-lg font-semibold mb-4">Plugin Architekt√∫ra Diagram</h3>
                        <div class="diagram-wrapper">
                            <img src="HR/hr-plugin-architecture.svg" alt="HR Plugin Architecture" style="max-width: 100%; height: auto;">
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üîç Architektur√°lis Komponensek</h3>
                        <div class="space-y-4">
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">üî∑ KGC ERP CORE</h4>
                                <p class="text-sm">5 f≈ë modul gener√°l employee esem√©nyeket (create, update, delete webhooks), k√ºl√∂n√∂sen a Dolgoz√≥kezel√©s modul.</p>
                            </div>
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">üî∂ INTEGRATION LAYER</h4>
                                <ul class="text-sm list-disc ml-4">
                                    <li><strong>Plugin Manager:</strong> Webhook routing √©s Feature Flag (HR_MODULE_ENABLED)</li>
                                    <li><strong>Django REST Adapter:</strong> Webhook ‚Üí REST API transzl√°ci√≥</li>
                                </ul>
                            </div>
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">üî∑ HR MODULE PLUGIN</h4>
                                <ul class="text-sm list-disc ml-4">
                                    <li><strong>Attendance Tracking:</strong> Check-in/out, munkaid≈ë sz√°m√≠t√°s</li>
                                    <li><strong>Leave Management:</strong> Szabads√°g k√©relmek j√≥v√°hagy√°ssal</li>
                                    <li><strong>Employee Profiles:</strong> T√∂rzsadatok (n√©v, email, role)</li>
                                    <li><strong>HR Helpdesk:</strong> Bels≈ë ticketing (k√ºl√∂n a Support-t√≥l)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- HR MODULE - DATAFLOW -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'hr-dataflow'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üìä HR Adatfolyam (DFD Level 1)</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">Horilla HRMS modul adatfolyamainak vizualiz√°ci√≥ja</p>
                    </div>

                    <div class="diagram-container">
                        <h3 class="text-lg font-semibold mb-4">Data Flow Diagram (Level 1)</h3>
                        <div class="diagram-wrapper">
                            <img src="HR/hr-dataflow.svg" alt="HR Data Flow Diagram" style="max-width: 100%; height: auto;">
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üîÑ Adatfolyam Magyar√°zat</h3>
                        <div class="space-y-4">
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">üì• Employee Events (E1 ‚Üí 1.0)</h4>
                                <p class="text-sm">KGC modulok webhook-okat k√ºldenek employee esem√©nyekr≈ël a Django REST Adapter-nek.</p>
                            </div>
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">‚öôÔ∏è API Calls (1.0 ‚Üí 2.0-5.0)</h4>
                                <p class="text-sm">Adapter REST API h√≠v√°sokat ind√≠t a 4 HR funkci√≥hoz (Attendance, Leave, Employee, Helpdesk).</p>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-2">üíæ Data Storage (2.0-5.0 ‚Üî D2)</h4>
                                <p class="text-sm">HR folyamatok k√©tir√°ny√∫ kommunik√°ci√≥ban vannak a Horilla PostgreSQL adatb√°zissal.</p>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-2">üë• User Queries (E2 ‚Üî 2.0-5.0)</h4>
                                <p class="text-sm">HR felhaszn√°l√≥k (managers, employees) lek√©rdez√©seket k√ºldenek √©s v√°laszt kapnak.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- HR MODULE - DOCUMENTATION -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'hr-docs'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üìö HR Modul Dokument√°ci√≥</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">√ñsszefoglal√≥ √©s gyors referencia</p>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üîë Kulcsfontoss√°g√∫ Integr√°ci√≥s Pontok</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">1. Employee Webhooks</h4>
                                <ul class="text-sm list-disc ml-4">
                                    <li>employee.created</li>
                                    <li>employee.updated</li>
                                    <li>employee.deleted</li>
                                </ul>
                            </div>
                            <div class="explanation-box">
                                <h4 class="font-semibold mb-2">2. Django REST Endpoints</h4>
                                <ul class="text-sm list-disc ml-4">
                                    <li>/api/employee/</li>
                                    <li>/api/attendance/</li>
                                    <li>/api/leave/</li>
                                </ul>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-2">3. Feature Flag</h4>
                                <p class="text-sm"><code>HR_MODULE_ENABLED=true</code> - Runtime enable/disable</p>
                            </div>
                            <div class="details-box">
                                <h4 class="font-semibold mb-2">4. KGC Master Pattern</h4>
                                <p class="text-sm">Employee t√∂rzsadatok mindig KGC-ben j√∂nnek l√©tre</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">üöÄ Deployment L√©p√©sek</h3>
                        <ol class="list-decimal ml-6 space-y-2">
                            <li><strong>Horilla HRMS Setup:</strong> Docker Compose deployment (PostgreSQL + Django)</li>
                            <li><strong>Django REST Adapter:</strong> Python middleware telep√≠t√©s √©s konfigur√°ci√≥</li>
                            <li><strong>KGC Plugin Manager:</strong> HR modul regisztr√°ci√≥ √©s webhook routing</li>
                            <li><strong>Feature Flag:</strong> HR_MODULE_ENABLED be√°ll√≠t√°s franchise szinten</li>
                            <li><strong>Data Sync:</strong> Kezdeti employee t√∂rzs szinkroniz√°l√°s</li>
                            <li><strong>Testing:</strong> Attendance, Leave, Helpdesk funkci√≥k tesztel√©se</li>
                        </ol>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h3 class="text-xl font-semibold mb-4">‚ö†Ô∏è Kritikus Szempontok</h3>
                        <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg">
                            <ul class="list-disc ml-4 space-y-2">
                                <li><strong>KGC Standalone:</strong> KGC m≈±k√∂dj√∂n HR modul n√©lk√ºl is</li>
                                <li><strong>Separate Helpdesks:</strong> Support Chatwoot ‚â† HR Horilla Ticketing</li>
                                <li><strong>Data Privacy:</strong> GDPR compliance, cascade delete</li>
                                <li><strong>Only T√∂rzsadatok:</strong> NINCS fizet√©s, ad√≥sz√°m, banksz√°mla Horilla-ban</li>
                                <li><strong>Graceful Degradation:</strong> HR hiba nem blokkolja KGC-t</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- ============================================= -->
                <!-- HR MODULE - FULL DOCUMENTATION -->
                <!-- ============================================= -->
                <div x-show="activeTab === 'hr-full-doc'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow">
                        <h2 class="text-2xl font-bold">üìÑ HR Modul - Teljes Specifik√°ci√≥</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">Nyomtathat√≥ verzi√≥ PDF export c√©lj√°b√≥l</p>
                        <p class="text-sm text-gray-500 mt-2">üí° Tipp: Haszn√°ld a "üñ®Ô∏è Nyomtat√°s" gombot a fejl√©cben, majd "Ment√©s PDF-k√©nt" a teljes dokumentum export√°l√°s√°hoz.</p>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow prose dark:prose-invert max-w-none" style="page-break-inside: avoid;">
                        <h1>KGC HR MODUL INTEGR√ÅCI√ìS ARCHITEKT√öRA</h1>

                        <h2>Executive Summary</h2>
                        <p>A KGC ERP rendszer HR modulja egy <strong>opcion√°lis, plugin-alap√∫ integr√°ci√≥</strong>, amely a <strong>Horilla HRMS</strong> ny√≠lt forr√°sk√≥d√∫ platformot haszn√°lja munkav√°llal√≥ adminisztr√°ci√≥ra, jelenl√©t nyilv√°ntart√°sra √©s szabads√°g kezel√©sre.</p>

                        <h3>Kulcs K√∂vetelm√©nyek</h3>
                        <ol>
                            <li><strong>Opcion√°lis legyen</strong> - A KGC ERP m≈±k√∂dj√∂n HR modul n√©lk√ºl is</li>
                            <li><strong>Plugink√©nt</strong> viselkedjen - Runtime enable/disable t√°mogat√°s</li>
                            <li><strong>Laz√°n csatol√≥djon</strong> - API-alap√∫ integr√°ci√≥, minim√°lis f√ºgg≈ës√©g</li>
                            <li><strong>Jelenl√©t nyilv√°ntart√°st t√°mogasson</strong> - Attendance tracking Horilla-ban</li>
                            <li><strong>Szabads√°g kezel√©st biztos√≠tson</strong> - Leave management √©s approval workflow</li>
                            <li><strong>Employee t√∂rzsadatokat kezeljen</strong> - Alapvet≈ë munkav√°llal√≥ info + role</li>
                            <li><strong>KGC legyen a master</strong> - Employee adatok KGC-ben j√∂nnek l√©tre</li>
                        </ol>

                        <h2>Horilla HRMS Platform</h2>
                        <p><strong>Technol√≥gia:</strong> Python + Django + PostgreSQL + Bootstrap<br>
                        <strong>Licenc:</strong> LGPL-2.1 (ny√≠lt forr√°sk√≥d√∫, kereskedelmi haszn√°latra alkalmas)<br>
                        <strong>API:</strong> Django REST Framework (nat√≠v REST API)</p>

                        <h3>Haszn√°lt Funkci√≥k</h3>
                        <ul>
                            <li><strong>Attendance Management:</strong> Check-in/check-out, hours worked calculation</li>
                            <li><strong>Leave Management:</strong> Vacation/sick leave requests with approval workflow</li>
                            <li><strong>Employee Management:</strong> Basic employee profiles (name, email, phone, role, department)</li>
                            <li><strong>Helpdesk:</strong> Internal ticketing (separate from Support Chatwoot)</li>
                        </ul>

                        <h3>NEM Haszn√°lt Funkci√≥k</h3>
                        <ul>
                            <li>‚ùå Recruitment</li>
                            <li>‚ùå Full Payroll Processing (csak t√∂rzsadatok)</li>
                            <li>‚ùå Performance Management</li>
                            <li>‚ùå Asset Management</li>
                        </ul>

                        <h2>Integr√°ci√≥s Architekt√∫ra</h2>

                        <h3>Django REST Adapter</h3>
                        <p>Python middleware service, amely KGC webhook esem√©nyeket Django REST API h√≠v√°sokk√° ford√≠t.</p>

                        <p><strong>Webhook esem√©nyek:</strong></p>
                        <ul>
                            <li><code>employee.created</code> ‚Üí POST /api/employee/</li>
                            <li><code>employee.updated</code> ‚Üí PUT /api/employee/{id}/</li>
                            <li><code>employee.deleted</code> ‚Üí DELETE /api/employee/{id}/</li>
                        </ul>

                        <h3>Helpdesk Strat√©gia</h3>
                        <p><strong>K√©t k√ºl√∂n rendszer:</strong></p>
                        <ul>
                            <li><strong>Support Chatwoot:</strong> K√ºls≈ë √ºgyf√©l ticketek (Support modul)</li>
                            <li><strong>HR Horilla Ticketing:</strong> Bels≈ë munkat√°rsi k√©r√©sek (HR modul)</li>
                        </ul>
                        <p><strong>Indok:</strong> K√ºl√∂nb√∂z≈ë use case-ek, k√ºl√∂n adat privacy ig√©nyek.</p>

                        <h2>Docker Compose</h2>
                        <pre><code>version: '3.8'
services:
  horilla-hrms:
    image: horilla/horilla:latest
    environment:
      - DATABASE_URL=postgresql://horilla:password@hr-db:5432/horilla
      - HR_MODULE_ENABLED=true
    ports:
      - "8000:8000"
    networks:
      - hr-network
    depends_on:
      - hr-db

  hr-rest-adapter:
    build: ./hr-rest-adapter
    environment:
      - KGC_WEBHOOK_SECRET=${KGC_WEBHOOK_SECRET}
      - HORILLA_API_URL=http://horilla-hrms:8000
    networks:
      - hr-network
      - hr-integration

  hr-db:
    image: postgres:14
    environment:
      - POSTGRES_DB=horilla
      - POSTGRES_USER=horilla
      - POSTGRES_PASSWORD=password
    volumes:
      - hr-data:/var/lib/postgresql/data
    networks:
      - hr-network</code></pre>

                        <h2>K√∂lts√©gbecsl√©s</h2>
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: #f3f4f6;">
                                    <th style="padding: 8px; text-align: left; border: 1px solid #e5e7eb;">Kateg√≥ria</th>
                                    <th style="padding: 8px; text-align: left; border: 1px solid #e5e7eb;">Komponens</th>
                                    <th style="padding: 8px; text-align: left; border: 1px solid #e5e7eb;">K√∂lts√©g/h√≥</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">Infrastrukt√∫ra</td>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">Horilla Container</td>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">$3-8</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">Infrastrukt√∫ra</td>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">PostgreSQL DB</td>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">$2-7</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">K√ºls≈ë Szolg√°ltat√°s</td>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">Nincs</td>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">$0</td>
                                </tr>
                                <tr style="font-weight: bold; background: #e8f5e9;">
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;" colspan="2">√ñSSZESEN / Franchise</td>
                                    <td style="padding: 8px; border: 1px solid #e5e7eb;">$5-30</td>
                                </tr>
                            </tbody>
                        </table>

                        <p><strong>üíö Legolcs√≥bb modul</strong> - Nincs k√ºls≈ë szolg√°ltat√°s (Support: Gemini API, CRM: Gmail SMTP ingyenes)</p>

                        <h2>Implement√°ci√≥s Timeline</h2>
                        <ol>
                            <li><strong>H√©t 1-2:</strong> Horilla setup + Docker Compose</li>
                            <li><strong>H√©t 3:</strong> Django REST Adapter fejleszt√©s</li>
                            <li><strong>H√©t 4:</strong> Employee sync implement√°ci√≥</li>
                            <li><strong>H√©t 5:</strong> Attendance + Leave funkci√≥k</li>
                            <li><strong>H√©t 6:</strong> HR Helpdesk integr√°ci√≥</li>
                            <li><strong>H√©t 7:</strong> Tesztel√©s √©s dokument√°ci√≥</li>
                        </ol>
                        <p><strong>Teljes id≈ë:</strong> 6-7 h√©t</p>

                        <hr>

                        <p style="text-align: center; margin-top: 3em; color: #6b7280;">
                            <strong>Dokumentum Verzi√≥:</strong> 1.0<br>
                            <strong>Utols√≥ Friss√≠t√©s:</strong> 2025-12-28<br>
                            <strong>K√∂vetkez≈ë Review:</strong> 2025-01-15
                        </p>
                    </div>
                </div>

                <!-- System Architecture Section -->
                <div x-show="activeTab === 'system-architecture'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h2 class="text-2xl font-bold">üèóÔ∏è KGC ERP Teljes Rendszer Architekt√∫ra</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">
                            √Åtfog√≥ n√©zet a KGC ERP Core-r√≥l, az Integration Layer-r≈ël √©s mindh√°rom plugin modulr√≥l (Support, CRM, HR)
                        </p>
                    </div>

                    <div class="explanation-box">
                        <h3 class="font-semibold mb-2">üìê Architekt√∫ra √Åttekint√©s</h3>
                        <ul class="space-y-2 text-sm">
                            <li><strong>KGC ERP CORE:</strong> 5 alap modul (B√©rl√©s, √ârt√©kes√≠t√©s, Szerviz, √úgyf√©lkezel√©s, Dolgoz√≥kezel√©s) + PostgreSQL adatb√°zis</li>
                            <li><strong>Integration Layer:</strong> Plugin Manager (Registry, Lifecycle, Event Bus), Webhook Router, Feature Flags</li>
                            <li><strong>Support Plugin:</strong> Chatwoot platform + Gemini AI + dedik√°lt PostgreSQL DB</li>
                            <li><strong>CRM Plugin:</strong> Twenty CRM platform + Gmail SMTP + dedik√°lt PostgreSQL DB</li>
                            <li><strong>HR Plugin:</strong> Horilla HRMS platform + dedik√°lt PostgreSQL DB</li>
                            <li><strong>K√ºls≈ë Szolg√°ltat√°sok:</strong> Google Gemini API (AI v√°laszok gener√°l√°s√°hoz)</li>
                        </ul>
                    </div>

                    <div class="diagram-container">
                        <h3 class="text-lg font-semibold mb-3">Rendszer Architekt√∫ra Diagram</h3>
                        <div class="diagram-wrapper">
                            <embed src="kgc-erp-system-architecture.svg" type="image/svg+xml" class="w-full h-auto" />
                        </div>
                    </div>

                    <div class="details-box">
                        <h3 class="font-semibold mb-2">üîó Kapcsol√≥d√°si Pontok</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mt-3">
                            <div>
                                <h4 class="font-semibold mb-1">Support Plugin ‚ü∑ KGC Core</h4>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400">
                                    <li>√úgyf√©l- √©s b√©rl√©si adatok lek√©r√©se</li>
                                    <li>Ticket st√°tuszok szinkroniz√°l√°sa</li>
                                    <li>Automatikus √©rtes√≠t√©sek</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-1">CRM Plugin ‚ü∑ KGC Core</h4>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400">
                                    <li>Contact szinkroniz√°ci√≥</li>
                                    <li>Deal tracking (b√©rl√©s ‚Üí deal)</li>
                                    <li>Email kamp√°nyok (Gmail SMTP)</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-1">HR Plugin ‚ü∑ KGC Core</h4>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400">
                                    <li>Employee szinkroniz√°ci√≥</li>
                                    <li>Jelenl√©t √©s szabads√°gok</li>
                                    <li>HR Helpdesk</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-1">Support ‚ü∑ Gemini API</h4>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400">
                                    <li>AI-gener√°lt v√°laszok</li>
                                    <li>Context-aware javaslatok</li>
                                    <li>Automatikus v√°lasz draft-ok</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- System Data Flow Section -->
                <div x-show="activeTab === 'system-dataflow'" class="space-y-6" x-cloak>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h2 class="text-2xl font-bold">üîÑ KGC ERP Teljes Adatfolyam (DFD Level 1)</h2>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">
                            Data Flow Diagram (DFD) amely bemutatja az adatok mozg√°s√°t a rendszer k√ºl√∂nb√∂z≈ë komponensei k√∂z√∂tt
                        </p>
                    </div>

                    <div class="explanation-box">
                        <h3 class="font-semibold mb-2">üìä DFD Elemek Magyar√°zata</h3>
                        <ul class="space-y-2 text-sm">
                            <li><strong>üîµ Folyamatok (Processes):</strong> 1.0 Integration Layer, 2.0 Support Plugin, 3.0 CRM Plugin, 4.0 HR Plugin</li>
                            <li><strong>üì¶ Adatt√°rak (Data Stores):</strong> D1 (KGC Core DB), D2 (Chatwoot DB), D3 (Twenty DB), D4 (Horilla DB)</li>
                            <li><strong>üü¢ K√ºls≈ë Entit√°sok:</strong> E1 (KGC ERP Modules), E2 (Users), E3 (Gemini API)</li>
                            <li><strong>‚û°Ô∏è Adatfolyamok:</strong> K√©k = Core rendszer, Lila = Plugin-specifikus, Z√∂ld = DB I/O, Narancs = User interakci√≥, Piros = K√ºls≈ë API</li>
                        </ul>
                    </div>

                    <div class="diagram-container">
                        <h3 class="text-lg font-semibold mb-3">Teljes Adatfolyam Diagram</h3>
                        <div class="diagram-wrapper">
                            <embed src="kgc-erp-dataflow.svg" type="image/svg+xml" class="w-full h-auto" />
                        </div>
                    </div>

                    <div class="details-box">
                        <h3 class="font-semibold mb-2">üîÑ F≈ëbb Adatfolyamok</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mt-3">
                            <div>
                                <h4 class="font-semibold mb-1">üì§ KGC Modules ‚Üí Integration Layer</h4>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400">
                                    <li>Plugin k√©r√©sek (enable/disable)</li>
                                    <li>Webhook esem√©nyek (√∫j b√©rl√©s, √ºgyf√©l m√≥dos√≠t√°s)</li>
                                    <li>Feature flag lek√©rdez√©sek</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-1">üì• Integration Layer ‚Üí Plugins</h4>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400">
                                    <li>Webhook esem√©nyek tov√°bb√≠t√°sa</li>
                                    <li>Plugin lifecycle parancsok</li>
                                    <li>Adatszinkroniz√°ci√≥s triggerek</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-1">üë• Users ‚Üí Plugins</h4>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400">
                                    <li>Ticket l√©trehoz√°s (Support)</li>
                                    <li>Contact/Deal kezel√©s (CRM)</li>
                                    <li>HR k√©r√©sek (jelenl√©t, szabads√°g)</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-1">üî¥ Support ‚Üí Gemini API</h4>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400">
                                    <li>AI v√°lasz gener√°l√°s k√©r√©sek</li>
                                    <li>Context √©s conversation history</li>
                                    <li>Gener√°lt v√°laszok fogad√°sa</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 p-4 rounded-lg mt-4">
                        <h3 class="font-semibold mb-2">üíæ Adatb√°zis Strat√©gia</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            Minden plugin saj√°t dedik√°lt PostgreSQL adatb√°zissal rendelkezik, ami biztos√≠tja:
                        </p>
                        <ul class="list-disc list-inside text-sm text-gray-600 dark:text-gray-400 mt-2">
                            <li>F√ºggetlen m≈±k√∂d√©s √©s sk√°l√°zhat√≥s√°g</li>
                            <li>Adatizol√°ci√≥ √©s biztons√°g</li>
                            <li>K√∂nny≈± backup √©s restore plugin-szinten</li>
                            <li>Nincs single point of failure</li>
                        </ul>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-12 no-print">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm">ü§ñ Generated with <a href="https://claude.com/claude-code" class="underline" target="_blank">Claude Code</a> | Winston - Architect Agent</p>
            <p class="text-xs opacity-70 mt-1">KGC ERP - Plugin Architekt√∫ra | 2025-12-28</p>
        </div>
    </footer>

    <!-- Alpine.js Data -->
    <script>
        function appData() {
            return {
                darkMode: localStorage.getItem('darkMode') === 'true',
                activeTab: 'support-overview',
                expanded: {},

                init() {
                    // Watch dark mode changes
                    this.$watch('darkMode', value => {
                        localStorage.setItem('darkMode', value);
                    });
                }
            }
        }
    </script>

    <!-- x-cloak styling -->
    <style>
        [x-cloak] { display: none !important; }
    </style>
</body>
</html>
